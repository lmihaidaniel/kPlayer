/*! kmlplayer.js - v0.3.1 */
var kmlPlayer=function(){"use strict";function e(e){return e.charAt(0).toUpperCase()+e.slice(1)}function t(e){if(void 0===e||null===e)return!1;var t=!1;return e.indexOf&&e.indexOf("%")>-1&&(t=parseFloat(e)),t}function n(e){return"function"==typeof e||!1}function i(e,t,n){var i=!1,r=!1;return"px"!=e.units&&(e.units="em"),e.min!==!1&&e.ratio!==!1&&(i=e.ratio*t/1e3,i<e.min&&(i=e.min),"px"==e.units&&(i=Math.ceil(i)),!isNaN(e.lineHeight)&&e.lineHeight&&(r=i*e.lineHeight,r<1&&(r=1),r=+r.toFixed(3)+e.units),i=+i.toFixed(3)+e.units),n&&(i&&(n.style.fontSize=i),r&&(n.style.lineHeight=r)),{fontSize:i,lineHeight:r}}function r(e,t){return t={exports:{}},e(t,t.exports),t.exports}function o(e){var e=e||this;return function(t){var n=arguments.length<=1||void 0===arguments[1]?.6:arguments[1],i=R(t);return i.isValid()&&(i.setAlpha(n),e.style.backgroundColor=i.toString()),e.style.backgroundColor}}function s(){try{var e=window.self!==window.top;if(e)for(var t=parent.document.getElementsByTagName("IFRAME"),n=0;n<t.length;n++){var i=t[n];i.contentWindow===window&&(e=i,i.setAttribute("allowfullscreen","true"),i.setAttribute("mozallowfullscreen","true"),i.setAttribute("webkitallowfullscreen","true"),i.setAttribute("frameborder","0"))}return e}catch(e){return!0}}function a(e){try{throw new Error(e)}catch(e){return}}function l(){var e=0,t=0;this.save=function(){e=window.pageXOffset||0,t=window.pageYOffset||0},this.restore=function(){window.scrollTo(e,t)}}function u(e){for(var t=_.selectAll("source",e),n=0;n<t.length;n++)_.removeElement(t[n]);e.setAttribute("src","data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAGm1kYXQAAAGzABAHAAABthBgUYI9t+8AAAMNbW9vdgAAAGxtdmhkAAAAAMXMvvrFzL76AAAD6AAAACoAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE/////+/wAAAiF0cmFrAAAAXHRraGQAAAAPxcy++sXMvvoAAAABAAAAAAAAACoAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAgAAAAIAAAAAAG9bWRpYQAAACBtZGhkAAAAAMXMvvrFzL76AAAAGAAAAAEVxwAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAABaG1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAShzdGJsAAAAxHN0c2QAAAAAAAAAAQAAALRtcDR2AAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAgACABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAXmVzZHMAAAAAA4CAgE0AAQAEgICAPyARAAAAAAMNQAAAAAAFgICALQAAAbABAAABtYkTAAABAAAAASAAxI2IAMUARAEUQwAAAbJMYXZjNTMuMzUuMAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAASAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYHVkdGEAAABYbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAraWxzdAAAACOpdG9vAAAAG2RhdGEAAAABAAAAAExhdmY1My4yMS4x"),e.load()}function f(e,t){switch(t){case"video/webm":return!(!e.canPlayType||!e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!e.canPlayType||!e.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}}function c(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=Z();i&&!function(){var r=!1,o=!1,s=!1,a=function(){o=!0},l={visible:function(){},hidden:function(){}},u=function(){l={visible:function(){},hidden:function(){}},r=!1,o=!1,D.removeEventListener(X,f,!1),e.removeEventListener("playing",a)},f=function(){r&&(D[q]?(o&&!e.paused&&(e.pause(),s=!0),l.hidden()):(s&&e.paused&&(e.play(),s=!1),l.visible()))},c=function(t){i&&(D.removeEventListener(X,f,!1),e.removeEventListener("playing",a),l.visible=t.onVisible||l.visible,l.hidden=t.onHidden||l.hidden,r=!0,D.addEventListener(X,f,!1),e.addEventListener("playing",a))};l.visible=n.onVisible||l.visible,l.hidden=n.onHidden||l.hidden,r=!0,D.addEventListener(X,f,!1),e.addEventListener("playing",a),t.init=c,t.destroy=u,t.on=function(e,t){e in l&&(l[e]=t)},t.enabled=function(e){return"boolean"==typeof e&&(r=e),r}}()}var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},A=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},p=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t};!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),o=window.setTimeout(function(){t(i+r)},r);return e=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var m=function(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")},g=void 0,y=void 0,v=void 0,b=void 0;"classList"in document.documentElement?(g=function(e,t){return e.classList.contains(t)},y=function(e,t){if(null!=t){t=t.split(" ");for(var n in t)e.classList.add(t[n])}},v=function(e,t){e.classList.remove(t)}):(g=function(e,t){return m(t).test(e.className)},y=function(e,t){g(e,t)||(e.className=e.className+" "+t)},v=function(e,t){e.className=e.className.replace(m(t)," ")}),b=function(e,t){var n=g(e,t)?v:y;n(e,t)};var w=function(e){var t="Webkit Moz ms O".split(" "),n=document.documentElement.style;if(void 0!==n[e])return e;e=e.charAt(0).toUpperCase()+e.substr(1);for(var i=0;i<t.length;i++)if(void 0!==n[t[i]+e])return t[i]+e},_={stylePrefix:{transform:w("transform"),perspective:w("perspective"),backfaceVisibility:w("backfaceVisibility")},triggerWebkitHardwareAcceleration:function(e){this.stylePrefix.backfaceVisibility&&this.stylePrefix.perspective&&(e.style[this.stylePrefix.perspective]="1000px",e.style[this.stylePrefix.backfaceVisibility]="hidden")},transform:function(e,t){e.style[this.stylePrefix.transform]=t},selectAll:function(e,t){return(t||document).querySelectorAll(e)},select:function(e,t){return(t||document).querySelector(e)},hasClass:g,addClass:y,removeClass:v,toggleClass:b,autoLineHeight:function(e){var t=e.offsetHeight+"px";return e.style.lineHeight=t,t},createElement:function(e,t){var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);return n},emptyElement:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},replaceElement:function(e,t){e.parentNode.replaceChild(t,e)},removeElement:function(e){e.parentNode.removeChild(e)},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},insertBefore:function(e,t){t.parentNode.insertBefore(e,t)},getTextContent:function(e){return e.textContent||e.innerText},wrap:function(e,t){e.length||(e=[e]);for(var n=e.length-1;n>=0;n--){var i=n>0?t.cloneNode(!0):t,r=e[n],o=r.parentNode,s=r.nextSibling;return i.appendChild(r),s?o.insertBefore(i,s):o.appendChild(i),i}}},x=function(){var e,t,n,i=(navigator.appVersion,navigator.userAgent),r=navigator.appName,o=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);if("Netscape"==r&&navigator.appVersion.indexOf("Trident")>-1){r="IE";var a=i.indexOf("Edge/");o=i.substring(a+5,i.indexOf(".",a))}else navigator.appVersion.indexOf("Windows NT")!==-1&&navigator.appVersion.indexOf("rv:11")!==-1?(r="IE",o="11;"):(t=i.indexOf("MSIE"))!==-1?(r="IE",o=i.substring(t+5)):(t=i.indexOf("Chrome"))!==-1?(r="Chrome",o=i.substring(t+7)):(t=i.indexOf("Safari"))!==-1?(r="Safari",o=i.substring(t+7),(t=i.indexOf("Version"))!==-1&&(o=i.substring(t+8))):(t=i.indexOf("Firefox"))!==-1?(r="Firefox",o=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(r=i.substring(e,t),o=i.substring(t+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName));return(n=o.indexOf(";"))!==-1&&(o=o.substring(0,n)),(n=o.indexOf(" "))!==-1&&(o=o.substring(0,n)),s=parseInt(""+o,10),isNaN(s)&&(o=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),[r,s]}(),E={browser:x,isIE:function(){return"IE"===x[0]&&x[1]}(),isFirefox:function(){return"Firefox"===x[0]&&x[1]}(),isChrome:function(){return"Chrome"===x[0]&&x[1]}(),isSafari:function(){return"Safari"===x[0]&&x[1]}(),isTouch:"ontouchstart"in document.documentElement,isIos:/(iPad|iPhone|iPod)/g.test(navigator.platform)},k=function(){var e=function e(t,n){if(n){var i=Array.isArray(n),r=i&&[]||{};return i?(t=t||[],r=r.concat(t),n.forEach(function(n,i){"undefined"==typeof r[i]?r[i]=n:"object"===("undefined"==typeof n?"undefined":h(n))?r[i]=e(t[i],n):t.indexOf(n)===-1&&r.push(n)})):(t&&"object"===("undefined"==typeof t?"undefined":h(t))&&Object.keys(t).forEach(function(e){r[e]=t[e]}),Object.keys(n).forEach(function(i){"object"===h(n[i])&&n[i]&&t[i]?r[i]=e(t[i],n[i]):r[i]=n[i]})),r}return t||[]};return e}(),S=function(e,t,n){var r=!1,o=function(){if(r)return i(t,n.width(),e)};this.update=function(e){if(void 0!==e)return t||(t={ratio:1,min:1,lineHeight:!1}),t=k(t,e),o()},this.enabled=function(e){return"boolean"==typeof e&&t&&(r=e),r},n.on&&n.on("resize",o)},C={x:0,y:0,width:"100%",height:"100%",fontSize:null,lineHeight:null,offsetX:0,offsetY:0,originPoint:"topLeft",visible:!1,transform:{x:null,y:null},translate:!0},H=function(e,n){var i=function(){return{offsetX:n.offsetX(),offsetY:n.offsetY(),width:n.width(),height:n.height(),scale:n.width()/n.videoWidth(),scaleY:n.width()/n.videoHeight()}},r={x:0,y:0,width:"100%",height:"100%",fontSize:null,lineHeight:null},o=0,s=0,a=0,l=0,u=null,f=k(C,e),c=!1,h=function(){if(c&&u&&u.nodeType){if(null!=r.width&&(u.style.width=r.width+"px"),null!=r.height&&(u.style.height=r.height+"px"),_.stylePrefix.transform&&f.translate){var e="";null!=r.x&&null!=r.y?(e="translate("+r.x+"px,"+r.y+"px)",u.style.left="auto",u.style.right="auto",u.style.bottom="auto",u.style.top="auto"):(null!=r.x&&(u.style.left="auto",u.style.right="auto",e="translateX("+r.x+"px)"),null!=r.y&&(u.style.bottom="auto",u.style.top="auto",e="translateY("+r.y+"px)")),_.transform(u,e)}else null!=r.x&&null!=r.y?(u.style.left=r.x+"px",u.style.top=r.y+"px"):(null!=r.x&&(u.style.left=r.x+"px"),null!=r.y&&(u.style.top=r.y+"px"));f.fontSize!==r.fontSize&&(u.style.fontSize=r.fontSize=f.fontSize),f.lineHeight!==r.lineHeight&&(u.style.lineHeight=r.lineHeight=f.lineHeight)}},d=function(){var e=n.width(),u=n.height(),c=n.offsetX(),d=n.offsetY();if(o!=e||s!=u||c!=a||d!=l){o=e,s=u,a=c,l=d;var A=i(),p=t(f.width);p?r.width=A.width*p/100:null!=f.width&&(r.width=A.width*A.scale),r.width=Math.ceil(r.width);var m=t(f.height);if(m?r.height=A.height*m/100:null!=f.height&&(r.height=A.height*A.scale),r.height=Math.ceil(r.height),null!=f.x){var g=t(f.x);g?r.x=A.offsetX+A.width*g/100:r.x=A.offsetX+f.x*A.scale,r.x=Math.floor(r.x);var y=t(f.transform.x);y&&(r.x+=y*r.width/100),f.offsetX&&(r.x+=f.offsetX)}if(null!=f.y){var v=t(f.y);v?r.y=A.offsetY+A.height*v/100:r.y=A.offsetY+f.y*A.scale,r.y=Math.floor(r.y);var b=t(f.transform.y);b&&(r.y+=b*r.width/100),f.offsetY&&(r.y+=f.offsetY)}h()}};this.applyTo=function(e){return e&&e.nodeType&&(u=e,d()),u};var A=function(){c&&d()};this.data=function(){return r},this.settings=function(e){return f=k(f,e),d(),f},this.enabled=function(e){return"boolean"==typeof e&&(c=e,e&&A()),c},n.on&&n.on("resize",A)},F=r(function(e){function t(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function n(){}var i=Object.prototype.hasOwnProperty,r="function"!=typeof Object.create&&"~";n.prototype._events=void 0,n.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)i.call(t,e)&&n.push(r?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},n.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events&&this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);o<s;o++)a[o]=i[o].fn;return a},n.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events||!this._events[a])return!1;var l,u,f=this._events[a],c=arguments.length;if("function"==typeof f.fn){switch(f.once&&this.removeListener(e,f.fn,void 0,!0),c){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,t),!0;case 3:return f.fn.call(f.context,t,n),!0;case 4:return f.fn.call(f.context,t,n,i),!0;case 5:return f.fn.call(f.context,t,n,i,o),!0;case 6:return f.fn.call(f.context,t,n,i,o,s),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];f.fn.apply(f.context,l)}else{var h,d=f.length;for(u=0;u<d;u++)switch(f[u].once&&this.removeListener(e,f[u].fn,void 0,!0),c){case 1:f[u].fn.call(f[u].context);break;case 2:f[u].fn.call(f[u].context,t);break;case 3:f[u].fn.call(f[u].context,t,n);break;default:if(!l)for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];f[u].fn.apply(f[u].context,l)}}return!0},n.prototype.on=function(e,n,i){var o=new t(n,i||this),s=r?r+e:e;return this._events||(this._events=r?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},n.prototype.once=function(e,n,i){var o=new t(n,i||this,(!0)),s=r?r+e:e;return this._events||(this._events=r?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],o]:this._events[s].push(o):this._events[s]=o,this},n.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events||!this._events[o])return this;var s=this._events[o],a=[];if(t)if(s.fn)(s.fn!==t||i&&!s.once||n&&s.context!==n)&&a.push(s);else for(var l=0,u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||n&&s[l].context!==n)&&a.push(s[l]);return a.length?this._events[o]=1===a.length?a[0]:a:delete this._events[o],this},n.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[r?r+e:e]:this._events=r?{}:Object.create(null),this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=r,"undefined"!=typeof e&&(e.exports=n)}),z=F&&"object"===("undefined"==typeof F?"undefined":h(F))&&"default"in F?F.default:F,L=r(function(e){!function(t){function n(e,t){if(e=e?e:"",t=t||{},e instanceof n)return e;if(!(this instanceof n))return new n(e,t);var r=i(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=q(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=q(this._r)),this._g<1&&(this._g=q(this._g)),this._b<1&&(this._b=q(this._b)),this._ok=r.ok,this._tc_id=Y++}function i(e){var t={r:0,g:0,b:0},n=1,i=null,o=null,a=null,u=!1,f=!1;return"string"==typeof e&&(e=M(e)),"object"==("undefined"==typeof e?"undefined":h(e))&&(W(e.r)&&W(e.g)&&W(e.b)?(t=r(e.r,e.g,e.b),u=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):W(e.h)&&W(e.s)&&W(e.v)?(i=N(e.s),o=N(e.v),t=l(e.h,i,o),u=!0,f="hsv"):W(e.h)&&W(e.s)&&W(e.l)&&(i=N(e.s),a=N(e.l),t=s(e.h,i,a),u=!0,f="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=C(n),{ok:u,format:e.format||f,r:X(255,V(t.r,0)),g:X(255,V(t.g,0)),b:X(255,V(t.b,0)),a:n}}function r(e,t,n){return{r:255*H(e,255),g:255*H(t,255),b:255*H(n,255)}}function o(e,t,n){e=H(e,255),t=H(t,255),n=H(n,255);var i,r,o=V(e,t,n),s=X(e,t,n),a=(o+s)/2;if(o==s)i=r=0;else{var l=o-s;switch(r=a>.5?l/(2-o-s):l/(o+s),o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,l:a}}function s(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,o,s;if(e=H(e,360),t=H(t,100),n=H(n,100),0===t)r=o=s=n;else{var a=n<.5?n*(1+t):n+t-n*t,l=2*n-a;r=i(l,a,e+1/3),o=i(l,a,e),s=i(l,a,e-1/3)}return{r:255*r,g:255*o,b:255*s}}function a(e,t,n){e=H(e,255),t=H(t,255),n=H(n,255);var i,r,o=V(e,t,n),s=X(e,t,n),a=o,l=o-s;if(r=0===o?0:l/o,o==s)i=0;else{switch(o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,v:a}}function l(e,n,i){e=6*H(e,360),n=H(n,100),i=H(i,100);var r=t.floor(e),o=e-r,s=i*(1-n),a=i*(1-o*n),l=i*(1-(1-o)*n),u=r%6,f=[i,a,s,s,l,i][u],c=[l,i,i,a,s,s][u],h=[s,s,l,i,i,a][u];return{r:255*f,g:255*c,b:255*h}}function u(e,t,n,i){var r=[O(q(e).toString(16)),O(q(t).toString(16)),O(q(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function f(e,t,n,i,r){var o=[O(q(e).toString(16)),O(q(t).toString(16)),O(q(n).toString(16)),O(P(i))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function c(e,t,n,i){var r=[O(P(i)),O(q(e).toString(16)),O(q(t).toString(16)),O(q(n).toString(16))];return r.join("")}function d(e,t){t=0===t?0:t||10;var i=n(e).toHsl();return i.s-=t/100,i.s=F(i.s),n(i)}function A(e,t){t=0===t?0:t||10;var i=n(e).toHsl();return i.s+=t/100,i.s=F(i.s),n(i)}function p(e){return n(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var i=n(e).toHsl();return i.l+=t/100,i.l=F(i.l),n(i)}function g(e,t){t=0===t?0:t||10;var i=n(e).toRgb();return i.r=V(0,X(255,i.r-q(255*-(t/100)))),i.g=V(0,X(255,i.g-q(255*-(t/100)))),i.b=V(0,X(255,i.b-q(255*-(t/100)))),n(i)}function y(e,t){t=0===t?0:t||10;var i=n(e).toHsl();return i.l-=t/100,i.l=F(i.l),n(i)}function v(e,t){var i=n(e).toHsl(),r=(i.h+t)%360;return i.h=r<0?360+r:r,n(i)}function b(e){var t=n(e).toHsl();return t.h=(t.h+180)%360,n(t)}function w(e){var t=n(e).toHsl(),i=t.h;return[n(e),n({h:(i+120)%360,s:t.s,l:t.l}),n({h:(i+240)%360,s:t.s,l:t.l})]}function _(e){var t=n(e).toHsl(),i=t.h;return[n(e),n({h:(i+90)%360,s:t.s,l:t.l}),n({h:(i+180)%360,s:t.s,l:t.l}),n({h:(i+270)%360,s:t.s,l:t.l})]}function x(e){var t=n(e).toHsl(),i=t.h;return[n(e),n({h:(i+72)%360,s:t.s,l:t.l}),n({h:(i+216)%360,s:t.s,l:t.l})]}function E(e,t,i){t=t||6,i=i||30;var r=n(e).toHsl(),o=360/i,s=[n(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,s.push(n(r));return s}function k(e,t){t=t||6;for(var i=n(e).toHsv(),r=i.h,o=i.s,s=i.v,a=[],l=1/t;t--;)a.push(n({h:r,s:o,v:s})),s=(s+l)%1;return a}function S(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function H(e,n){L(e)&&(e="100%");var i=R(e);return e=X(n,V(0,parseFloat(e))),i&&(e=parseInt(e*n,10)/100),t.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function F(e){return X(1,V(0,e))}function z(e){return parseInt(e,16)}function L(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function R(e){return"string"==typeof e&&e.indexOf("%")!=-1}function O(e){return 1==e.length?"0"+e:""+e}function N(e){return e<=1&&(e=100*e+"%"),e}function P(e){return t.round(255*parseFloat(e)).toString(16)}function T(e){return z(e)/255}function W(e){return!!D.CSS_UNIT.exec(e)}function M(e){e=e.replace(I,"").replace(j,"").toLowerCase();var t=!1;if(Q[e])e=Q[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=D.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=D.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=D.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=D.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=D.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=D.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=D.hex8.exec(e))?{r:z(n[1]),g:z(n[2]),b:z(n[3]),a:T(n[4]),format:t?"name":"hex8"}:(n=D.hex6.exec(e))?{r:z(n[1]),g:z(n[2]),b:z(n[3]),format:t?"name":"hex"}:(n=D.hex4.exec(e))?{r:z(n[1]+""+n[1]),g:z(n[2]+""+n[2]),b:z(n[3]+""+n[3]),a:T(n[4]+""+n[4]),format:t?"name":"hex8"}:!!(n=D.hex3.exec(e))&&{r:z(n[1]+""+n[1]),g:z(n[2]+""+n[2]),b:z(n[3]+""+n[3]),format:t?"name":"hex"}}function B(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var I=/^\s+/,j=/\s+$/,Y=0,q=t.round,X=t.min,V=t.max,G=t.random;n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,i,r,o,s,a=this.toRgb();return e=a.r/255,n=a.g/255,i=a.b/255,r=e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4),o=n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4),s=i<=.03928?i/12.92:t.pow((i+.055)/1.055,2.4),.2126*r+.7152*o+.0722*s},setAlpha:function(e){return this._a=C(e),this._roundA=q(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=q(360*e.h),n=q(100*e.s),i=q(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=q(360*e.h),n=q(100*e.s),i=q(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return u(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return f(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:q(this._r),g:q(this._g),b:q(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+q(this._r)+", "+q(this._g)+", "+q(this._b)+")":"rgba("+q(this._r)+", "+q(this._g)+", "+q(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:q(100*H(this._r,255))+"%",g:q(100*H(this._g,255))+"%",b:q(100*H(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+q(100*H(this._r,255))+"%, "+q(100*H(this._g,255))+"%, "+q(100*H(this._b,255))+"%)":"rgba("+q(100*H(this._r,255))+"%, "+q(100*H(this._g,255))+"%, "+q(100*H(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(U[u(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+c(this._r,this._g,this._b,this._a),i=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=n(e);i="#"+c(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return r?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return n(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(A,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},n.fromRatio=function(e,t){if("object"==("undefined"==typeof e?"undefined":h(e))){var i={};for(var r in e)e.hasOwnProperty(r)&&("a"===r?i[r]=e[r]:i[r]=N(e[r]));e=i}return n(e,t)},n.equals=function(e,t){return!(!e||!t)&&n(e).toRgbString()==n(t).toRgbString()},n.random=function(){return n.fromRatio({r:G(),g:G(),b:G()})},n.mix=function(e,t,i){i=0===i?0:i||50;var r=n(e).toRgb(),o=n(t).toRgb(),s=i/100,a={r:(o.r-r.r)*s+r.r,g:(o.g-r.g)*s+r.g,b:(o.b-r.b)*s+r.b,a:(o.a-r.a)*s+r.a};return n(a)},n.readability=function(e,i){var r=n(e),o=n(i);return(t.max(r.getLuminance(),o.getLuminance())+.05)/(t.min(r.getLuminance(),o.getLuminance())+.05)},n.isReadable=function(e,t,i){var r,o,s=n.readability(e,t);switch(o=!1,r=B(i),r.level+r.size){case"AAsmall":case"AAAlarge":o=s>=4.5;break;case"AAlarge":o=s>=3;break;case"AAAsmall":o=s>=7}return o},n.mostReadable=function(e,t,i){var r,o,s,a,l=null,u=0;i=i||{},o=i.includeFallbackColors,s=i.level,a=i.size;for(var f=0;f<t.length;f++)r=n.readability(e,t[f]),r>u&&(u=r,l=n(t[f]));return n.isReadable(e,l,{level:s,size:a})||!o?l:(i.includeFallbackColors=!1,n.mostReadable(e,["#fff","#000"],i))};var Q=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=n.hexNames=S(Q),D=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof e&&e.exports?e.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):window.tinycolor=n}(Math)}),R=L&&"object"===("undefined"==typeof L?"undefined":h(L))&&"default"in L?L.default:L,O={x:0,y:0,width:0,height:0},N=function(e,n){var i=e.videoWidth()||e.width||1,r=e.videoHeight()||e.height||1,o=k(O,n),s=t(o.width);s===!1&&(s=o.width/i*100);var a=t(o.height);a===!1&&(a=o.height/r*100);var l=t(o.x);l===!1&&(l=o.x/i*100);var u=t(o.y);return u===!1&&(u=o.y/r*100),{x:l,y:u,width:s,height:a}},P=function(e){function t(i,r,s,a){d(this,t);var l=!1,u=!1,f=!1,c=_.select(".body",i);c.backgroundColor=o(c);var h=p(this,e.call(this));return h.ctx=s,h.body=c,h.config=function(e){e&&(r=k(r,e));var t=new N(a,r);return c.style.width=t.width+"%",c.style.height=t.height+"%",_.stylePrefix.transform?_.transform(c,"translate("+100/t.width*t.x+"%,"+100/t.height*t.y+"%)"):(c.style.top=t.x+"%",c.style.left=t.y+"%"),this.emit("config"),t},h.config(),a.on("resize",h.config),h.hide=function(){u&&(h.emit("beforeHide"),_.addClass(i,"hidden"),u=!1,r.pause&&(l||a.play(),f&&r.externalControls&&a.externalControls.enabled(!0)),setTimeout(function(){i.style.display="none",n(r.onHide)&&r.onHide(),s.checkVisibleElements(),h.emit("hide")},250))},h.show=function(){u||(u=!0,h.emit("beforeShow"),s.enabled(!0),i.style.display="block",setTimeout(function(){_.removeClass(i,"hidden"),n(r.onHide)&&r.onShow(),h.emit("show")},50),r.pause&&(a.paused()?l=!0:(l=!1,a.pause())),r.externalControls&&(a.externalControls.enabled()?(f=!0,a.externalControls.enabled(!1)):f=!0))},r.visible&&h.show(),h.visible=function(e){return"boolean"==typeof e&&(u=e),u},h}return A(t,e),t.prototype.destroy=function(){this.removeAllListeners(),this.ctx.remove(this.body)},t}(z),T=function(e){function t(n,i,r,s){d(this,t);var a=p(this,e.call(this,n,i,r,s)),l=_.createElement("div");_.addClass(l,"overlay triggerClose"),_.insertBefore(l,a.body);var u=document.createElement("h1");_.addClass(u,"header"),a._title=document.createElement("span"),u.appendChild(a._title),a._closeBtn=document.createElement("a"),a._closeBtn.innerHTML="<img src='svg/ic_close.svg'/>",_.addClass(a._closeBtn,"closeBtn"),a._closeBtn.addEventListener("click",a.hide),u.appendChild(a._closeBtn),a.body.appendChild(u),a.backgroundColor=o(l),a.scaleSize=function(e){var t=this.config({x:(100-e)/2+"%",y:(100-e)/2+"%",width:e+"%",height:e+"%"});t.y<10?u.style.transform="translateY(0)":u.style.transform="translateY(-100%)"},s.on("resize",function(){a.emit("resize")}),["resize","config","show"].map(function(e){a.on(e,function(){a.autoLineHeight()})});for(var f=_.selectAll(".triggerClose",n),c=0,h=f.length;c<h;c+=1)f[c].addEventListener("click",a.hide);return a}return A(t,e),t.prototype.destroy=function(){this.removeAllListeners(),this.ctx.remove(this.body),_.removeElement(this.body.parentNode)},t.prototype.autoLineHeight=function(e){
this.visible()&&(e?_.autoLineHeight(e):_.autoLineHeight(this._title.parentNode))},t.prototype.title=function(e){return null!=e?(this._title.innerHTML=e,this.autoLineHeight(),e):this._title.innerHTML},t}(P),W=!1,M="webkit moz o ms khtml".split(" "),B="";if("undefined"!=typeof document.cancelFullScreen)W=!0;else for(var I=0,j=M.length;I<j;I++){if(B=M[I],"undefined"!=typeof document[B+"CancelFullScreen"]){W=!0;break}if("undefined"!=typeof document.msExitFullscreen&&document.msFullscreenEnabled){B="ms",W=!0;break}}var Y=""===B?"fullscreenchange":B+"fullscreenchange";Y=Y.toLowerCase();var q,X,V=function(e){function t(){d(this,t);var n=p(this,e.call(this));if(n.iframe=null,n.scrollPosition=new l,n._fullscreenElement=null,n.fullscreenElementStyle={},W){var i=function(){n.isFullScreen()||setTimeout(n.scrollPosition.restore,100)};document.addEventListener(Y,i,!1)}return n}return A(t,e),t.prototype.defualtFullScreenElement=function(e){var t=e;return null==t&&(t=this.iframe?this.iframe:this.wrapper),t},t.prototype.onFullscreenChange=function(e){this.media.addEventListener(Y,function(e){return e.preventDefault(),e.stopPropagation,!1},!0)},t.prototype.isFullWindow=function(){return!1},t.prototype.isFullScreen=function(e){if(!W)return this.isFullWindow();var t=this.defualtFullScreenElement(e);switch(B){case"":return document.fullscreenElement==t;case"moz":return document.mozFullScreenElement==t;default:return document[B+"FullscreenElement"]==t}},t.prototype.requestFullWindow=function(e){if(!(this.isFullWindow()||W&&this.isFullScreen())){var t=this.defualtFullScreenElement(e);this.scrollPosition.save();var n=t.style;this.fullscreenElementStyle.position=n.position||"",this.fullscreenElementStyle.margin=n.margin||"",this.fullscreenElementStyle.top=n.top||"",this.fullscreenElementStyle.left=n.left||"",this.fullscreenElementStyle.width=n.width||"",this.fullscreenElementStyle.height=n.height||"",this.fullscreenElementStyle.zIndex=n.zIndex||"",this.fullscreenElementStyle.maxWidth=n.maxWidth||"",this.fullscreenElementStyle.maxHeight=n.maxHeight||"",t.style.position="absolute",t.style.top=t.style.left=0,t.style.margin=0,t.style.maxWidth=t.style.maxHeight=t.style.width=t.style.height="100%",t.style.zIndex=2147483647,this._fullscreenElement=t,this.isFullWindow=function(){return!0}}},t.prototype.requestFullScreen=function(e){var t=this.defualtFullScreenElement(e);return W?(this.scrollPosition.save(),""===B?t.requestFullScreen():t[B+("ms"==B?"RequestFullscreen":"RequestFullScreen")]()):void this.requestFullWindow(t)},t.prototype.cancelFullWindow=function(){if(this.isFullWindow()&&(!W||!this.isFullScreen())){for(var e in this.fullscreenElementStyle)this._fullscreenElement.style[e]=this.fullscreenElementStyle[e];this._fullscreenElement=null,this.isFullWindow=function(){return!1},this.scrollPosition.restore()}},t.prototype.cancelFullScreen=function(){return W?""===B?document.cancelFullScreen():document[B+("ms"==B?"ExitFullscreen":"CancelFullScreen")]():void this.cancelFullWindow()},t.prototype.toggleFullWindow=function(e){var t=!this.isFullWindow();t?this.requestFullWindow(e):this.cancelFullWindow()},t.prototype.toggleFullScreen=function(e){var t=this.isFullScreen();t?this.cancelFullScreen():this.requestFullScreen(e)},t.prototype.fullscreenElement=function(){return W?""===B?document.fullscreenElement:document[B+"FullscreenElement"]:this._fullscreenElement},t}(z),G=["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","playing","pause","error","seeking","emptied","seeked","ratechange","suspend"],Q=function(e){function t(n){d(this,t);var i=p(this,e.call(this));return null==n?(a("You need to supply a HTMLVideoElement to instantiate the player"),p(i)):(i.media=n,G.forEach(function(e){n.addEventListener(e,function(){i.emit(e)})}),i.canPlay={mp4:f(n,"video/mp4"),webm:f(n,"video/webm"),ogg:f(n,"video/ogg")},i)}return A(t,e),t.prototype.autoplay=function(e){return"boolean"==typeof e&&(this.media.autoplay=e),this.media.autoplay},t.prototype.buffered=function(){return this.media.buffered},t.prototype.nativeControls=function(e){return"boolean"==typeof e&&(this.media.controls=e),this.media.controls},t.prototype.crossorigin=function(e){return"use-credentials"===e?(this.media.crossOrigin="use-credentials",e):e?(this.media.crossOrigin="anonymous","anonymous"):(e===!1&&(this.media.crossOrigin=null),this.media.crossOrigin)},t.prototype.loop=function(e){return"boolean"==typeof e&&(this.media.loop=e),this.media.loop},t.prototype.muted=function(e){return"boolean"==typeof e&&(this.media.muted=e),this.media.muted},t.prototype.mute=function(){this.muted(!0)},t.prototype.unmute=function(){this.muted(!1)},t.prototype.toggleMute=function(){return this.muted(!this.muted())},t.prototype.played=function(){return this.media.played},t.prototype.preload=function(e){return"metadata"===e||"meta"===e?(this.media.preload="metadata","metadata"):e?(this.media.preload="auto","auto"):e===!1?(this.media.preload="none","none"):this.media.preload},t.prototype.poster=function(e){return void 0!==e&&(this.media.poster=e),this.media.poster},t.prototype.src=function(e){if(void 0!==e)if(u(this.media),e instanceof Array){var t=0;for(e.length;t+=1;){if("video/mp4"===e[t].type&&this.canPlay.mp4)return this.media.src=e[t].src;if("video/webm"===e[t].type&&this.canPlay.webm)return this.media.src=e[t].src;if("video/ogg"===e[t].type&&this.canPlay.ogg)return this.media.src=e[t].src}}else e.src&&e.type?this.media.src=e.src:this.media.src=e;return this.media.currentSrc},t.prototype.play=function(){this.media.play()},t.prototype.pause=function(){this.media.pause()},t.prototype.paused=function(){return this.media.paused},t.prototype.playing=function(){return this.media.paused},t.prototype.togglePlay=function(){this.media.paused?this.play():this.pause()},t.prototype.currentTime=function(e){return null===e||isNaN(e)?this.media.currentTime:(e=parseFloat(e),e>this.media.duration&&(e=this.media.duration),e<0&&(e=0),this.media.currentTime=e,e)},t.prototype.seek=function(e){return this.currentTime(e)},t.prototype.load=function(e){void 0!==e&&this.src(e),this.media.load()},t.prototype.duration=function(){return this.media.duration},t.prototype.volume=function(e){return null===e||isNaN(e)?this.media.volume:(e=parseFloat(e),e>1&&(e=1),e<0&&(e=0),this.media.volume=e,e)},t}(V),U=function(){var e=0,t=function(t,n){void 0!==n&&(e=n);var i={wrapperWidth:t.offsetWidth,wrapperHeight:t.offsetHeight,scale:e||t.width/t.height,width:0,height:0,offsetX:0,offsetY:0};return i.wrapperScale=i.wrapperWidth/i.wrapperHeight,i.wrapperScale>i.scale?(i.height=i.wrapperHeight,i.width=i.scale*i.height,i.offsetX=(i.wrapperWidth-i.width)/2):(i.width=i.wrapperWidth,i.height=i.width/i.scale,i.offsetY=(i.wrapperHeight-i.height)/2),i};return t}(),D=document||{};"undefined"!=typeof D.hidden?(q="hidden",X="visibilitychange"):"undefined"!=typeof D.mozHidden?(q="mozHidden",X="mozvisibilitychange"):"undefined"!=typeof D.msHidden?(q="msHidden",X="msvisibilitychange"):"undefined"!=typeof D.webkitHidden&&(q="webkitHidden",X="webkitvisibilitychange");var Z=function(){return!("undefined"==typeof D[q])},$=document||{},J=function(e){var t=!0,n=!0,i=null,r=e,o=function(e){if(t){if(r.parentNode.focus(),32==e.keyCode&&(r.paused?r.play():r.pause()),n){if(37==e.keyCode)return void(r.currentTime=r.currentTime-5);if(39==e.keyCode)return void(r.currentTime=r.currentTime+5)}if(38==e.keyCode){var i=r.volume;return i+=.1,i>1&&(i=1),void(r.volume=i)}if(40==e.keyCode){var o=r.volume;return o-=.1,o<0&&(o=0),void(r.volume=o)}}},s=function(e){};this.enabled=function(e){return void 0===e?t:void(t=e)},this.seekEnabled=function(e){return void 0===e?n:void(n=e)},this.init=function(){t=!0,i=null,n=!0,$.body.addEventListener("keydown",o.bind(this),!1),$.body.addEventListener("keyup",s.bind(this),!1)},this.destroy=function(){t=!1,i=null,n=!0,$.body.removeEventListener("keydown",o),$.body.removeEventListener("keyup",s)},this.init()},K=function(){function e(e){var i=["get","post","put","delete"];return e=e||{},e.baseUrl=e.baseUrl||"",e.method&&e.url?n(e.method,e.baseUrl+e.url,t(e.data),e):i.reduce(function(i,r){return i[r]=function(i,o){return n(r,e.baseUrl+i,t(o),e)},i},{})}function t(e){return e||null}function n(e,t,n,r){var s=["then","catch","always"],l=s.reduce(function(e,t){return e[t]=function(n){return e[t]=n,e},e},{}),u=new XMLHttpRequest;return u.open(e,t,!0),u.withCredentials=r.hasOwnProperty("withCredentials"),i(u,r.headers),u.addEventListener("readystatechange",o(l,u),!1),u.send(a(n)),l.abort=function(){return u.abort()},l}function i(e,t){t=t||{},r(t)||(t["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(t).forEach(function(n){t[n]&&e.setRequestHeader(n,t[n])})}function r(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}function o(e,t){return function n(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",n,!1),e.always.apply(e,s(t)),t.status>=200&&t.status<300?e.then.apply(e,s(t)):e.catch.apply(e,s(t)))}}function s(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]}function a(e){return l(e)?u(e):e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return Object.keys(e).reduce(function(t,n){var i=t?t+"&":"";return i+f(n)+"="+f(e[n])},"")}function f(e){return encodeURIComponent(e)}return e}(),ee=function(e){return e.stopPropagation(),e.preventDefault(),!1},te={videoWidth:920,videoHeight:520,autoplay:!1,loop:!1,controls:!1,font:{ratio:1,min:.5,units:"em"},contextMenu:!1},ne=function(t){function n(i,r){d(this,n);var o=i.video,a=p(this,t.call(this,o));if(null==o)return p(a);a.__settings={},a.settings(k(te,i)),a.device=E,a.iframe=s(),_.addClass(o,"kml"+e(o.nodeName.toLowerCase())),a.wrapper=_.wrap(a.media,_.createElement("div",{class:"kmlPlayer"})),_.triggerWebkitHardwareAcceleration(a.wrapper),a.inIframe&&_.addClass(a.wrapper,"inFrame"),a.pageVisibility=new c(o),a.externalControls=new J(o);for(var l in r)a.on(l,r[l],a);return a.on("loadedmetadata",function(){a.media.width==a.media.videoWidth&&a.media.height==a.media.videoHeight||(a.videoWidth(),a.videoHeight(),a.emit("resize"))}),a}return A(n,t),n.prototype.settings=function(e){if(null==e)return this.__settings;this.__settings=k(this.__settings,e);for(var t in this.__settings){if(this[t]){if("autoplay"===t&&this.__settings[t]){this.play();continue}this[t](this.__settings[t])}"controls"===t&&"native"===this.__settings[t]&&this.nativeControls(!0)}return this.__settings},n.prototype.contextMenu=function(e){"boolean"==typeof e&&(e?this.media.removeEventListener("contextmenu",ee):this.media.addEventListener("contextmenu",ee))},n.prototype.ajax=function(e){return K(e)},n.prototype.videoWidth=function(e){return this.media.videoWidth?(this.media.width=this.media.videoWidth,this.media.videoWidth):(isNaN(e)||(e=parseFloat(e),this.media.width=e),this.media.width)},n.prototype.videoHeight=function(e){return this.media.videoHeight?(this.media.height=this.media.videoHeight,this.media.videoHeight):(isNaN(e)||(e=parseFloat(e),this.media.height=e),this.media.height)},n.prototype.scale=function(){return this.videoWidth()/this.videoHeight()},n.prototype.bounds=function(e){var t=U(this.media);return null!=t[e]?t[e]:t},n.prototype.width=function(){return this.bounds("width")},n.prototype.height=function(){return this.bounds("height")},n.prototype.offsetX=function(){return this.bounds("offsetX")},n.prototype.offsetY=function(){return this.bounds("offsetY")},n.prototype.wrapperHeight=function(){return this.media.offsetHeight},n.prototype.wrapperWidth=function(){return this.media.offsetWidth},n.prototype.wrapperScale=function(){return this.media.offsetWidth/this.media.offsetHeight},n.prototype.addClass=function(e,t){return null!=t?void _.addClass(e,t):void _.addClass(this.wrapper,e)},n.prototype.removeClass=function(e,t){return null!=t?void _.removeClass(e,t):void("kmlPlayer"!==e&&_.removeClass(this.wrapper,e))},n.prototype.toggleClass=function(e,t){return null!=t?void _.toggleClass(e,t):void("kmlPlayer"!==e&&_.toggleClass(this.wrapper,e))},n}(Q),ie=function(e){function t(i,r,o,s){d(this,t);var a=p(this,e.call(this,i,r,o,s)),l=document.createElement("video");a.body.appendChild(l),a.player=new ne({video:l}),a.player.container;var u=!1;return a.on("beforeHide",function(){u=a.player.paused(),a.player.pause()}),a.on("show",function(){u||a.player.play()}),a.on("ended",function(){n(r.onEnded)&&r.onEnded()}),r.sizeRatio=r.sizeRatio||80,a.scaleSize=function(e){r.sizeRatio=e,this.emit("resize")},a.player.on("ended",function(){a.emit("ended")}),a.on("resize",function(){var e=0,t=0,n=s.width(),i=s.height(),o=a.player.scale(),l=n,u=i,f=n,c=i,h=10;n>o*i?(l=o*i,u=i,f=l,h=i/10/u*100,l=r.sizeRatio*(l/n*100)/100,u=r.sizeRatio):i>n/o?(u=n/o,l=n,c=u,h=i/10/u*100,u=r.sizeRatio*(u/i*100)/100,l=r.sizeRatio):(l=r.sizeRatio,u=r.sizeRatio),t=(100-l)/2,e=(100-u)/2,a._title.parentNode.style.height=h+"%";var d=a.config({x:t/n*f+"%",y:5+e/i*c+"%",width:l+"%",height:u+"%"});h<=d.y?a._title.parentNode.style.transform="translateY(-100%)":a._title.parentNode.style.transform="translateY(0)",a.autoLineHeight()}),s.on("loadedmetadata",function(){a.emit("resize")}),a.player.on("loadedmetadata",function(){a.emit("resize")}),a.player.load(r.url),a}return A(t,e),t}(T),re={backgroundColor:"",onHide:null,onShow:null,externalControls:!0,visible:!1,pause:!0},oe=function(){function e(t){var n=this;d(this,e),this.wrapper=_.createElement("div",{class:"kmlContainers"}),this._els=[];var i=new H({},t);i.applyTo(this.wrapper),this.enabled=function(e){return null!=e&&(0==e&&(e=!1,this.wrapper.style.display="none"),e&&(this.wrapper.style.display="block"),i.enabled(e)),i.enabled()},this.checkVisibleElements=function(){var e=0;for(var t in this._els)this._els[t].visible()&&(e+=1);this.enabled(e)},t.wrapper.appendChild(this.wrapper);var r=[];this.hide=function(e){for(var t in this._els){var n=this._els[t];this._els[t]!==e&&n.visible()&&(n.hide(),r.push(n),n.visible(!1))}},this.show=function(){for(var e in r)r[e].show();r=[]},this.add=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2],r="Container";"container"!=i&&(r="Popup");var o=k(re,e),s=_.createElement("div");t.addClass(s,"kml"+r+" hidden");var a=_.createElement("div");n?n.nodeType||(n=a):n=a,_.addClass(n,"body"),s.appendChild(n);var l=null;switch(i){case"video":l=new ie(s,o,this,t);break;case"popup":l=new T(s,o,this,t);break;default:l=new P(s,o,this,t)}return this._els.push(l),this.wrapper.appendChild(s),l},this.remove=function(e){for(var t=0,i=n._els.length;t<i;t+=1){var r=n._els[t];if(r.body===e){n._els.splice(t,1),0==n._els.length&&n.enabled(!1);break}}}}return e.prototype.els=function(e){return this._els[e]||this._els},e}(),se=function(e){function t(n,i,r){d(this,t);var o=p(this,e.call(this,n,i));o._bounds={},o.containers=new oe(o),o.container=function(e,t){return this.containers.add(e,t,"container")},o.videoContainer=function(e){return this.containers.add(e,null,"video")},o.popupContainer=function(e){return this.containers.add(e,null,"popup")},"boolean"==typeof o.__settings.font&&o.__settings.font&&(o.__settings.font=defaults.font),o.autoFont=new S(o.wrapper,o.__settings.font,o),o.__settings.font&&o.autoFont.enabled(!0);for(var s in i)o.on(s,i[s],o);"function"==typeof r&&r.bind(o),o.on("loadedmetadata",function(){o._app||(r.bind(o)(),o._app=!0)});var a={w:o.width(),x:o.offsetX(),y:o.offsetY(),h:o.height()},l=function e(){o._bounds=U(o.media);var t=o.width(),n=o.width(),i=o.offsetX(),r=o.offsetY();a.w==t&&a.h==n&&a.x==i&&a.y==r||(a.w=t,a.h=n,a.x=i,a.y=r,o.emit("resize")),window.requestAnimationFrame(e)};return l(),o}return A(t,e),t.prototype.bounds=function(e){return null!=this._bounds[e]?this._bounds[e]:this._bounds},t}(ne);return E.isTouch&&(window.onerror=function(e,t,n,i){alert(n+":"+i+"-"+e)}),se}();