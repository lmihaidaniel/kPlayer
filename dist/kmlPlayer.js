/*! kmlplayer.js - v0.3.1 */
var kmlPlayer=function(){"use strict";function e(){try{var e=window.self!==window.top;if(e)for(var t=parent.document.getElementsByTagName("IFRAME"),n=0;n<t.length;n++){var i=t[n];i.contentWindow===window&&(e=i,i.setAttribute("allowfullscreen","true"),i.setAttribute("mozallowfullscreen","true"),i.setAttribute("webkitallowfullscreen","true"),i.setAttribute("frameborder","0"))}return e}catch(o){return!0}}function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e){if(void 0===e||null===e)return!1;var t=!1;return e.indexOf&&e.indexOf("%")>-1&&(t=parseFloat(e)),t}function i(e){return"function"==typeof e||!1}function o(e,t,n){var i=!1,o=!1;return"px"!=e.units&&(e.units="em"),e.min!==!1&&e.ratio!==!1&&(i=e.ratio*t/1e3,i<e.min&&(i=e.min),"px"==e.units&&(i=Math.ceil(i)),!isNaN(e.lineHeight)&&e.lineHeight&&(o=i*e.lineHeight,o<1&&(o=1),o=+o.toFixed(3)+e.units),i=+i.toFixed(3)+e.units),n&&(i&&(n.style.fontSize=i),o&&(n.style.lineHeight=o)),{fontSize:i,lineHeight:o}}function r(e){try{throw new Error(e)}catch(t){return}}function s(){}function a(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function l(){this._events=new s,this._eventsCount=0}function u(){var e=0,t=0;this.save=function(){e=window.pageXOffset||0,t=window.pageYOffset||0},this.restore=function(){window.scrollTo(e,t)}}function d(e){for(var t=C.selectAll("source",e),n=0;n<t.length;n++)C.removeElement(t[n]);e.setAttribute("src","data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAGm1kYXQAAAGzABAHAAABthBgUYI9t+8AAAMNbW9vdgAAAGxtdmhkAAAAAMXMvvrFzL76AAAD6AAAACoAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE/////+/wAAAiF0cmFrAAAAXHRraGQAAAAPxcy++sXMvvoAAAABAAAAAAAAACoAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAgAAAAIAAAAAAG9bWRpYQAAACBtZGhkAAAAAMXMvvrFzL76AAAAGAAAAAEVxwAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAABaG1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAShzdGJsAAAAxHN0c2QAAAAAAAAAAQAAALRtcDR2AAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAgACABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAXmVzZHMAAAAAA4CAgE0AAQAEgICAPyARAAAAAAMNQAAAAAAFgICALQAAAbABAAABtYkTAAABAAAAASAAxI2IAMUARAEUQwAAAbJMYXZjNTMuMzUuMAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAASAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYHVkdGEAAABYbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAraWxzdAAAACOpdG9vAAAAG2RhdGEAAAABAAAAAExhdmY1My4yMS4x"),e.load()}function A(e,t){switch(t){case"video/webm":return!(!e.canPlayType||!e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!e.canPlayType||!e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!e.canPlayType||!e.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}}function h(e){var t=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=Z();i&&!function(){var o=!1,r=!1,s=!1,a=function(){r=!0},l={visible:function(){},hidden:function(){}},u=function(){l={visible:function(){},hidden:function(){}},o=!1,r=!1,U.removeEventListener(j,d,!1),e.removeEventListener("playing",a)},d=function(){o&&(U[V]?(r&&!e.paused&&(e.pause(),s=!0),l.hidden()):(s&&e.paused&&(e.play(),s=!1),l.visible()))},A=function(t){i&&(U.removeEventListener(j,d,!1),e.removeEventListener("playing",a),l.visible=t.onVisible||l.visible,l.hidden=t.onHidden||l.hidden,o=!0,U.addEventListener(j,d,!1),e.addEventListener("playing",a))};l.visible=n.onVisible||l.visible,l.hidden=n.onHidden||l.hidden,o=!0,U.addEventListener(j,d,!1),e.addEventListener("playing",a),t.init=A,t.destroy=u,t.on=function(e,t){e in l&&(l[e]=t)},t.enabled=function(e){return"boolean"==typeof e&&(o=e),o}}()}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+o)},o);return e=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},p=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},m=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(){var e=function t(e,n){if(n){var i=Array.isArray(n),o=i&&[]||{};return i?(e=e||[],o=o.concat(e),n.forEach(function(n,i){"undefined"==typeof o[i]?o[i]=n:"object"===("undefined"==typeof n?"undefined":c(n))?o[i]=t(e[i],n):e.indexOf(n)===-1&&o.push(n)})):(e&&"object"===("undefined"==typeof e?"undefined":c(e))&&Object.keys(e).forEach(function(t){o[t]=e[t]}),Object.keys(n).forEach(function(i){"object"===c(n[i])&&n[i]&&e[i]?o[i]=t(e[i],n[i]):o[i]=n[i]})),o}return e||[]};return e}(),y=function(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")},g=void 0,w=void 0,b=void 0,x=void 0;"classList"in document.documentElement?(g=function(e,t){return e.classList.contains(t)},w=function(e,t){if(null!=t){t=t.split(" ");for(var n in t)e.classList.add(t[n])}},b=function(e,t){e.classList.remove(t)}):(g=function(e,t){return y(t).test(e.className)},w=function(e,t){g(e,t)||(e.className=e.className+" "+t)},b=function(e,t){e.className=e.className.replace(y(t)," ")}),x=function(e,t){var n=g(e,t)?b:w;n(e,t)};var _=function(e){var t="Webkit Moz ms O".split(" "),n=document.documentElement.style;if(void 0!==n[e])return e;e=e.charAt(0).toUpperCase()+e.substr(1);for(var i=0;i<t.length;i++)if(void 0!==n[t[i]+e])return t[i]+e},C={stylePrefix:{transform:_("transform"),perspective:_("perspective"),backfaceVisibility:_("backfaceVisibility")},triggerWebkitHardwareAcceleration:function(e){this.stylePrefix.backfaceVisibility&&this.stylePrefix.perspective&&(e.style[this.stylePrefix.perspective]="1000px",e.style[this.stylePrefix.backfaceVisibility]="hidden")},transform:function(e,t){e.style[this.stylePrefix.transform]=t},selectAll:function(e,t){return(t||document).querySelectorAll(e)},select:function(e,t){return(t||document).querySelector(e)},hasClass:g,addClass:w,removeClass:b,toggleClass:x,autoLineHeight:function(e){var t=e.offsetHeight+"px";return e.style.lineHeight=t,t},createElement:function(e,t){var n=document.createElement(e);for(var i in t)n.setAttribute(i,t[i]);return n},emptyElement:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},replaceElement:function(e,t){e.parentNode.replaceChild(t,e)},removeElement:function(e){e.parentNode.removeChild(e)},insertAfter:function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},insertBefore:function(e,t){t.parentNode.insertBefore(e,t)},getTextContent:function(e){return e.textContent||e.innerText},wrap:function(e,t){e.length||(e=[e]);for(var n=e.length-1;n>=0;n--){var i=n>0?t.cloneNode(!0):t,o=e[n],r=o.parentNode,s=o.nextSibling;return i.appendChild(o),s?r.insertBefore(i,s):r.appendChild(i),i}}},E=function(){var e,t,n,i=(navigator.appVersion,navigator.userAgent),o=navigator.appName,r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10);if("Netscape"==o&&navigator.appVersion.indexOf("Trident")>-1){o="IE";var a=i.indexOf("Edge/");r=i.substring(a+5,i.indexOf(".",a))}else navigator.appVersion.indexOf("Windows NT")!==-1&&navigator.appVersion.indexOf("rv:11")!==-1?(o="IE",r="11;"):(t=i.indexOf("MSIE"))!==-1?(o="IE",r=i.substring(t+5)):(t=i.indexOf("Chrome"))!==-1?(o="Chrome",r=i.substring(t+7)):(t=i.indexOf("Safari"))!==-1?(o="Safari",r=i.substring(t+7),(t=i.indexOf("Version"))!==-1&&(r=i.substring(t+8))):(t=i.indexOf("Firefox"))!==-1?(o="Firefox",r=i.substring(t+8)):(e=i.lastIndexOf(" ")+1)<(t=i.lastIndexOf("/"))&&(o=i.substring(e,t),r=i.substring(t+1),o.toLowerCase()==o.toUpperCase()&&(o=navigator.appName));return(n=r.indexOf(";"))!==-1&&(r=r.substring(0,n)),(n=r.indexOf(" "))!==-1&&(r=r.substring(0,n)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(navigator.appVersion),s=parseInt(navigator.appVersion,10)),[o,s]}(),H={browser:E,isIE:function(){return"IE"===E[0]&&E[1]}(),isFirefox:function(){return"Firefox"===E[0]&&E[1]}(),isChrome:function(){return"Chrome"===E[0]&&E[1]}(),isSafari:function(){return"Safari"===E[0]&&E[1]}(),isTouch:"ontouchstart"in document.documentElement,isIos:/(iPad|iPhone|iPod)/g.test(navigator.platform)},F=function(e,t,n){var i=!1,r=function(){o(t,n.width(),e)};this.update=function(i){if(void 0!==i)return t||(t={ratio:1,min:1,lineHeight:!1}),t=v(t,i),o(t,n.width(),e)},this.enabled=function(e){return"boolean"==typeof e&&t&&(i=e),i},n.on&&n.on("resize",r)},S={x:0,y:0,width:"100%",height:"100%",fontSize:null,lineHeight:null,offsetX:0,offsetY:0,originPoint:"topLeft",visible:!1,transform:{x:null,y:null},translate:!0},k=function(e,t){var i=function(){return{offsetX:t.offsetX(),offsetY:t.offsetY(),width:t.width(),height:t.height(),scale:t.width()/t.videoWidth(),scaleY:t.width()/t.videoHeight()}},o={x:0,y:0,width:"100%",height:"100%",fontSize:null,lineHeight:null},r=0,s=0,a=0,l=0,u=null,d=v(S,e),A=!1,h=function(){if(A&&u&&u.nodeType){if(null!==o.width&&(u.style.width=o.width+"px"),null!==o.height&&(u.style.height=o.height+"px"),C.stylePrefix.transform&&d.translate){var e="";null!=o.x&&null!=o.y?(e="translate("+o.x+"px,"+o.y+"px)",u.style.left="auto",u.style.right="auto",u.style.bottom="auto",u.style.top="auto"):(null!=o.x&&(u.style.left="auto",u.style.right="auto",e="translateX("+o.x+"px)"),null!=o.y&&(u.style.bottom="auto",u.style.top="auto",e="translateY("+o.y+"px)")),C.transform(u,e)}else null!=o.x&&null!=o.y?(u.style.left=o.x+"px",u.style.top=o.y+"px"):(null!=o.x&&(u.style.left=o.x+"px"),null!=o.y&&(u.style.top=o.y+"px"));d.fontSize!==o.fontSize&&(u.style.fontSize=o.fontSize=d.fontSize),d.lineHeight!==o.lineHeight&&(u.style.lineHeight=o.lineHeight=d.lineHeight)}},c=function(){var e=t.width(),u=t.height(),A=t.offsetX(),c=t.offsetY();if(r!=e||s!=u||A!=a||c!=l){r=e,s=u,a=A,l=c;var f=i(),p=n(d.width);p?o.width=f.width*p/100:null!=d.width&&(o.width=f.width*f.scale),o.width=Math.ceil(o.width);var m=n(d.height);if(m?o.height=f.height*m/100:null!=d.height&&(o.height=f.height*f.scale),o.height=Math.ceil(o.height),null!=d.x){var v=n(d.x);v?o.x=f.offsetX+f.width*v/100:o.x=f.offsetX+d.x*f.scale,o.x=Math.floor(o.x);var y=n(d.transform.x);y&&(o.x+=y*o.width/100),d.offsetX&&(o.x+=d.offsetX)}if(null!=d.y){var g=n(d.y);g?o.y=f.offsetY+f.height*g/100:o.y=f.offsetY+d.y*f.scale,o.y=Math.floor(o.y);var w=n(d.transform.y);w&&(o.y+=w*o.width/100),d.offsetY&&(o.y+=d.offsetY)}h()}};this.applyTo=function(e){return e&&e.nodeType&&(u=e,c()),u};var f=function(){A&&c()};this.data=function(){return o},this.settings=function(e){return d=v(d,e),c(),d},this.enabled=function(e){return"boolean"==typeof e&&(A=e,e&&f()),A},t.on&&t.on("resize",f)},W={x:0,y:0,width:0,height:0},L=function(e,t){var i=e.videoWidth()||e.width||0,o=e.videoHeight()||e.height||0,r=v(W,t),s=n(r.width);s||(s=r.width/i*100);var a=n(r.height);a||(a=r.height/o*100);var l=n(r.x);l||(l=r.x/i*100);var u=n(r.y);return u||(u=r.y/o*100),{x:l,y:u,width:s,height:a}},P=function le(e,t,n,o){var r=this;f(this,le);var s=!1,a=!1,l=!1,u=C.select(".body",e);this.body=u;var d=function(e){e&&(t=v(t,e));var n=new L(o,t);u.style.width=n.width+"%",u.style.height=n.height+"%",C.stylePrefix.transform?C.transform(u,"translate("+100/n.width*n.x+"%,"+100/n.height*n.y+"%)"):(u.style.top=n.x+"%",u.style.left=n.y+"%")};d(),o.on("videoResize",d),this.updateSizePos=function(e){d(e)};var A={};this.on=function(e,t){A[e]||(A[e]=[]),A[e].push(t)},this.triggerEvent=function(e){if(A[e])for(var t in A[e]){var n=A[e][t];i(n)&&n()}},this.hide=function(){a&&(C.addClass(e,"hidden"),t.pause&&(s||o.play(),a=!1,l&&t.externalControls&&o.externalControls.enabled(!0)),setTimeout(function(){e.style.display="none",i(t.onHide)&&t.onHide(),n.checkVisibleElements(),r.triggerEvent("hide")},250))},this.show=function(){a||(n.enabled(!0),e.style.display="block",setTimeout(function(){C.removeClass(e,"hidden"),i(t.onHide)&&t.onShow(),r.triggerEvent("show")},50),t.pause&&(o.paused()?s=!0:(s=!1,o.pause())),a=!0,t.externalControls&&(o.externalControls.enabled()?(l=!0,o.externalControls.enabled(!1)):l=!0))};var h=C.select(".overlay",e);this.backgroundColor=function(e){null!=e?h.style.backgroundColor=e:h.style.backgroundColor},this.backgroundColor();for(var c=C.selectAll(".triggerClose",e),p=0,m=c.length;p<m;p+=1)c[p].addEventListener("click",this.hide);t.visible&&this.show(),this.visible=function(e){return"boolean"==typeof e&&(a=e),a}},O=function(){var e=0,t=function(t,n){void 0!==n&&(e=n);var i={wrapperWidth:t.offsetWidth,wrapperHeight:t.offsetHeight,scale:e||t.width/t.height,width:0,height:0,offsetX:0,offsetY:0};return i.wrapperScale=i.wrapperWidth/i.wrapperHeight,i.wrapperScale>i.scale?(i.height=i.wrapperHeight,i.width=i.scale*i.height,i.offsetX=(i.wrapperWidth-i.width)/2):(i.width=i.wrapperWidth,i.height=i.width/i.scale,i.offsetY=(i.wrapperHeight-i.height)/2),i};return t}(),N=function(e){function t(n,i,o,r){f(this,t);var s=m(this,e.call(this,n,i,o,r)),a=document.createElement("h1");return C.addClass(a,"header"),s._title=document.createElement("span"),a.appendChild(s._title),s._closeBtn=document.createElement("a"),s._closeBtn.innerHTML="<img src='svg/ic_close.svg'/>",C.addClass(s._closeBtn,"closeBtn"),s._closeBtn.addEventListener("click",s.hide),a.appendChild(s._closeBtn),s.body.appendChild(a),r.on("resize",function(){C.autoLineHeight(a)}),s}return p(t,e),t.prototype.title=function(e){return null!=e?(this._title.innerHTML=e,C.autoLineHeight(this._title.parentNode),e):this._title.innerHTML},t}(P),z=Object.prototype.hasOwnProperty,T="~";Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(T=!1)),l.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)z.call(e,t)&&n.push(T?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},l.prototype.listeners=function(e,t){var n=T?T+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);o<r;o++)s[o]=i[o].fn;return s},l.prototype.emit=function(e,t,n,i,o,r){var s=T?T+e:e;if(!this._events[s])return!1;var a,l,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,r),!0}for(l=1,a=new Array(d-1);l<d;l++)a[l-1]=arguments[l];u.fn.apply(u.context,a)}else{var A,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!a)for(A=1,a=new Array(d-1);A<d;A++)a[A-1]=arguments[A];u[l].fn.apply(u[l].context,a)}}return!0},l.prototype.on=function(e,t,n){var i=new a(t,n||this),o=T?T+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},l.prototype.once=function(e,t,n){var i=new a(t,n||this,(!0)),o=T?T+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},l.prototype.removeListener=function(e,t,n,i){var o=T?T+e:e;if(!this._events[o])return this;if(!t)return 0===--this._eventsCount?this._events=new s:delete this._events[o],this;var r=this._events[o];if(r.fn)r.fn!==t||i&&!r.once||n&&r.context!==n||(0===--this._eventsCount?this._events=new s:delete this._events[o]);else{for(var a=0,l=[],u=r.length;a<u;a++)(r[a].fn!==t||i&&!r[a].once||n&&r[a].context!==n)&&l.push(r[a]);l.length?this._events[o]=1===l.length?l[0]:l:0===--this._eventsCount?this._events=new s:delete this._events[o]}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=T?T+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new s:delete this._events[t])):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=T;var B=!1,M="webkit moz o ms khtml".split(" "),Y="";if("undefined"!=typeof document.cancelFullScreen)B=!0;else for(var X=0,R=M.length;X<R;X++){if(Y=M[X],"undefined"!=typeof document[Y+"CancelFullScreen"]){B=!0;break}if("undefined"!=typeof document.msExitFullscreen&&document.msFullscreenEnabled){Y="ms",B=!0;break}}var I=""===Y?"fullscreenchange":Y+"fullscreenchange";I=I.toLowerCase();var V,j,G=function(e){function t(n){f(this,t);var i=m(this,e.call(this));if(i.iframe=n,i.scrollPosition=new u,i._fullscreenElement=null,i.fullscreenElementStyle={},B){var o=function(){i.isFullScreen()||setTimeout(i.scrollPosition.restore,100)};document.addEventListener(I,o,!1)}return i}return p(t,e),t.prototype.defualtFullScreenElement=function(e){var t=e;return null==t&&(t=this.iframe?this.iframe:this.wrapper),t},t.prototype.onFullscreenChange=function(e){this.media.addEventListener(I,function(e){return e.preventDefault(),e.stopPropagation,!1},!0)},t.prototype.isFullWindow=function(){return!1},t.prototype.isFullScreen=function(e){if(B){var t=this.defualtFullScreenElement(e);switch(Y){case"":return document.fullscreenElement==t;case"moz":return document.mozFullScreenElement==t;default:return document[Y+"FullscreenElement"]==t}}return!1},t.prototype.requestFullWindow=function(e){if(!this.isFullWindow()&&!this.isFullScreen()){var t=this.defualtFullScreenElement(e);this.scrollPosition.save();var n=t.style;this.fullscreenElementStyle.position=n.position||"",this.fullscreenElementStyle.margin=n.margin||"",this.fullscreenElementStyle.top=n.top||"",this.fullscreenElementStyle.left=n.left||"",this.fullscreenElementStyle.width=n.width||"",this.fullscreenElementStyle.height=n.height||"",this.fullscreenElementStyle.zIndex=n.zIndex||"",this.fullscreenElementStyle.maxWidth=n.maxWidth||"",this.fullscreenElementStyle.maxHeight=n.maxHeight||"",t.style.position="absolute",t.style.top=t.style.left=0,t.style.margin=0,t.style.maxWidth=t.style.maxHeight=t.style.width=t.style.height="100%",t.style.zIndex=2147483647,this._fullscreenElement=t,this.isFullWindow=function(){return!0}}},t.prototype.requestFullScreen=function(e){var t=this.defualtFullScreenElement(e);return B?(this.scrollPosition.save(),""===Y?t.requestFullScreen():t[Y+("ms"==Y?"RequestFullscreen":"RequestFullScreen")]()):void this.requestFullWindow(t)},t.prototype.cancelFullWindow=function(){if(this.isFullWindow()&&!this.isFullScreen()){for(var e in this.fullscreenElementStyle)this._fullscreenElement.style[e]=this.fullscreenElementStyle[e];this._fullscreenElement=null,this.isFullWindow=function(){return!1},this.scrollPosition.restore()}},t.prototype.cancelFullScreen=function(){return B?""===Y?document.cancelFullScreen():document[Y+("ms"==Y?"ExitFullscreen":"CancelFullScreen")]():void this.cancelFullWindow()},t.prototype.toggleFullWindow=function(e){var t=!this.isFullWindow();t?this.requestFullWindow(e):this.cancelFullWindow()},t.prototype.toggleFullScreen=function(e){var t=!this.isFullScreen();t?this.requestFullScreen(e):this.cancelFullScreen()},t.prototype.fullscreenElement=function(){return B?""===Y?document.fullscreenElement:document[Y+"FullscreenElement"]:this._fullscreenElement},t}(l),q=["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","playing","pause","error","seeking","emptied","seeked","ratechange","suspend"],Q=function(e){function t(n,i){f(this,t);var o=m(this,e.call(this,i));return null==n?(r("You need to supply a HTMLVideoElement to instantiate the player"),m(o)):(o.media=n,q.forEach(function(e){n.addEventListener(e,function(){o.emit(e)})}),o.canPlay={mp4:A(n,"video/mp4"),webm:A(n,"video/webm"),ogg:A(n,"video/ogg")},o)}return p(t,e),t.prototype.autoplay=function(e){return"boolean"==typeof e&&(this.media.autoplay=e),this.media.autoplay},t.prototype.buffered=function(){return this.media.buffered},t.prototype.nativeControls=function(e){return"boolean"==typeof e&&(this.media.controls=e),this.media.controls},t.prototype.crossorigin=function(e){return"use-credentials"===e?(this.media.crossOrigin="use-credentials",e):e?(this.media.crossOrigin="anonymous","anonymous"):(e===!1&&(this.media.crossOrigin=null),this.media.crossOrigin)},t.prototype.loop=function(e){return"boolean"==typeof e&&(this.media.loop=e),this.media.loop},t.prototype.muted=function(e){return"boolean"==typeof e&&(this.media.muted=e),this.media.muted},t.prototype.mute=function(){this.muted(!0)},t.prototype.unmute=function(){this.muted(!1)},t.prototype.toggleMute=function(){return this.muted(!this.muted())},t.prototype.played=function(){return this.media.played},t.prototype.preload=function(e){return"metadata"===e||"meta"===e?(this.media.preload="metadata","metadata"):e?(this.media.preload="auto","auto"):e===!1?(this.media.preload="none","none"):this.media.preload},t.prototype.poster=function(e){return void 0!==e&&(this.media.poster=e),this.media.poster},t.prototype.src=function(e){if(void 0!==e)if(d(this.media),e instanceof Array){var t=0;for(e.length;t+=1;){if("video/mp4"===e[t].type&&this.canPlay.mp4)return this.media.src=e[t].src;if("video/webm"===e[t].type&&this.canPlay.webm)return this.media.src=e[t].src;if("video/ogg"===e[t].type&&this.canPlay.ogg)return this.media.src=e[t].src}}else e.src&&e.type?this.media.src=e.src:this.media.src=e;return this.media.currentSrc},t.prototype.play=function(){this.media.play()},t.prototype.pause=function(){this.media.pause()},t.prototype.paused=function(){return this.media.paused},t.prototype.playing=function(){return this.media.paused},t.prototype.togglePlay=function(){this.media.paused?this.play():this.pause()},t.prototype.currentTime=function(e){return null===e||isNaN(e)?this.media.currentTime:(e=parseFloat(e),e>this.media.duration&&(e=this.media.duration),e<0&&(e=0),this.media.currentTime=e,e)},t.prototype.seek=function(e){return this.currentTime(e)},t.prototype.load=function(e){void 0!==e&&this.src(e),this.media.load()},t.prototype.duration=function(){return this.media.duration},t.prototype.volume=function(e){return null===e||isNaN(e)?this.media.volume:(e=parseFloat(e),e>1&&(e=1),e<0&&(e=0),this.media.volume=e,e)},t}(G),U=document||{};"undefined"!=typeof U.hidden?(V="hidden",j="visibilitychange"):"undefined"!=typeof U.mozHidden?(V="mozHidden",j="mozvisibilitychange"):"undefined"!=typeof U.msHidden?(V="msHidden",j="msvisibilitychange"):"undefined"!=typeof U.webkitHidden&&(V="webkitHidden",j="webkitvisibilitychange");var Z=function(){return!("undefined"==typeof U[V])},D=document||{},J=function(e){var t=!0,n=!0,i=null,o=e,r=function(e){if(t){if(o.parentNode.focus(),32==e.keyCode&&(o.paused?o.play():o.pause()),n){if(37==e.keyCode)return void(o.currentTime=o.currentTime-5);if(39==e.keyCode)return void(o.currentTime=o.currentTime+5)}if(38==e.keyCode){var i=o.volume;return i+=.1,i>1&&(i=1),void(o.volume=i)}if(40==e.keyCode){var r=o.volume;return r-=.1,r<0&&(r=0),void(o.volume=r)}}},s=function(e){};this.enabled=function(e){return void 0===e?t:void(t=e)},this.seekEnabled=function(e){return void 0===e?n:void(n=e)},this.init=function(){t=!0,i=null,n=!0,D.body.addEventListener("keydown",r.bind(this),!1),D.body.addEventListener("keyup",s.bind(this),!1)},this.destroy=function(){t=!1,i=null,n=!0,D.body.removeEventListener("keydown",r),D.body.removeEventListener("keyup",s)},this.init()},$=function(){function e(e){var i=["get","post","put","delete"];return e=e||{},e.baseUrl=e.baseUrl||"",e.method&&e.url?n(e.method,e.baseUrl+e.url,t(e.data),e):i.reduce(function(i,o){return i[o]=function(i,r){return n(o,e.baseUrl+i,t(r),e)},i},{})}function t(e){return e||null}function n(e,t,n,o){var s=["then","catch","always"],l=s.reduce(function(e,t){return e[t]=function(n){return e[t]=n,e},e},{}),u=new XMLHttpRequest;return u.open(e,t,!0),u.withCredentials=o.hasOwnProperty("withCredentials"),i(u,o.headers),u.addEventListener("readystatechange",r(l,u),!1),u.send(a(n)),l.abort=function(){return u.abort()},l}function i(e,t){t=t||{},o(t)||(t["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(t).forEach(function(n){t[n]&&e.setRequestHeader(n,t[n])})}function o(e){return Object.keys(e).some(function(e){return"content-type"===e.toLowerCase()})}function r(e,t){return function n(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",n,!1),e.always.apply(e,s(t)),t.status>=200&&t.status<300?e.then.apply(e,s(t)):e["catch"].apply(e,s(t)))}}function s(e){var t;try{t=JSON.parse(e.responseText)}catch(n){t=e.responseText}return[t,e]}function a(e){return l(e)?u(e):e}function l(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return Object.keys(e).reduce(function(t,n){var i=t?t+"&":"";return i+d(n)+"="+d(e[n])},"")}function d(e){return encodeURIComponent(e)}return e}(),K=function(e){return e.stopPropagation(),e.preventDefault(),!1},ee={videoWidth:920,videoHeight:520,autoplay:!1,loop:!1,controls:!1,font:{ratio:1,min:.5,units:"em"}},te=function(n){function i(o,r,s){f(this,i);var a=o.video,l=e(),u=m(this,n.call(this,a,l));if(null==a)return m(u);u._bounds={},u.device=H,u.__settings=v(ee,o),C.addClass(a,"kml"+t(a.nodeName.toLowerCase())),u.wrapper=C.wrap(u.media,C.createElement("div",{"class":"kmlPlayer"})),C.triggerWebkitHardwareAcceleration(u.wrapper),l&&C.addClass(u.wrapper,"inFrame");for(var d in u.__settings){if(u[d]){if("autoplay"===d&&u.__settings[d]&&!l){u.play();continue}u[d](u.__settings[d])}"controls"===d&&"native"===u.__settings[d]&&u.nativeControls(!0)}u.pageVisibility=new h(a),u.externalControls=new J(a),u.containers=new oe(u),u.videoContainer=function(e){return this.containers.add(e,null,"video")},"boolean"==typeof u.__settings.font&&u.__settings.font&&(u.__settings.font=ee.font),u.autoFont=new F(u.wrapper,u.__settings.font,u),u.__settings.font&&u.autoFont.enabled(!0);for(var A in r)u.on(A,r[A],u);u.on("loadedmetadata",function(){u.media.width==u.media.videoWidth&&u.media.height==u.media.videoHeight||(u.videoWidth(),u.videoHeight(),u.emit("videoResize"))});var c={w:u.width(),x:u.offsetX(),y:u.offsetY(),h:u.height()},p=function y(){u._bounds=O(u.media);var e=u.width(),t=u.width(),n=u.offsetX(),i=u.offsetY();c.w==e&&c.h==t&&c.x==n&&c.y==i||(c.w=e,c.h=t,c.x=n,c.y=i,u.emit("resize")),window.requestAnimationFrame(y)};return p(),"function"==typeof s&&s.bind(u)(),u}return p(i,n),i.prototype.contextMenu=function(e){"boolean"==typeof e&&(e?this.media.removeEventListener("contextmenu",K):this.media.addEventListener("contextmenu",K))},i.prototype.ajax=function(e){return $(e)},i.prototype.videoWidth=function(e){return this.media.videoWidth?(this.media.width=this.media.videoWidth,this.media.videoWidth):(isNaN(e)||(e=parseFloat(e),this.media.width=e),this.media.width)},i.prototype.videoHeight=function(e){return this.media.videoHeight?(this.media.height=this.media.videoHeight,this.media.videoHeight):(isNaN(e)||(e=parseFloat(e),this.media.height=e),this.media.height)},i.prototype.scale=function(){return this.videoWidth()/this.videoHeight()},i.prototype.bounds=function(e){return null!==this._bounds[e]?this._bounds[e]:this._bounds},i.prototype.width=function(){return this.bounds("width")},i.prototype.height=function(){return this.bounds("height")},i.prototype.offsetX=function(){return this.bounds("offsetX")},i.prototype.offsetY=function(){return this.bounds("offsetY")},i.prototype.wrapperHeight=function(){return this.media.offsetHeight},i.prototype.wrapperWidth=function(){return this.media.offsetWidth},i.prototype.wrapperScale=function(){return this.media.offsetWidth/this.media.offsetHeight},i.prototype.addClass=function(e,t){return null!=t?void C.addClass(e,t):void C.addClass(this.wrapper,e)},i.prototype.removeClass=function(e,t){return null!=t?void C.removeClass(e,t):void("kmlPlayer"!==e&&C.removeClass(this.wrapper,e))},i.prototype.toggleClass=function(e,t){return null!=t?void C.toggleClass(e,t):void("kmlPlayer"!==e&&C.toggleClass(this.wrapper,e))},i}(Q),ne=function(e){function t(n,i,o,r){f(this,t);var s=m(this,e.call(this,n,i,o,r)),a=document.createElement("video"),l=document.createElement("div");C.addClass(l,"videoHolder"),l.appendChild(a),s.player=new te({video:a}),s.body.appendChild(l);var u=!1;return s.on("hide",function(){u=s.player.paused(),s.player.pause()}),s.on("show",function(){u||s.player.play()}),s.on("ended",function(){}),s.player.on("ended",function(){s.triggerEvent("ended")}),s.player.on("loadedmetadata",function(){var e=0,t=0,n=0,i=s.player.scale();i=1,t=i>=1?80*(r.videoWidth()/i)/r.videoHeight():80*(r.videoWidth()*i)/r.videoHeight(),e=640/t,n=Math.round((100-t+e/2)/2),s.updateSizePos({x:"10%",y:n+"%",width:"80%",height:t+"%"}),s._title.parentNode.style.height=e+"%",s._title.parentNode.style.top=-e+"%"}),s.load(i.url),s}return p(t,e),t.prototype.load=function(e){this.player.load(e)},t}(N),ie={backgroundColor:"",onHide:null,onShow:null,externalControls:!0,visible:!1,pause:!0},oe=function(){function e(t){f(this,e),this.wrapper=C.createElement("div",{"class":"kmlContainers"}),this._els=[];var n=new k({},t);n.applyTo(this.wrapper),this.enabled=function(e){return null!=e&&(0==e&&(e=!1,this.wrapper.style.display="none"),e&&(this.wrapper.style.display="block"),n.enabled(e)),n.enabled()},this.checkVisibleElements=function(){var e=0;for(var t in this._els)this._els[t].visible()&&(e+=1);this.enabled(e)},t.wrapper.appendChild(this.wrapper);var i=[];this.hide=function(e){for(var t in this._els){var n=this._els[t];this._els[t]!==e&&n.visible()&&(n.hide(),i.push(n),n.visible(!1))}},this.show=function(){for(var e in i)i[e].show();i=[]},this.add=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2],o=v(ie,e),r=C.createElement("div");t.addClass(r,"kmlContainer hidden");var s=C.createElement("div");t.addClass(s,"overlay triggerClose");var a=C.createElement("div");n?n.nodeType||(n=a):n=a,C.addClass(n,"body"),r.appendChild(s),r.appendChild(n);var l=null;switch(i){case"video":l=new ne(r,o,this,t);break;default:l=new P(r,o,this,t)}return this._els.push(l),this.wrapper.appendChild(r),l}}return e.prototype.els=function(e){return this._els[e]||this._els},e}(),re=function(e){return e.stopPropagation(),e.preventDefault(),!1},se={videoWidth:920,videoHeight:520,autoplay:!1,loop:!1,controls:!1,font:{ratio:1,min:.5,units:"em"}},ae=function(n){function i(o,r,s){f(this,i);var a=o.video,l=e(),u=m(this,n.call(this,a,l));if(null==a)return m(u);u._bounds={},u.device=H,u.__settings=v(se,o),C.addClass(a,"kml"+t(a.nodeName.toLowerCase())),u.wrapper=C.wrap(u.media,C.createElement("div",{"class":"kmlPlayer"})),C.triggerWebkitHardwareAcceleration(u.wrapper),l&&C.addClass(u.wrapper,"inFrame");for(var d in u.__settings){if(u[d]){if("autoplay"===d&&u.__settings[d]&&!l){u.play();continue}u[d](u.__settings[d])}"controls"===d&&"native"===u.__settings[d]&&u.nativeControls(!0)}u.pageVisibility=new h(a),u.externalControls=new J(a),u.containers=new oe(u),
u.videoContainer=function(e){return this.containers.add(e,null,"video")},"boolean"==typeof u.__settings.font&&u.__settings.font&&(u.__settings.font=se.font),u.autoFont=new F(u.wrapper,u.__settings.font,u),u.__settings.font&&u.autoFont.enabled(!0);for(var A in r)u.on(A,r[A],u);"function"==typeof s&&s.bind(u),u.on("loadedmetadata",function(){u.media.width==u.media.videoWidth&&u.media.height==u.media.videoHeight||(u.videoWidth(),u.videoHeight(),u.emit("videoResize")),s.bind(u)()});var c={w:u.width(),x:u.offsetX(),y:u.offsetY(),h:u.height()},p=function y(){u._bounds=O(u.media);var e=u.width(),t=u.width(),n=u.offsetX(),i=u.offsetY();c.w==e&&c.h==t&&c.x==n&&c.y==i||(c.w=e,c.h=t,c.x=n,c.y=i,u.emit("resize")),window.requestAnimationFrame(y)};return p(),u}return p(i,n),i.prototype.contextMenu=function(e){"boolean"==typeof e&&(e?this.media.removeEventListener("contextmenu",re):this.media.addEventListener("contextmenu",re))},i.prototype.ajax=function(e){return $(e)},i.prototype.videoWidth=function(e){return this.media.videoWidth?(this.media.width=this.media.videoWidth,this.media.videoWidth):(isNaN(e)||(e=parseFloat(e),this.media.width=e),this.media.width)},i.prototype.videoHeight=function(e){return this.media.videoHeight?(this.media.height=this.media.videoHeight,this.media.videoHeight):(isNaN(e)||(e=parseFloat(e),this.media.height=e),this.media.height)},i.prototype.scale=function(){return this.videoWidth()/this.videoHeight()},i.prototype.bounds=function(e){return null!==this._bounds[e]?this._bounds[e]:this._bounds},i.prototype.width=function(){return this.bounds("width")},i.prototype.height=function(){return this.bounds("height")},i.prototype.offsetX=function(){return this.bounds("offsetX")},i.prototype.offsetY=function(){return this.bounds("offsetY")},i.prototype.wrapperHeight=function(){return this.media.offsetHeight},i.prototype.wrapperWidth=function(){return this.media.offsetWidth},i.prototype.wrapperScale=function(){return this.media.offsetWidth/this.media.offsetHeight},i.prototype.addClass=function(e,t){return null!=t?void C.addClass(e,t):void C.addClass(this.wrapper,e)},i.prototype.removeClass=function(e,t){return null!=t?void C.removeClass(e,t):void("kmlPlayer"!==e&&C.removeClass(this.wrapper,e))},i.prototype.toggleClass=function(e,t){return null!=t?void C.toggleClass(e,t):void("kmlPlayer"!==e&&C.toggleClass(this.wrapper,e))},i}(Q);return H.isTouch&&(window.onerror=function(e,t,n,i){alert(n+":"+i+"-"+e)}),ae}();