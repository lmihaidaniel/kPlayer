/*! kmlplayer.js - v0.3.1 */
var kmlPlayer=function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}function e(t){var t=t||this;return t.style||(t.style={}),function(e){var i=arguments.length<=1||void 0===arguments[1]?.6:arguments[1],n=null;return null!=e?(n=L(e),n.isValid()&&(n.setAlpha(i),t.style.backgroundColor=n.toString())):(n=L(t.style.backgroundColor),n.isValid()&&(n.setAlpha(i),t.style.backgroundColor=n.toString())),t.style.backgroundColor}}function i(t){return function(){var i=function(){var i=this,n=t.device.isMobile,r=t.__settings.autoplay,s=R.createElement("div",{class:"kmlBigPlay hidden"}),o=R.createElement("div",{class:"kmlBigPlayButton"});o.innerHTML=Y;var a=R.select(".triangle",o),l=R.select(".circle",o);s.addEventListener("click",function(){t.play()}),s.appendChild(o),t.wrapper.appendChild(s);var h=!0;this.show=function(){h=t.externalControls.seekEnabled(),t.externalControls.seekEnabled(!1),t.containers&&t.containers.hide(),t.pause(),s.style.display="block",R.removeClass(s,"hidden")},this.hide=function(){t.externalControls.seekEnabled(h),R.addClass(s,"hidden"),setTimeout(function(){s.style.display="none",t.containers&&t.containers.show()},200)},!r||n?this.show():s.style.display="none",t.on("play",function(){i.hide()}),this.backgroundColor=e(s),this.color=function(t){a.style.stroke=l.style.stroke=t}};return new i}()}function n(t){return t.charAt(0).toUpperCase()+t.slice(1)}function r(t){if(void 0===t||null===t)return!1;var e=!1;return t.indexOf&&t.indexOf("%")>-1&&(e=parseFloat(t)),e}function s(t){return"string"==typeof t}function o(t){return!isNaN(t)&&"number"==typeof t}function a(t){return"function"==typeof t||!1}function l(t){return t&&"object"===("undefined"==typeof t?"undefined":w(t))}function h(t){return Array.isArray(t)||t instanceof Array}function c(t){return null!=t&&t.nodeName}function p(t,e,i){var n=!1,r=!1;return"px"!=t.units&&(t.units="em"),t.min!==!1&&t.ratio!==!1&&(n=t.ratio*e/1e3,n<t.min&&(n=t.min),"px"==t.units&&(n=Math.ceil(n)),!isNaN(t.lineHeight)&&t.lineHeight&&(r=n*t.lineHeight,r<1&&(r=1),r=+r.toFixed(3)+t.units),n=+n.toFixed(3)+t.units),i&&(n&&(i.style.fontSize=n),r&&(i.style.lineHeight=r)),{fontSize:n,lineHeight:r}}function u(t){return function(){var e=function(){var e=this,i=document.createDocumentFragment(),n=R.createElement("button",{class:"play"}),s=R.createElement("div",{class:"kmlCuepoints"});R.createElement("div",{class:"progressline"});i.appendChild(n),i.appendChild(s),this.cuepointsWrapper=s;var o=null;null!=t.timelineContainer?(this.wrapper=t.timelineContainer(nt),this.wrapper.content(i),o=this.wrapper.wrapper):(this.wrapper=R.createElement("div",{class:"kmlTimeline",style:"position: absolute; left: 0; width: "+nt.width+"; height: "+nt.height+"; top: auto; bottom: 0;"}),t.wrapper.appendChild(this.wrapper),o=this.wrapper,this.wrapper.appendChild(i)),t.on("play",function(){R.removeClass(n,"play"),R.addClass(n,"pause")}),t.on("pause",function(){R.removeClass(n,"pause"),R.addClass(n,"play")}),t.on("resize",function(){e.resize()});var a=0,l=0;this.resize=function(){var i=r(nt.height)*t.height()/100;l!=i&&(l=i,i<nt.minHeight?(a=i=nt.minHeight,e.wrapper.settings?e.wrapper.settings({height:nt.minHeight+"px"}):o.style.height=nt.minHeight+"px",n.style.width=a+"px",s.style.left=a+"px",s.style.right="0px"):(e.wrapper.settings?e.wrapper.settings({height:nt.height}):o.style.height=nt.height,a=i/t.width()*100,n.style.width=a+"%",s.style.left=a+"%",s.style.right="0%"))}};return new e}()}function d(){try{var t=window.self!==window.top;if(t)for(var e=parent.document.getElementsByTagName("IFRAME"),i=0;i<e.length;i++){var n=e[i];n.contentWindow===window&&(t=n,n.setAttribute("allowfullscreen","true"),n.setAttribute("mozallowfullscreen","true"),n.setAttribute("webkitallowfullscreen","true"),n.setAttribute("frameborder","0"))}return t}catch(t){return!0}}function f(t){try{throw new Error(t)}catch(t){return}}function g(){var t=0,e=0;this.save=function(){t=window.pageXOffset||0,e=window.pageYOffset||0},this.restore=function(){window.scrollTo(t,e)}}function m(t){for(var e=R.selectAll("source",t),i=0;i<e.length;i++)R.removeElement(e[i]);t.setAttribute("src","data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAGm1kYXQAAAGzABAHAAABthBgUYI9t+8AAAMNbW9vdgAAAGxtdmhkAAAAAMXMvvrFzL76AAAD6AAAACoAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABhpb2RzAAAAABCAgIAHAE/////+/wAAAiF0cmFrAAAAXHRraGQAAAAPxcy++sXMvvoAAAABAAAAAAAAACoAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAgAAAAIAAAAAAG9bWRpYQAAACBtZGhkAAAAAMXMvvrFzL76AAAAGAAAAAEVxwAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAABaG1pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAShzdGJsAAAAxHN0c2QAAAAAAAAAAQAAALRtcDR2AAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAgACABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAXmVzZHMAAAAAA4CAgE0AAQAEgICAPyARAAAAAAMNQAAAAAAFgICALQAAAbABAAABtYkTAAABAAAAASAAxI2IAMUARAEUQwAAAbJMYXZjNTMuMzUuMAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAAABAAAAAQAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAASAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYHVkdGEAAABYbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAraWxzdAAAACOpdG9vAAAAG2RhdGEAAAABAAAAAExhdmY1My4yMS4x"),t.load()}function v(t,e){switch(e){case"video/webm":return!(!t.canPlayType||!t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,""));case"video/mp4":return!(!t.canPlayType||!t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,""));case"video/ogg":return!(!t.canPlayType||!t.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))}}function y(t){var e=arguments.length<=1||void 0===arguments[1]?{timeout:2e3}:arguments[1];return function(){var i=function(){var i=this,n=t.device.isMobile,r=null,s=!0,a=t.wrapper,l=e.timeout,h=function(){r&&(s&&t.emit("user-idle",!1),clearTimeout(r)),s=!1,r=setTimeout(function(){s=!0,t.emit("user-idle",!0)},e.timeout)};this.watch=function(){n?(a.addEventListener("touchstart",h),a.addEventListener("touchmove",h)):(a.addEventListener("mousemove",h),window.addEventListener("keyup",h))},this.unwatch=function(){n?(a.removeEventListener("touchstart",h),a.removeEventListener("touchmove",h)):(a.removeEventListener("mousemove",h),window.removeEventListener("keyup",h)),clearTimeout(r)},this.watch(),this.suspend=function(e){return null!=e&&(e=!!e,t.emit("user-idle",e),i.unwatch(),s=e),s},this.idle=function(i){return null!=i&&(i=!!i,t.emit("user-idle",i),s=i,r=setTimeout(function(){s=!0,t.emit("user-idle",!0)},e.timeout)),s},this.resume=function(){s=!0,i.watch()},this.timeout=function(t){return o(t)?e.timeout=t:e.timeout=l,e.timeout}};return new i}()}function A(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=wt();n&&!function(){var r=!1,s=!1,o=!1,a=function(){s=!0},l={visible:function(){},hidden:function(){}},h=function(){l={visible:function(){},hidden:function(){}},r=!1,s=!1,bt.removeEventListener(pt,c,!1),t.removeEventListener("playing",a)},c=function(){r&&(bt[ct]?(s&&!t.paused&&(t.pause(),o=!0),l.hidden()):(o&&t.paused&&(t.play(),o=!1),l.visible()))},p=function(e){n&&(bt.removeEventListener(pt,c,!1),t.removeEventListener("playing",a),l.visible=e.onVisible||l.visible,l.hidden=e.onHidden||l.hidden,r=!0,bt.addEventListener(pt,c,!1),t.addEventListener("playing",a))};l.visible=i.onVisible||l.visible,l.hidden=i.onHidden||l.hidden,r=!0,bt.addEventListener(pt,c,!1),t.addEventListener("playing",a),e.init=p,e.destroy=h,e.on=function(t,e){t in l&&(l[t]=e)},e.enabled=function(t){return"boolean"==typeof t&&(r=t),r}}()}function b(t){function e(t){var e=t.target,i=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,n=(parseFloat(e.getAttribute("data-y"))||0)+t.dy;e.style.msTransform=e.style.webkitTransform=e.style.transform="translate("+i+"px, "+n+"px)",e.setAttribute("data-x",i),e.setAttribute("data-y",n)}Ft(".drop-target").dropzone({accept:".draggable",overlap:.75,ondrop:function(e){var i=parseInt(e.relatedTarget.getAttribute("rel")),n=parseInt(e.target.getAttribute("rel"));t.currentAnswer[i]=n},ondragleave:function(e){var i=parseInt(e.relatedTarget.getAttribute("rel"));t.currentAnswer[i]=-1}}),Ft(".draggable").draggable({inertia:!0,restrict:{restriction:document.getElementById("dragWrapper"),endOnly:!0,elementRect:{top:0,left:0,bottom:0,right:0}},autoScroll:!0,onmove:e,onend:function(e){t.calculatePoints()}})}var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},_=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},x=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},E=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},S=113.8/6,C={player:{video:document.querySelector("video"),autoplay:!1,loop:!1,externalControls:!1,fullWindow:!0,videoWidth:1280,videoHeight:720,font:{ratio:1.2,min:.1}},delayAutoOpenQuizz:4,cuepoints_show_btn_quiz:[{start:2,end:29.4,chapter:0,quizNo:1},{start:31.4,end:44.7,chapter:1,quizNo:4},{start:46.7,end:65.5,chapter:2,quizNo:7},{start:67.5,end:76.2,chapter:3,quizNo:10},{start:78.2,end:102.4,chapter:4,quizNo:13},{start:104.4,end:113,chapter:5,quizNo:17}],controlSeekBarSpeed:[{start:0,end:29.4,title:["medical environment","Gastrointestinal anatomy and physiology"],label:"Gastrointestinal anatomy and physiology"},{start:29.4,end:44.7,title:["medical environment","Diarrhea"],label:"Diarrhea"},{start:44.7,end:65.5,title:["medical environment","Treatment"],label:"Treatment"},{start:65.5,end:76.2,title:["","probiotics review & Saccharimyces boulardii <br> CNCMI-745 identity"],label:"probiotics review & Saccharimyces boulardii <br> CNCMI-745 identity"},{start:76.2,end:102.4,title:["","saccharomyces boulardii CNCM-745 <br> mode of action"],label:"saccharomyces boulardii <br>CNCM-745 mode of action"},{start:102.4,end:113.8,title:["","Clinical evidence"],label:"Clinical evidence"}],chapters:[{start:0,end:S,width:!0,content:!0,className:"kmlCuepoint chapter_1"},{start:S,end:2*S,width:!0,content:!0,className:"kmlCuepoint chapter_2"},{start:2*S,end:3*S,width:!0,content:!0,className:"kmlCuepoint chapter_3"},{start:3*S,end:4*S,width:!0,content:!0,className:"kmlCuepoint chapter_4"},{start:4*S,end:5*S,width:!0,content:!0,className:"kmlCuepoint chapter_5"},{start:5*S,end:6*S,width:!0,content:!0,className:"kmlCuepoint chapter_6"}],quizData:[[{title:["The intestinal microbiota","Please tick the correct answer(s):"],type:"select",all:!0,r:[0,1,2,3,4,5]},{title:["&nbsp;","Match each digestive process with its definition:"],type:"match",r:[1,5,4,2,0,3]},{title:["Gut Microbiota","Please tick the correct answer(s):"],type:"select",r:[1,2]}],[{title:["&nbsp;","Which of the following bacteria causes noninvasive diarrhea ?"],type:"select",r:[0]},{title:["&nbsp;","What does the presence of blood in the stool indicate ?"],type:"select",r:[0]},{title:["&nbsp;","What is the pathophysiology of viral diarrhea ?"],type:"select",r:[2]}],[{title:["&nbsp;","Antibiotics are effective in the treatment of viral diarrheas."],type:"select",r:[1]},{title:["","Which of the following probiotics has been recommended by European Society of Paediatric Gastroenterology, Hepatology, And Nutrition in the treatment of diarrhea ?"],type:"select",r:[2]},{title:["&nbsp;","What is the mode of action of Saccharomyces boulardii CNCM I-745 against viral diarrhea ?"],type:"select",r:[2]}],[{title:["","To which class of organisms/microorganisms does Saccharomyces boulardii CNCM I-745 belong ?"],type:"select",r:[2]},{title:["&nbsp;","Which of the following properties is NOT exhibited by a probiotic ?"],type:"select",r:[0]},{title:["&nbsp;","Surface area of bacteria is 10 times that of yeast"],type:"select",r:[1]}],[{title:["Antitoxinic effect","Please tick the correct answer(s):"],type:"select",r:[0,2,4]},{title:["","Modulation of intestinal microbiota. Saccharomyces boulardii CNCM I-745 in dysbiosis leads to faster reestablishment of the healthy microbiome"],type:"select",r:[0]},{title:["Trophic action","Please tick the correct answer(s):"],type:"select",r:[0,2]},{title:["Antimicrobial action","Please tick the correct answer(s):"],type:"select",r:[1,2,3]}],[{title:["Clinical evidence","Please tick the correct answer(s):"],type:"select",r:[0,1]},{title:["Which of the following reasons accounts for the unmet needs in the management of acute diarrhea? ","Please tick the correct answer(s):"],type:"select",r:[0]},{title:["The following are unmet medical need in the treatment of antibiotic-associated diarrhea.","Please tick the correct answer(s):"],type:"select",r:[0,1,3]},{title:["Clinical evidence. Szajewska and al Meta-analysis 2007 – updated 2009.","Please tick the correct answer(s):"],type:"select",all:!0,r:[0,1,2]},{title:["Clinical evidence. Dinleyici E. and al Meta-analysis 2012. Part 1.","Please tick the correct answer(s):"],type:"select",r:[0,1,4]},{title:["Clinical evidence. Dinleyici E. and al Meta-analysis 2012. Part 2.","Please tick the correct answer(s):"],type:"select",r:[2,3,5]},{title:["Clinical evidence. Moré & Swidsinski Meta- analysis updated in 2015.","Please tick the correct answer(s):"],type:"select",r:[0,2,3]},{title:["Clinical evidence. McFarland Meta-analysis:","Please tick the correct answer(s):"],type:"select",r:[0,1,3,4]},{title:["Clinical evidence. Swajewska Meta-analysis 2015:","Please tick the correct answer(s):"],type:"select",r:[0,1,3]}]]},z=!1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(z=!0);var k=function(){var t,e,i,n=(navigator.appVersion,navigator.userAgent),r=navigator.appName,s=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10);if("Netscape"==r&&navigator.appVersion.indexOf("Trident")>-1){r="IE";var a=n.indexOf("Edge/");s=n.substring(a+5,n.indexOf(".",a))}else navigator.appVersion.indexOf("Windows NT")!==-1&&navigator.appVersion.indexOf("rv:11")!==-1?(r="IE",s="11;"):(e=n.indexOf("MSIE"))!==-1?(r="IE",s=n.substring(e+5)):(e=n.indexOf("Chrome"))!==-1?(r="Chrome",s=n.substring(e+7)):(e=n.indexOf("Safari"))!==-1?(r="Safari",s=n.substring(e+7),(e=n.indexOf("Version"))!==-1&&(s=n.substring(e+8))):(e=n.indexOf("Firefox"))!==-1?(r="Firefox",s=n.substring(e+8)):(t=n.lastIndexOf(" ")+1)<(e=n.lastIndexOf("/"))&&(r=n.substring(t,e),s=n.substring(e+1),r.toLowerCase()==r.toUpperCase()&&(r=navigator.appName));return(i=s.indexOf(";"))!==-1&&(s=s.substring(0,i)),(i=s.indexOf(" "))!==-1&&(s=s.substring(0,i)),o=parseInt(""+s,10),isNaN(o)&&(s=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),[r,o]}(),T={browser:k,isIE:function(){return"IE"===k[0]&&k[1]}(),isFirefox:function(){return"Firefox"===k[0]&&k[1]}(),isChrome:function(){return"Chrome"===k[0]&&k[1]}(),isSafari:function(){return"Safari"===k[0]&&k[1]}(),isTouch:"ontouchstart"in document.documentElement,isIos:/(iPad|iPhone|iPod)/g.test(navigator.platform),isMobile:z},P=function(t){return new RegExp("(^|\\s+)"+t+"(\\s+|$)")},D=void 0,M=void 0,F=void 0,H=void 0;"classList"in document.documentElement?(D=function(t,e){return t.classList.contains(e)},M=function(t,e){if(null!=e){e=e.split(" ");for(var i in e)""!=e[i]&&t.classList.add(e[i])}},F=function(t,e){if(null!=e){e=e.split(" ");for(var i in e)""!=e[i]&&t.classList.remove(e[i])}}):(D=function(t,e){return P(e).test(t.className)},M=function(t,e){D(t,e)||(t.className=t.className+" "+e)},F=function(t,e){t.className=t.className.replace(P(e)," ")}),H=function(t,e){if(null!=e){var i=D(t,e)?F:M;i(t,e)}};var O=function(t){var e="Webkit Moz ms O".split(" "),i=document.documentElement.style;if(void 0!==i[t])return t;t=t.charAt(0).toUpperCase()+t.substr(1);for(var n=0;n<e.length;n++)if(void 0!==i[e[n]+t])return e[n]+t},N=function(t){var e=void 0;if(t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),!e)return{left:0,top:0};var i=document.documentElement,n=document.body,r=i.clientLeft||n.clientLeft||0,s=window.pageXOffset||n.scrollLeft,o=e.left+s-r,a=i.clientTop||n.clientTop||0,l=window.pageYOffset||n.scrollTop,h=e.top+l-a;return{left:Math.round(o),top:Math.round(h)}},R={stylePrefix:{transform:O("transform"),perspective:O("perspective"),backfaceVisibility:O("backfaceVisibility")},triggerWebkitHardwareAcceleration:function(t){this.stylePrefix.backfaceVisibility&&this.stylePrefix.perspective&&(t.style[this.stylePrefix.perspective]="1000px",t.style[this.stylePrefix.backfaceVisibility]="hidden")},transform:function(t,e){t.style[this.stylePrefix.transform]=e},selectAll:function(t,e){return(e||document).querySelectorAll(t)},select:function(t,e){return(e||document).querySelector(t)},hasClass:D,addClass:M,removeClass:F,toggleClass:H,autoLineHeight:function(t){var e=t.offsetHeight+"px";return t.style.lineHeight=e,e},isEl:function(t){return!!t&&"object"===("undefined"==typeof t?"undefined":w(t))&&1===t.nodeType},isTextNode:function(t){return!!t&&"object"===("undefined"==typeof t?"undefined":w(t))&&3===t.nodeType},setElAttributes:function(t,e){Object.getOwnPropertyNames(e).forEach(function(i){var n=e[i];null===n||"undefined"==typeof n||n===!1?t.removeAttribute(i):t.setAttribute(i,n===!0?"":n)})},getElAttributes:function(t){var e,i,n,r,s;if(e={},i=",autoplay,controls,loop,muted,default,",t&&t.attributes&&t.attributes.length>0){n=t.attributes;for(var o=n.length-1;o>=0;o--)r=n[o].name,s=n[o].value,"boolean"!=typeof t[r]&&i.indexOf(","+r+",")===-1||(s=null!==s),e[r]=s}return e},createElement:function(t,e){var i=document.createElement(t);for(var n in e)i.setAttribute(n,e[n]);return i},emptyElement:function(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t},replaceElement:function(t,e){t.parentNode.replaceChild(e,t)},addElement:function(t,e){t.appendChild(e)},removeElement:function(t){t.parentNode.removeChild(t)},insertElAfter:function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},insertElBefore:function(t,e){e.parentNode.insertBefore(t,e)},insertElFirst:function(t,e){e.firstChild?parent.insertBefore(t,e.firstChild):e.appendChild(t)},getTextContent:function(t){return t.textContent||t.innerText},findElPosition:N,getPointerPosition:function(t,e){var i={},n=N(t),r=t.offsetWidth,s=t.offsetHeight,o=n.top,a=n.left,l=e.pageY,h=e.pageX;return e.changedTouches&&(h=e.changedTouches[0].pageX,l=e.changedTouches[0].pageY),i.y=Math.max(0,Math.min(1,(o-l+s)/s)),i.x=Math.max(0,Math.min(1,(h-a)/r)),i},wrap:function(t,e){t.length||(t=[t]);for(var i=t.length-1;i>=0;i--){var n=i>0?e.cloneNode(!0):e,r=t[i],s=r.parentNode,o=r.nextSibling;return n.appendChild(r),o?s.insertBefore(n,o):s.appendChild(n),n}}},I=t(function(t){!function(e){function i(t,e){if(t=t?t:"",e=e||{},t instanceof i)return t;if(!(this instanceof i))return new i(t,e);var r=n(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=W(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=W(this._r)),this._g<1&&(this._g=W(this._g)),this._b<1&&(this._b=W(this._b)),this._ok=r.ok,this._tc_id=X++}function n(t){var e={r:0,g:0,b:0},i=1,n=null,s=null,a=null,h=!1,c=!1;return"string"==typeof t&&(t=I(t)),"object"==("undefined"==typeof t?"undefined":w(t))&&(R(t.r)&&R(t.g)&&R(t.b)?(e=r(t.r,t.g,t.b),h=!0,c="%"===String(t.r).substr(-1)?"prgb":"rgb"):R(t.h)&&R(t.s)&&R(t.v)?(n=H(t.s),s=H(t.v),e=l(t.h,n,s),h=!0,c="hsv"):R(t.h)&&R(t.s)&&R(t.l)&&(n=H(t.s),a=H(t.l),e=o(t.h,n,a),h=!0,c="hsl"),t.hasOwnProperty("a")&&(i=t.a)),i=z(i),{ok:h,format:t.format||c,r:B(255,j(e.r,0)),g:B(255,j(e.g,0)),b:B(255,j(e.b,0)),a:i}}function r(t,e,i){return{r:255*k(t,255),g:255*k(e,255),b:255*k(i,255)}}function s(t,e,i){t=k(t,255),e=k(e,255),i=k(i,255);var n,r,s=j(t,e,i),o=B(t,e,i),a=(s+o)/2;if(s==o)n=r=0;else{var l=s-o;switch(r=a>.5?l/(2-s-o):l/(s+o),s){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,l:a}}function o(t,e,i){function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}var r,s,o;if(t=k(t,360),e=k(e,100),i=k(i,100),0===e)r=s=o=i;else{var a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;r=n(l,a,t+1/3),s=n(l,a,t),o=n(l,a,t-1/3)}return{r:255*r,g:255*s,b:255*o}}function a(t,e,i){t=k(t,255),e=k(e,255),i=k(i,255);var n,r,s=j(t,e,i),o=B(t,e,i),a=s,l=s-o;if(r=0===s?0:l/s,s==o)n=0;else{switch(s){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:r,v:a}}function l(t,i,n){t=6*k(t,360),i=k(i,100),n=k(n,100);var r=e.floor(t),s=t-r,o=n*(1-i),a=n*(1-s*i),l=n*(1-(1-s)*i),h=r%6,c=[n,a,o,o,l,n][h],p=[l,n,n,a,o,o][h],u=[o,o,l,n,n,a][h];return{r:255*c,g:255*p,b:255*u}}function h(t,e,i,n){var r=[F(W(t).toString(16)),F(W(e).toString(16)),F(W(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function c(t,e,i,n,r){var s=[F(W(t).toString(16)),F(W(e).toString(16)),F(W(i).toString(16)),F(O(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function p(t,e,i,n){var r=[F(O(n)),F(W(t).toString(16)),F(W(e).toString(16)),F(W(i).toString(16))];return r.join("")}function u(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.s-=e/100,n.s=T(n.s),i(n)}function d(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.s+=e/100,n.s=T(n.s),i(n)}function f(t){return i(t).desaturate(100)}function g(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.l+=e/100,n.l=T(n.l),i(n)}function m(t,e){e=0===e?0:e||10;var n=i(t).toRgb();return n.r=j(0,B(255,n.r-W(255*-(e/100)))),n.g=j(0,B(255,n.g-W(255*-(e/100)))),n.b=j(0,B(255,n.b-W(255*-(e/100)))),i(n)}function v(t,e){e=0===e?0:e||10;var n=i(t).toHsl();return n.l-=e/100,n.l=T(n.l),i(n)}function y(t,e){var n=i(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,i(n)}function A(t){var e=i(t).toHsl();return e.h=(e.h+180)%360,i(e)}function b(t){var e=i(t).toHsl(),n=e.h;return[i(t),i({h:(n+120)%360,s:e.s,l:e.l}),i({h:(n+240)%360,s:e.s,l:e.l})]}function _(t){var e=i(t).toHsl(),n=e.h;return[i(t),i({h:(n+90)%360,s:e.s,l:e.l}),i({h:(n+180)%360,s:e.s,l:e.l}),i({h:(n+270)%360,s:e.s,l:e.l})]}function x(t){var e=i(t).toHsl(),n=e.h;return[i(t),i({h:(n+72)%360,s:e.s,l:e.l}),i({h:(n+216)%360,s:e.s,l:e.l})]}function E(t,e,n){e=e||6,n=n||30;var r=i(t).toHsl(),s=360/n,o=[i(t)];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,o.push(i(r));return o}function S(t,e){e=e||6;for(var n=i(t).toHsv(),r=n.h,s=n.s,o=n.v,a=[],l=1/e;e--;)a.push(i({h:r,s:s,v:o})),o=(o+l)%1;return a}function C(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function z(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function k(t,i){D(t)&&(t="100%");var n=M(t);return t=B(i,j(0,parseFloat(t))),n&&(t=parseInt(t*i,10)/100),e.abs(t-i)<1e-6?1:t%i/parseFloat(i)}function T(t){return B(1,j(0,t))}function P(t){return parseInt(t,16)}function D(t){return"string"==typeof t&&t.indexOf(".")!=-1&&1===parseFloat(t)}function M(t){return"string"==typeof t&&t.indexOf("%")!=-1}function F(t){return 1==t.length?"0"+t:""+t}function H(t){return t<=1&&(t=100*t+"%"),t}function O(t){return e.round(255*parseFloat(t)).toString(16)}function N(t){return P(t)/255}function R(t){return!!Q.CSS_UNIT.exec(t)}function I(t){t=t.replace(Y,"").replace(q,"").toLowerCase();var e=!1;if(G[t])t=G[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=Q.rgb.exec(t))?{r:i[1],g:i[2],b:i[3]}:(i=Q.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=Q.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=Q.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=Q.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=Q.hsva.exec(t))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=Q.hex8.exec(t))?{r:P(i[1]),g:P(i[2]),b:P(i[3]),a:N(i[4]),format:e?"name":"hex8"}:(i=Q.hex6.exec(t))?{r:P(i[1]),g:P(i[2]),b:P(i[3]),format:e?"name":"hex"}:(i=Q.hex4.exec(t))?{r:P(i[1]+""+i[1]),g:P(i[2]+""+i[2]),b:P(i[3]+""+i[3]),a:N(i[4]+""+i[4]),format:e?"name":"hex8"}:!!(i=Q.hex3.exec(t))&&{r:P(i[1]+""+i[1]),g:P(i[2]+""+i[2]),b:P(i[3]+""+i[3]),format:e?"name":"hex"}}function L(t){var e,i;return t=t||{level:"AA",size:"small"},e=(t.level||"AA").toUpperCase(),i=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA"),"small"!==i&&"large"!==i&&(i="small"),{level:e,size:i}}var Y=/^\s+/,q=/\s+$/,X=0,W=e.round,B=e.min,j=e.max,V=e.random;i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,i,n,r,s,o,a=this.toRgb();return t=a.r/255,i=a.g/255,n=a.b/255,r=t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4),s=i<=.03928?i/12.92:e.pow((i+.055)/1.055,2.4),o=n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4),.2126*r+.7152*s+.0722*o},setAlpha:function(t){return this._a=z(t),this._roundA=W(100*this._a)/100,this},toHsv:function(){var t=a(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=a(this._r,this._g,this._b),e=W(360*t.h),i=W(100*t.s),n=W(100*t.v);return 1==this._a?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=s(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=s(this._r,this._g,this._b),e=W(360*t.h),i=W(100*t.s),n=W(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+n+"%)":"hsla("+e+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return c(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:W(this._r),g:W(this._g),b:W(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+W(this._r)+", "+W(this._g)+", "+W(this._b)+")":"rgba("+W(this._r)+", "+W(this._g)+", "+W(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:W(100*k(this._r,255))+"%",g:W(100*k(this._g,255))+"%",b:W(100*k(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+W(100*k(this._r,255))+"%, "+W(100*k(this._g,255))+"%, "+W(100*k(this._b,255))+"%)":"rgba("+W(100*k(this._r,255))+"%, "+W(100*k(this._g,255))+"%, "+W(100*k(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(U[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+p(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var s=i(t);n="#"+p(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var i=!1,n=this._a<1&&this._a>=0,r=!e&&n&&("hex"===t||"hex6"===t||"hex3"===t||"hex4"===t||"hex8"===t||"name"===t);return r?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(i=this.toRgbString()),"prgb"===t&&(i=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(i=this.toHexString()),"hex3"===t&&(i=this.toHexString(!0)),"hex4"===t&&(i=this.toHex8String(!0)),"hex8"===t&&(i=this.toHex8String()),"name"===t&&(i=this.toName()),"hsl"===t&&(i=this.toHslString()),"hsv"===t&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return i(this.toString())},_applyModification:function(t,e){var i=t.apply(null,[this].concat([].slice.call(e)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(u,arguments)},saturate:function(){return this._applyModification(d,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(E,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(_,arguments)}},i.fromRatio=function(t,e){if("object"==("undefined"==typeof t?"undefined":w(t))){var n={};for(var r in t)t.hasOwnProperty(r)&&("a"===r?n[r]=t[r]:n[r]=H(t[r]));t=n}return i(t,e)},i.equals=function(t,e){return!(!t||!e)&&i(t).toRgbString()==i(e).toRgbString()},i.random=function(){return i.fromRatio({r:V(),g:V(),b:V()})},i.mix=function(t,e,n){n=0===n?0:n||50;var r=i(t).toRgb(),s=i(e).toRgb(),o=n/100,a={r:(s.r-r.r)*o+r.r,g:(s.g-r.g)*o+r.g,b:(s.b-r.b)*o+r.b,a:(s.a-r.a)*o+r.a};return i(a)},i.readability=function(t,n){var r=i(t),s=i(n);return(e.max(r.getLuminance(),s.getLuminance())+.05)/(e.min(r.getLuminance(),s.getLuminance())+.05)},i.isReadable=function(t,e,n){var r,s,o=i.readability(t,e);switch(s=!1,r=L(n),r.level+r.size){case"AAsmall":case"AAAlarge":s=o>=4.5;break;case"AAlarge":s=o>=3;break;case"AAAsmall":s=o>=7}return s},i.mostReadable=function(t,e,n){var r,s,o,a,l=null,h=0;n=n||{},s=n.includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<e.length;c++)r=i.readability(t,e[c]),r>h&&(h=r,l=i(e[c]));return i.isReadable(t,l,{level:o,size:a})||!s?l:(n.includeFallbackColors=!1,
i.mostReadable(t,["#fff","#000"],n))};var G=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},U=i.hexNames=C(G),Q=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",r="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{CSS_UNIT:new RegExp(i),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();"undefined"!=typeof t&&t.exports?t.exports=i:"function"==typeof define&&define.amd?define(function(){return i}):window.tinycolor=i}(Math)}),L=I&&"object"===("undefined"==typeof I?"undefined":w(I))&&"default"in I?I.default:I,Y='<svg x="0px" y="0px" width="98px" height="98px" viewBox="0 0 213.7 213.7" enable-background="new 0 0 213.7 213.7" xml:space="preserve"><polygon class="triangle" id="XMLID_18_" fill="none" stroke-width="7" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" points="73.5,62.5 148.5,105.8 73.5,149.1 "></polygon><circle class="circle" id="XMLID_17_" fill="none" stroke-width="7" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" cx="106.8" cy="106.8" r="103.3"></circle></svg>';!function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame&&!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||(window.requestAnimationFrame=function(e,i){var n=(new Date).getTime(),r=Math.max(0,16-(n-t)),s=window.setTimeout(function(){e(n+r)},r);return t=n+r,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var q=function(){var t=function t(e,i){if(i){var n=Array.isArray(i),r=n&&[]||{};return n?(e=e||[],r=r.concat(e),i.forEach(function(i,n){"undefined"==typeof r[n]?r[n]=i:"object"===("undefined"==typeof i?"undefined":w(i))?r[n]=t(e[n],i):e.indexOf(i)===-1&&r.push(i)})):(e&&"object"===("undefined"==typeof e?"undefined":w(e))&&Object.keys(e).forEach(function(t){r[t]=e[t]}),Object.keys(i).forEach(function(n){"object"===w(i[n])&&i[n]&&e[n]?r[n]=t(e[n],i[n]):r[n]=i[n]})),r}return e||[]};return t}(),X=function(t,e,i){var n=!1,r=0,s={},o=function(){if(n){var o=i.width();return r!=o&&(s=p(e,i.width(),t)),s}};this.update=function(t){if(void 0!==t)return e||(e={ratio:1,min:1,lineHeight:!1}),e=q(e,t),o()},this.enabled=function(t){return"boolean"==typeof t&&e&&(n=t),n},i.on&&i.on("resize",o)},W={x:0,y:0,width:"100%",height:"100%",fontSize:null,lineHeight:null,offsetX:0,offsetY:0,originPoint:"topLeft",visible:!1,transform:{x:null,y:null},translate:!0},B=function(t,e){var i=function(){return{offsetX:e.offsetX(),offsetY:e.offsetY(),width:e.width(),height:e.height(),scale:e.width()/e.videoWidth(),scaleY:e.width()/e.videoHeight()}},n={x:0,y:0,width:"100%",height:"100%",fontSize:null,lineHeight:null},s=0,o=0,a=0,l=0,h=null,c=q(W,t),p=!1,u=function(){if(p&&h&&h.nodeType){if(null!=n.width&&(h.style.width=n.width+"px"),null!=n.height&&(h.style.height=n.height+"px"),c.translate){var t="";null!=n.x&&null!=n.y?(t="translate("+n.x+"px,"+n.y+"px)",h.style.left="auto",h.style.right="auto",h.style.bottom="auto",h.style.top="auto"):(null!=n.x&&(h.style.left="auto",h.style.right="auto",t="translateX("+n.x+"px)"),null!=n.y&&(h.style.bottom="auto",h.style.top="auto",t="translateY("+n.y+"px)")),R.transform(h,t)}else null!=n.x&&null!=n.y?(h.style.left=n.x+"px",h.style.top=n.y+"px"):(null!=n.x&&(h.style.left=n.x+"px"),null!=n.y&&(h.style.top=n.y+"px"));c.fontSize!==n.fontSize&&(h.style.fontSize=n.fontSize=c.fontSize),c.lineHeight!==n.lineHeight&&(h.style.lineHeight=n.lineHeight=c.lineHeight)}},d=function(){var t=e.width(),h=e.height(),p=e.offsetX(),d=e.offsetY();if(s!=t||o!=h||p!=a||d!=l){s=t,o=h,a=p,l=d;var f=i(),g=r(c.width);g?n.width=f.width*g/100:null!=c.width&&(n.width=f.width*f.scale),n.width=Math.ceil(n.width);var m=r(c.height);if(m?n.height=f.height*m/100:null!=c.height&&(n.height=f.height*f.scale),n.height=Math.ceil(n.height),null!=c.x){var v=r(c.x);v?n.x=f.offsetX+f.width*v/100:n.x=f.offsetX+c.x*f.scale,n.x=Math.floor(n.x);var y=r(c.transform.x);y&&(n.x+=y*n.width/100),c.offsetX&&(n.x+=c.offsetX)}if(null!=c.y){var A=r(c.y);A?n.y=f.offsetY+f.height*A/100:n.y=f.offsetY+c.y*f.scale,n.y=Math.floor(n.y);var b=r(c.transform.y);b&&(n.y+=b*n.width/100),c.offsetY&&(n.y+=c.offsetY)}u()}};this.applyTo=function(t){return t&&t.nodeType&&(h=t,d()),h};var f=function(){p&&d()};this.data=function(){return n},this.settings=function(t){return c=q(c,t),d(),c},this.enabled=function(t){return"boolean"==typeof t&&(p=t,t&&f()),p},e.on&&e.on("resize",f)},j=t(function(t){function e(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function i(){}var n=Object.prototype.hasOwnProperty,r="function"!=typeof Object.create&&"~";i.prototype._events=void 0,i.prototype.eventNames=function(){var t,e=this._events,i=[];if(!e)return i;for(t in e)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},i.prototype.listeners=function(t,e){var i=r?r+t:t,n=this._events&&this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a},i.prototype.emit=function(t,e,i,n,s,o){var a=r?r+t:t;if(!this._events||!this._events[a])return!1;var l,h,c=this._events[a],p=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),p){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,n),!0;case 5:return c.fn.call(c.context,e,i,n,s),!0;case 6:return c.fn.call(c.context,e,i,n,s,o),!0}for(h=1,l=new Array(p-1);h<p;h++)l[h-1]=arguments[h];c.fn.apply(c.context,l)}else{var u,d=c.length;for(h=0;h<d;h++)switch(c[h].once&&this.removeListener(t,c[h].fn,void 0,!0),p){case 1:c[h].fn.call(c[h].context);break;case 2:c[h].fn.call(c[h].context,e);break;case 3:c[h].fn.call(c[h].context,e,i);break;default:if(!l)for(u=1,l=new Array(p-1);u<p;u++)l[u-1]=arguments[u];c[h].fn.apply(c[h].context,l)}}return!0},i.prototype.on=function(t,i,n){var s=new e(i,n||this),o=r?r+t:t;return this._events||(this._events=r?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):this._events[o]=s,this},i.prototype.once=function(t,i,n){var s=new e(i,n||this,(!0)),o=r?r+t:t;return this._events||(this._events=r?{}:Object.create(null)),this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):this._events[o]=s,this},i.prototype.removeListener=function(t,e,i,n){var s=r?r+t:t;if(!this._events||!this._events[s])return this;var o=this._events[s],a=[];if(e)if(o.fn)(o.fn!==e||n&&!o.once||i&&o.context!==i)&&a.push(o);else for(var l=0,h=o.length;l<h;l++)(o[l].fn!==e||n&&!o[l].once||i&&o[l].context!==i)&&a.push(o[l]);return a.length?this._events[s]=1===a.length?a[0]:a:delete this._events[s],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[r?r+t:t]:this._events=r?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=r,"undefined"!=typeof t&&(t.exports=i)}),V=j&&"object"===("undefined"==typeof j?"undefined":w(j))&&"default"in j?j.default:j,G={x:0,y:0,width:0,height:0},U=function(t,e){var i=t.videoWidth()||t.width||1,n=t.videoHeight()||t.height||1,s=q(G,e),o=r(s.width);o===!1&&(o=s.width/i*100);var a=r(s.height);a===!1&&(a=s.height/n*100);var l=r(s.x);l===!1&&(l=s.x/i*100);var h=r(s.y);return h===!1&&(h=s.y/n*100),{x:l,y:h,width:o,height:a}},Q={once:null,start:0,end:-1,on:{start:function(){},end:function(){},click:function(){},process:function(){}},className:"kmlCuepoint",classActive:null,classInactive:null,label:null,width:null,content:null},$=function(t){function e(i,n,r){_(this,e);var s=E(this,t.call(this));s.__settings=q(Q,n),s.__fired=!1,s.__onceStart=!1,s.__onceEnd=!1,s.el=!1,s.parentPlayer=i,s.parentWrapper=r;for(var o in s.__settings.on)a(s.__settings.on[o])&&s.on(o,s.__settings.on[o]);return s.addVisual(s.__settings.content),s.activate(),s}return x(e,t),e.prototype.processHandler=function(){var t=this.parentPlayer.currentTime();if(this.__settings.on.process(t),t>=this.__settings.start&&(this.__settings.end<0||t<this.__settings.end)){if(this.__fired)return;this.__onceStart||(this.emit("start"),this.el&&(R.hasClass(this.el,this.__settings.classActive)||(R.removeClass(this.el,this.__settings.classInactive),R.addClass(this.el,this.__settings.classActive))),this.__settings.once&&(this.__onceStart=!0)),this.__fired=!0}else{if(this.__onceEnd||this.el&&(R.hasClass(this.el,this.__settings.classInactive)||(R.removeClass(this.el,this.__settings.classActive),R.addClass(this.el,this.__settings.classInactive))),!this.__fired)return;this.__onceEnd||(this.emit("end"),this.__settings.once&&(this.__onceEnd=!0)),this.__fired=!1}},e.prototype.activate=function(){var t=this;this.__process||(this.__process=function(){t.processHandler()}),this.parentPlayer.on("timeupdate",this.__process),this.emit("activate")},e.prototype.suspend=function(){this.parentPlayer.off("timeupdate",this.__process),this.emit("suspend")},e.prototype.destroy=function(){this.el&&(this.el.style.display="none"),this.emit("destroy"),this.__fired=!1,this.el&&(suspend&&this.suspend(),this.el.style.display="none")},e.prototype.addVisual=function(t){var e=this;if(!this.el&&t){if(t instanceof HTMLElement)this.el=t;else{if(!t)return;this.el=document.createElement("div"),s(this.__settings.label)&&(this.label=document.createElement("span"),this.label.innerHTML=this.__settings.label,this.el.appendChild(this.label))}R.addClass(this.el,this.__settings.className),this.__settings.start>0&&(R.addClass(this.el,this.__settings.classInactive),this.el.style.left=Math.round(this.__settings.start/this.parentPlayer.duration()*100)+"%"),this.__settings.width&&this.__settings.end>1&&(this.el.style.right=Math.round(100-this.__settings.end/this.parentPlayer.duration()*100)+"%"),this.el.addEventListener("click",function(){e.emit("click")}),this.parentWrapper&&this.parentWrapper.appendChild(this.el)}},e.prototype.activateVisual=function(t){this.el&&(t&&this.activate(),this.el.style.display="block")},e.prototype.disableVisual=function(t){this.el&&(t&&this.suspend(),this.el.style.display="none")},e.prototype.addClass=function(t){this.el&&R.addClass(this.el,t)},e.prototype.removeClass=function(t){this.el&&R.removeClass(this.el,t)},e.prototype.toggleClass=function(t){this.el&&R.toggleClass(this.el,t)},e}(V),Z={backgroundColor:"",on:{hide:function(){},show:function(){},click:function(){}},cuepoints:[],externalControls:!0,visible:!0,pauseVideo:!1},K=function(t){function i(n,r,s,o){_(this,i);var a=E(this,t.call(this));return a.wrapper=n,a._visible=!1,a.parentPlayerPaused=!1,a._settings=q(Z,r),a._cache={},a.backgroundColor=e(n),a.parent=s,a.parentPlayer=o,a.init(),a}return x(i,t),i.prototype.settings=function(t){return t&&(this._settings=q(this._settings,t),this.resize()),this._settings},i.prototype.init=function(){var t=this;for(var e in this._settings.on)a(this._settings.on[e])&&this.on(e,this._settings.on[e]);var i=[];this.cuepoint=function(t){var e=new $(parentPlayer,t);return i.push(e),e},this.cuepoints=function(){return i};for(var e in this._settings.cuepoints)this.cuepoint(this._settings.cuepoints[e]);this.wrapper.addEventListener("click",function(){t.emit("click")}),this.parentPlayer.on("resize",function(){t.resize()}),this._settings.visible?this.show():this.wrapper.style.display="none",this.resize()},i.prototype.visible=function(t){return"boolean"==typeof t&&(this._visible=t),this._visible},i.prototype.hide=function(){var t=this;this.visible()&&(this.visible(!1),this.emit("beforeHide"),R.addClass(this.wrapper,"hidden"),this._settings.pauseVideo&&(this.parentPlayerPaused||this.parentPlayer.play()),setTimeout(function(){t.wrapper.style.display="none",t.parent.checkVisibleElements(),t.emit("hide")},250))},i.prototype.show=function(){var t=this;this.visible()||(this.visible(!0),this.emit("beforeShow"),this.parent.enabled(!0),this.wrapper.style.display="block",setTimeout(function(){R.removeClass(t.wrapper,"hidden"),t.emit("show")},50),this._settings.pauseVideo&&(this.parentPlayer.paused()?this.parentPlayerPaused=!0:(this.parentPlayerPaused=!1,this.parentPlayer.pause())))},i.prototype.resize=function(){if(this._cache.width!=this._settings.width||this._cache.height!=this._settings.height||this._cache.x!=this._settings.x||this._cache.y!=this._settings.y){var t=new U(this.parentPlayer,this._settings);this.wrapper.style.width=t.width+"%",this.wrapper.style.height=t.height+"%",this.wrapper.style.left=t.x+"%",this.wrapper.style.top=t.y+"%",this._cache.width=this._settings.width,this._cache.height=this._settings.height,this._cache.x=this._settings.x,this._cache.y=this._settings.y}this.emit("resize")},i.prototype.addClass=function(t){"kmlWidget"!=t&&R.addClass(this.wrapper,t)},i.prototype.removeClass=function(t){"kmlWidget"!=t&&R.removeClass(this.wrapper,t)},i.prototype.toggleClass=function(t){"kmlWidget"!=t&&R.toggleClass(this.wrapper,t)},i.prototype.content=function(t){null!=t&&(t.nodeName?this.wrapper.appendChild(t):this.wrapper.innerHTML=t)},i.prototype.setFontSize=function(t){this.wrapper.style.fontSize=t+"%"},i.prototype.destroy=function(){this.removeAllListeners(),this.parent.remove(this.wrapper),R.removeElement(this.wrapper)},i}(V),J={x:0,y:0,width:0,height:0,origin:"topLeft",start:0,end:-1,className:"kmlHotspot",on:{show:function(){},hide:function(){},mouseEnter:function(){},mouseLeave:function(){},mouseMove:function(){},click:function(){}},content:null,font:100,path:!1,visible:void 0},tt=function(t){function i(n,r){_(this,i);var s=E(this,t.call(this));s.__forceHide=!1,s.__pathStart=void 0,s.__pathEnd=void 0,s.__refreshStart=0,s.__refreshEnd=0,s.wrapper=R.createElement("div"),s.wrapper.backgroundColor=e(s.wrapper),r=q(r,U(n,r)),s.__settings=q(J,r),s.parentPlayer=n,s.x=s.__settings.x,s.y=s.__settings.y,s.width=s.__settings.width,s.height=s.__settings.height,s.origin=s.__settings.origin,s.start=s.__settings.start,s.end=s.__settings.end,s.path=s.__settings.path,s.visible=s.__settings.visible,h(s.path)?(s.path[0].start&&(s.__pathStart=s.path[0].start),s.path[s.path.length-1].end&&(s.__pathEnd=s.path[s.path.length-1].end)):s.path=!1;var o=function(){var t=s.__settings.on[l];a(t)&&s.on(l,function(e){t(e)})};for(var l in s.__settings.on)o();return s.init(),s}return x(i,t),i.prototype.init=function(){var t=this;this.addClass(this.__settings.className),this.wrapper.style.position="absolute",this.wrapper.style.top=(this.y||0)+"%",this.wrapper.style.left=(this.x||0)+"%",this.wrapper.style.width=(this.width||0)+"%",this.wrapper.style.height=(this.height||0)+"%",this.wrapper.addEventListener("click",function(e){t.emit("click",e)}),this.wrapper.addEventListener("mouseenter",function(e){t.emit("mouseEnter",e)}),this.wrapper.addEventListener("mouseleave",function(e){t.emit("mouseLeave",e)}),this.wrapper.addEventListener("mousemove",function(e){t.emit("mouseMove",e)}),this.start>0?(this.visible=!1,this.wrapper.style.display="none"):(this.visible=!0,this.wrapper.style.display="block")},i.prototype.addClass=function(t){R.addClass(this.wrapper,t)},i.prototype.removeClass=function(t){R.removeClass(this.wrapper,t)},i.prototype.toggleClass=function(t){R.toggleClass(this.wrapper,t)},i.prototype.content=function(t){if(null!=t&&(a(t)&&t(this.wrapper).bind(this),c(t)&&this.wrapper.appendChild(t),s(t)&&(this.wrapper.innerHTML=t),l(t)))for(var e in t)this.content(t[e]);return this.wrapper},i.prototype.font=function(){this.wrapper.fontSize=this.__settings.font+"%"},i.prototype.checkRefresh=function(t){null!=this.__pathStart&&null!=this.__pathEnd&&(t>=this.__pathStart&&t<=this.__pathEnd?(0!==this.__refreshStart&&(this.__refreshStart=0),0!==this.__refreshEnd&&(this.__refreshEnd=0)):(t<this.__pathStart&&1!==this.__refreshStart&&(this.resize(),this.__refreshStart=1),t>this.__pathEnd&&1!==this.__refreshEnd&&(this.resize(),this.__refreshEnd=1)))},i.prototype.resize=function(t,e){this.visible},i.prototype.destroy=function(){this.removeEventListeners(),R.removeElement(this.wrapper)},i.prototype.show=function(){this.__forceHide=!1,this.visible=!0,this.resize(),this.font(),this.wrapper.style.display="block",this.emit("show")},i.prototype._show=function(){this.visible||this.__forceHide||(this.visible=!0,this.resize(),this.font(),this.wrapper.style.display="block",this.emit("show"))},i.prototype.hide=function(){this.__forceHide=!0,this._hide()},i.prototype._hide=function(){this.visible&&(this.visible=!1,this.emit("hide"),this.wrapper.style.display="none")},i.prototype.originPoint=function(t){return void 0!=t&&(this.origin=t,this.resize()),this.origin},i}(V),et={backgroundColor:"",on:{show:function(){},beforeShow:function(){},beforeHide:function(){},hide:function(){}},width:"60%",height:"60%",header:!0,headerBg:"#23DB90",cuepoints:[],externalControls:!1,visible:!1,pauseVideo:!0,single:!1},it=function(t){function i(n,r,s,o){_(this,i);var l=E(this,t.call(this));l.wrapper=n;var h=R.createElement("div",{class:"body"}),c=R.createElement("div");if(R.addClass(c,"overlay triggerClose"),l.wrapper.appendChild(c),l.wrapper.appendChild(h),l.body=h,l.overlay=c,l._content=R.createElement("div",{class:"content"}),l.body.appendChild(l._content),l._settings=q(et,r),l._settings.header){var p=document.createElement("h1");R.addClass(p,"header"),l._title=document.createElement("span"),p.appendChild(l._title),l._closeBtn=document.createElement("a"),l._closeBtn.innerHTML="<img src='svg/ic_close.svg'/>",R.addClass(l._closeBtn,"closeBtn triggerClose"),p.appendChild(l._closeBtn),l.body.appendChild(p),l.header=p,l.header.backgroundColor=e(l.header)}else R.removeClass(c,"triggerClose");l.body.backgroundColor=e(l.body),l.overlay.backgroundColor=e(l.overlay),l._visible=!1,l.parentPlayerPaused=!1,l._settings.header&&(l.header.backgroundColor(l._settings.headerBg,1),l.title(l._settings.title)),l._cache={},l.backgroundColor=e(c),l.parent=s,l.parentPlayer=o,l.setSize=function(t){var e=this.settings({x:(100-t)/2+"%",y:(100-t)/2+"%",width:t+"%",height:t+"%"});this._settings.header&&(e.y<10?header.style.transform="translateY(0)":header.style.transform="translateY(-100%)")};var u=["resize","show"];u.map(function(t){l.on(t,function(){l.resize(),l.autoLineHeight()})});for(var d in l._settings.on)a(l._settings.on[d])&&l.on(d,l._settings.on[d]);var f=[];l.cuepoint=function(t){var e=new $(o,t);return f.push(e),e},l.cuepoints=function(){return f};for(var g=R.selectAll(".triggerClose",n),m=0,v=g.length;m<v;m+=1)g[m].addEventListener("click",function(){l.hide()});var y=o.externalControls.enabled();return l.on("beforeShow",function(){null!=l._settings.externalControls&&(y=o.externalControls.enabled(),o.externalControls.enabled(l._settings.externalControls))}),l.on("beforeHide",function(){l._settings.pauseVideo&&o.externalControls.enabled(y)}),l.init(),l}return x(i,t),i.prototype.settings=function(t){return t&&(this._settings=q(this._settings,t),this.resize()),this._settings},i.prototype.init=function(){var t=this;this.parentPlayer.on("resize",function(){t.emit("resize")}),this._settings.visible?this.show():this.wrapper.style.display="none",this.resize()},i.prototype.visible=function(t){return"boolean"==typeof t&&(this._visible=t),this._visible},i.prototype.hide=function(){var t=this;this._visible&&(this._visible=!1,this.emit("beforeHide"),R.addClass(this.wrapper,"hidden"),this._settings.pauseVideo&&(this.parentPlayerPaused||this.parentPlayer.play()),setTimeout(function(){t.wrapper.style.display="none",t.parent.checkVisibleElements(),t.emit("hide")},250))},i.prototype.show=function(){var t=this;this._visible||(this._visible=!0,this.emit("beforeShow"),this.parent.enabled(!0),this.wrapper.style.display="block",setTimeout(function(){R.removeClass(t.wrapper,"hidden"),t.emit("show")},50),this._settings.pauseVideo&&(this.parentPlayer.paused()?this.parentPlayerPaused=!0:(this.parentPlayerPaused=!1,this.parentPlayer.pause())))},i.prototype.resize=function(){if(this._cache.width!=this._settings.width||this._cache.height!=this._settings.height||this._cache.x!=this._settings.x||this._cache.y!=this._settings.y){var t=new U(this.parentPlayer,this._settings);this.body.style.width=t.width+"%",this.body.style.height=t.height+"%",this.body.style.left=(100-t.width)/2+"%",this.body.style.top=(100-t.height)/2+"%",this._cache.width=this._settings.width,this._cache.height=this._settings.height,this._cache.x=this._settings.x,this._cache.y=this._settings.y}},i.prototype.addClass=function(t){"kmlPopup"!=t&&R.addClass(this.body,t)},i.prototype.removeClass=function(t){"kmlPopup"!=t&&R.removeClass(this.body,t)},i.prototype.toggleClass=function(t){"kmlPopup"!=t&&R.toggleClass(this.body,t)},i.prototype.content=function(t){null!=t&&(t.nodeName?this._content.appendChild(t):this._content.innerHTML=t)},i.prototype.setFontSize=function(t){this.body.style.fontSize=t+"%"},i.prototype.autoLineHeight=function(t){this.visible()&&(t?R.autoLineHeight(t):this._title&&R.autoLineHeight(this._title.parentNode))},i.prototype.title=function(t){return null!=t?(this._title.innerHTML=t,this.autoLineHeight(),t):this._title.innerHTML},i.prototype.destroy=function(){this.removeAllListeners(),this.parent.remove(this.wrapper),R.removeElement(this.wrapper)},i}(V),nt={x:0,width:"100%",height:"6%",minHeight:32},rt=!1,st="webkit moz o ms khtml".split(" "),ot="";if("undefined"!=typeof document.cancelFullScreen)rt=!0;else for(var at=0,lt=st.length;at<lt;at++){if(ot=st[at],"undefined"!=typeof document[ot+"CancelFullScreen"]){rt=!0;break}if("undefined"!=typeof document.msExitFullscreen&&document.msFullscreenEnabled){ot="ms",rt=!0;break}}var ht=""===ot?"fullscreenchange":ot+"fullscreenchange";ht=ht.toLowerCase();var ct,pt,ut=function(t){function e(){_(this,e);var i=E(this,t.call(this));if(i.iframe=null,i.scrollPosition=new g,i._fullscreenElement=null,i.fullscreenElementStyle={},i.supportsFullScreen=rt,i.supportsFullScreen){var n=function(){i.isFullScreen()?i.emit("enterFullScreen"):(setTimeout(i.scrollPosition.restore,100),i.emit("exitFullScreen"))};document.addEventListener(ht,n,!1)}return i}return x(e,t),e.prototype.defualtFullScreenElement=function(t){var e=t;return null==e&&(e=this.iframe?this.iframe:this.wrapper),e},e.prototype.onFullscreenChange=function(t){this.media.addEventListener(ht,function(t){return t.preventDefault(),t.stopPropagation,!1},!0)},e.prototype.isFullWindow=function(){return!1},e.prototype.isFullScreen=function(t){if(!this.supportsFullScreen)return this.isFullWindow();var e=this.defualtFullScreenElement(t);switch(ot){case"":return document.fullscreenElement==e;case"moz":return document.mozFullScreenElement==e;default:return document[ot+"FullscreenElement"]==e}},e.prototype.requestFullWindow=function(t){if(!(this.__settings&&this.__settings.fullWindow||this.isFullWindow()||(this.emit("enterFullScreen"),this.supportsFullScreen&&this.isFullScreen()))){var e=this.defualtFullScreenElement(t);this.scrollPosition.save();var i=e.style;this.fullscreenElementStyle.position=i.position||"",this.fullscreenElementStyle.margin=i.margin||"",this.fullscreenElementStyle.top=i.top||"",this.fullscreenElementStyle.left=i.left||"",this.fullscreenElementStyle.width=i.width||"",this.fullscreenElementStyle.height=i.height||"",this.fullscreenElementStyle.zIndex=i.zIndex||"",this.fullscreenElementStyle.maxWidth=i.maxWidth||"",this.fullscreenElementStyle.maxHeight=i.maxHeight||"",e.style.position="absolute",e.style.top=e.style.left=0,e.style.margin=0,e.style.maxWidth=e.style.maxHeight=e.style.width=e.style.height="100%",e.style.zIndex=2147483647,this._fullscreenElement=e,this.isFullWindow=function(){return!0}}},e.prototype.requestFullScreen=function(t){var e=this.defualtFullScreenElement(t);return this.supportsFullScreen?(this.scrollPosition.save(),""===ot?e.requestFullScreen():e[ot+("ms"==ot?"RequestFullscreen":"RequestFullScreen")]()):void this.requestFullWindow(e)},e.prototype.cancelFullWindow=function(){if((!this.__settings||!this.__settings.fullWindow)&&this.isFullWindow()&&(this.emit("exitFullScreen"),!this.supportsFullScreen||!this.isFullScreen())){for(var t in this.fullscreenElementStyle)this._fullscreenElement.style[t]=this.fullscreenElementStyle[t];this._fullscreenElement=null,this.isFullWindow=function(){return!1},this.scrollPosition.restore()}},e.prototype.cancelFullScreen=function(){return this.supportsFullScreen?""===ot?document.cancelFullScreen():document[ot+("ms"==ot?"ExitFullscreen":"CancelFullScreen")]():void this.cancelFullWindow()},e.prototype.toggleFullWindow=function(t){var e=!this.isFullWindow();e?this.requestFullWindow(t):this.cancelFullWindow()},e.prototype.toggleFullScreen=function(t){var e=this.isFullScreen();e?this.cancelFullScreen():this.requestFullScreen(t)},e.prototype.fullscreenElement=function(){return this.supportsFullScreen?""===ot?document.fullscreenElement:document[ot+"FullscreenElement"]:this._fullscreenElement},e}(V),dt=["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","playing","pause","error","seeking","emptied","seeked","ratechange","suspend"],ft=function(t){function e(i){_(this,e);var n=E(this,t.call(this));return null==i?(f("You need to supply a HTMLVideoElement to instantiate the player"),E(n)):(n.media=i,dt.forEach(function(t){i.addEventListener(t,function(){n.emit(t)})}),n.canPlay={mp4:v(i,"video/mp4"),webm:v(i,"video/webm"),ogg:v(i,"video/ogg")},n)}return x(e,t),e.prototype.autoplay=function(t){return"boolean"==typeof t&&(this.media.autoplay=t),this.media.autoplay},e.prototype.buffered=function(){return this.media.buffered},e.prototype.nativeControls=function(t){return"boolean"==typeof t&&(this.media.controls=t),this.media.controls},e.prototype.crossorigin=function(t){return"use-credentials"===t?(this.media.crossOrigin="use-credentials",t):t?(this.media.crossOrigin="anonymous","anonymous"):(t===!1&&(this.media.crossOrigin=null),this.media.crossOrigin)},e.prototype.loop=function(t){return"boolean"==typeof t&&(this.media.loop=t),this.media.loop},e.prototype.muted=function(t){return"boolean"==typeof t&&(this.media.muted=t),!!this.media.muted},e.prototype.mute=function(){this.muted(!0)},e.prototype.unmute=function(){this.muted(!1)},e.prototype.toggleMute=function(){return this.muted(!this.muted())},e.prototype.played=function(){return this.media.played},e.prototype.preload=function(t){return"metadata"===t||"meta"===t?(this.media.preload="metadata","metadata"):t?(this.media.preload="auto","auto"):t===!1?(this.media.preload="none","none"):this.media.preload},e.prototype.poster=function(t){return void 0!==t&&(this.media.poster=t),this.media.poster},e.prototype.src=function(t){if(void 0!==t)if(m(this.media),t instanceof Array){var e=0;for(t.length;e+=1;){if("video/mp4"===t[e].type&&this.canPlay.mp4)return this.media.src=t[e].src;if("video/webm"===t[e].type&&this.canPlay.webm)return this.media.src=t[e].src;if("video/ogg"===t[e].type&&this.canPlay.ogg)return this.media.src=t[e].src}}else t.src&&t.type?this.media.src=t.src:this.media.src=t;return this.media.currentSrc},e.prototype.play=function(){this.media.play()},e.prototype.pause=function(){this.media.pause()},e.prototype.paused=function(){return this.media.paused},e.prototype.playing=function(){return this.media.paused},e.prototype.togglePlay=function(){this.media.paused?this.play():this.pause()},e.prototype.currentTime=function(t){return null===t||isNaN(t)?this.media.currentTime:(t=parseFloat(t),t>this.media.duration&&(t=this.media.duration),t<0&&(t=0),this.media.currentTime=t,t)},e.prototype.seek=function(t){return this.currentTime(t)},e.prototype.load=function(t){void 0!==t&&this.src(t),this.media.load()},e.prototype.duration=function(){return this.media.duration},e.prototype.volume=function(t){return null===t||isNaN(t)?this.media.volume:(t=parseFloat(t),t>1&&(t=1),t<0&&(t=0),this.media.volume=t,t)},e}(ut),gt=document||{},mt=function(t){var e=!0,i=!0,n=null,r=t.media,s=function(n){if(e){if(t.wrapper.focus(),32==n.keyCode&&(r.paused?r.play():r.pause()),i){if(37==n.keyCode)return r.currentTime=r.currentTime-5,void t.emit("replay",5);if(39==n.keyCode)return r.currentTime=r.currentTime+5,void t.emit("forward",5)}if(38==n.keyCode){var s=r.volume;return s+=.1,s>1&&(s=1),void(r.volume=s)}if(40==n.keyCode){var o=r.volume;return o-=.1,o<0&&(o=0),void(r.volume=o)}}},o=function(n){if(e&&i){if(37==n.keyCode)return void t.emit("replay",!1);if(39==n.keyCode)return void t.emit("forward",!1)}};this.enabled=function(t){return void 0===t?e:void(e=t)},this.seekEnabled=function(t){
return void 0===t?i:void(i=t)},this.init=function(){e=!0,n=null,i=!0,gt.body.addEventListener("keydown",s.bind(this),!1),gt.body.addEventListener("keyup",o.bind(this),!1)},this.destroy=function(){e=!1,n=null,i=!0,gt.body.removeEventListener("keydown",s),gt.body.removeEventListener("keyup",o)},this.init()},vt={wrapper:null,on:{show:function(){},hide:function(){}}},yt=function(t){function e(i,n){_(this,e);var r=E(this,t.call(this));r.parentPlayer=i,r.settings=q(vt,n),r.instances=[],r.wrapper=null;for(var s in r.settings.on)a(r.settings.on[s])&&r.on(s,r.settings.on[s]);var o=r.settings.wrapper;return"string"==typeof o&&(r.wrapper=document.querySelector(o)),o instanceof HTMLElement&&(r.wrapper=o),null!=r.wrapper&&i.timeline&&i.timeline.cuepointsWrapper&&(r.wrapper=i.timeline.cuepointsWrapper),r}return x(e,t),e.prototype.add=function(t,e){null!=e&&(this.wrapper=e);var i=new $(this.parentPlayer,t,this.wrapper);return this.instances.push(i),this.emit("add"),i},e.prototype.show=function(){for(var t=this.instances.length-1;t>=0;t--){var e=this.instances[t];e.el&&(e.el.style.display="block")}this.emit("show")},e.prototype.hide=function(){for(var t=this.instances.length-1;t>=0;t--){var e=this.instances[t];e.el&&(e.el.style.display="none")}this.emit("hide")},e.prototype.suspend=function(){for(var t=this.instances.length-1;t>=0;t--){var e=this.instances[t];e.suspend()}this.emit("suspend")},e.prototype.activate=function(){for(var t=this.instances.length-1;t>=0;t--){var e=this.instances[t];e.activate()}this.emit("activate")},e.prototype.destroy=function(t){for(var e=this.instances.length-1;e>=0;e--){var i=this.instances[e];i.el&&i.parentWrapper.removeChild(i.el),i.destroy(),void 0==t&&(this.instances[e]=null)}void 0==t&&(this.instances=[])},e.prototype.changeWrapper=function(t){if("string"==typeof t&&(this.wrapper=document.querySelector(t)),t instanceof HTMLElement&&(this.wrapper=t),null!=this.wrapper){this.destroy(!0);for(var e=this.instances.length,i=0;i<e;i++){var n=this.instances[i];n.el&&(n.parentWrapper=this.wrapper,this.wrapper.appendChild(n.el)),n.activate()}this.emit("changeWrapper")}},e}(V),At=function(){var t=0,e=function(e,i){void 0!==i&&(t=i);var n={wrapperWidth:e.offsetWidth,wrapperHeight:e.offsetHeight,scale:t||e.width/e.height,width:0,height:0,offsetX:0,offsetY:0};return n.wrapperScale=n.wrapperWidth/n.wrapperHeight,n.wrapperScale>n.scale?(n.height=n.wrapperHeight,n.width=n.scale*n.height,n.offsetX=(n.wrapperWidth-n.width)/2):(n.width=n.wrapperWidth,n.height=n.width/n.scale,n.offsetY=(n.wrapperHeight-n.height)/2),n};return e}(),bt=document||{};"undefined"!=typeof bt.hidden?(ct="hidden",pt="visibilitychange"):"undefined"!=typeof bt.mozHidden?(ct="mozHidden",pt="mozvisibilitychange"):"undefined"!=typeof bt.msHidden?(ct="msHidden",pt="msvisibilitychange"):"undefined"!=typeof bt.webkitHidden&&(ct="webkitHidden",pt="webkitvisibilitychange");var wt=function(){return!("undefined"==typeof bt[ct])},_t=function(){function t(t){var n=["get","post","put","delete"];return t=t||{},t.baseUrl=t.baseUrl||"",t.method&&t.url?i(t.method,t.baseUrl+t.url,e(t.data),t):n.reduce(function(n,r){return n[r]=function(n,s){return i(r,t.baseUrl+n,e(s),t)},n},{})}function e(t){return t||null}function i(t,e,i,r){var o=["then","catch","always"],l=o.reduce(function(t,e){return t[e]=function(i){return t[e]=i,t},t},{}),h=new XMLHttpRequest;return h.open(t,e,!0),h.withCredentials=r.hasOwnProperty("withCredentials"),n(h,r.headers),h.addEventListener("readystatechange",s(l,h),!1),h.send(a(i)),l.abort=function(){return h.abort()},l}function n(t,e){e=e||{},r(e)||(e["Content-Type"]="application/x-www-form-urlencoded"),Object.keys(e).forEach(function(i){e[i]&&t.setRequestHeader(i,e[i])})}function r(t){return Object.keys(t).some(function(t){return"content-type"===t.toLowerCase()})}function s(t,e){return function i(){e.readyState===e.DONE&&(e.removeEventListener("readystatechange",i,!1),t.always.apply(t,o(e)),e.status>=200&&e.status<300?t.then.apply(t,o(e)):t.catch.apply(t,o(e)))}}function o(t){var e;try{e=JSON.parse(t.responseText)}catch(i){e=t.responseText}return[e,t]}function a(t){return l(t)?h(t):t}function l(t){return"[object Object]"===Object.prototype.toString.call(t)}function h(t){return Object.keys(t).reduce(function(e,i){var n=e?e+"&":"";return n+c(i)+"="+c(t[i])},"")}function c(t){return encodeURIComponent(t)}return t}(),xt=function(t){return t.stopPropagation(),t.preventDefault(),!1},Et={videoWidth:960,videoHeight:540,autoplay:!1,loop:!1,controls:!0,font:{ratio:1,min:.5,units:"em"},externalControls:!0,contextMenu:!1,fullWindow:!1},St=function(t){function e(i){_(this,e);var r=i.video,s=E(this,t.call(this,r));return null==r?E(s):(s.__settings={},s._controls=!0,s.device=T,s.iframe=d(),R.addClass(r,"kml"+n(r.nodeName.toLowerCase())),s.wrapper=R.wrap(s.media,R.createElement("div",{class:"kmlPlayer"})),R.triggerWebkitHardwareAcceleration(s.wrapper),s.inIframe&&R.addClass(s.wrapper,"inFrame"),s.settings(q(Et,i)),s.pageVisibility=new A(r),s.externalControls=new mt(s),s.externalControls.enabled(s.__settings.externalControls),s.userActivity=new y(s),s.on("loadedmetadata",function(){s.media.width==s.media.videoWidth&&s.media.height==s.media.videoHeight||(s.videoWidth(),s.videoHeight(),s.emit("resize"))}),null!=s.__settings.autoplay&&(s.__settings.autoplay?s.play():s.autoplay(!1)),null!=s.__settings.fullWindow&&s.__settings.fullWindow&&s.requestFullWindow(),s.cuepoint=function(t){return new $(this,t,null)},s.cuepoints=new yt(s),s)}return x(e,t),e.prototype.initTimeline=function(){"native"!==this.__settings.controls&&this.__settings.controls&&(this.timeline=new u(this),this.cuepoints.wrapper||this.cuepoints.changeWrapper(this.timeline.cuepointsWrapper))},e.prototype.timeline=function(){},e.prototype.settings=function(t){if(null==t)return this.__settings;this.__settings=q(this.__settings,t);for(var e in this.__settings)null!=this[e]&&a(this[e])&&this[e](this.__settings[e]),"controls"===e&&"native"===this.__settings[e]&&this.nativeControls(!0);return this.__settings},e.prototype.controls=function(t){return"boolean"==typeof t&&(t?("native"===this.__settings.controls&&this.nativeControls(!0),this.__settings.externalControls&&this.externalControls.enabled(!0),this._controls=!0):(this.externalControls.enabled(!1),this.nativeControls(!1),this._controls=!1)),this._controls},e.prototype.contextMenu=function(t){"boolean"==typeof t&&(t?this.media.removeEventListener("contextmenu",xt):this.media.addEventListener("contextmenu",xt))},e.prototype.ajax=function(t){return _t(t)},e.prototype.videoWidth=function(t){return this.media.videoWidth?(this.media.width=this.media.videoWidth,this.media.videoWidth):(isNaN(t)||(t=parseFloat(t),this.media.width=t),this.media.width)},e.prototype.videoHeight=function(t){return this.media.videoHeight?(this.media.height=this.media.videoHeight,this.media.videoHeight):(isNaN(t)||(t=parseFloat(t),this.media.height=t),this.media.height)},e.prototype.scale=function(){return this.videoWidth()/this.videoHeight()},e.prototype.bounds=function(t){var e=At(this.media);return null!=e[t]?e[t]:e},e.prototype.width=function(){return this.bounds("width")},e.prototype.height=function(){return this.bounds("height")},e.prototype.offsetX=function(){return this.bounds("offsetX")},e.prototype.offsetY=function(){return this.bounds("offsetY")},e.prototype.wrapperHeight=function(){return this.media.offsetHeight},e.prototype.wrapperWidth=function(){return this.media.offsetWidth},e.prototype.wrapperScale=function(){return this.media.offsetWidth/this.media.offsetHeight},e.prototype.addClass=function(t,e){return null!=e?void R.addClass(t,e):void R.addClass(this.wrapper,t)},e.prototype.removeClass=function(t,e){return null!=e?void R.removeClass(t,e):void("kmlPlayer"!==t&&R.removeClass(this.wrapper,t))},e.prototype.toggleClass=function(t,e){return null!=e?void R.toggleClass(t,e):void("kmlPlayer"!==t&&R.toggleClass(this.wrapper,t))},e}(ft),Ct=function(t){function e(i,n,r,s){_(this,e);var o=E(this,t.call(this,i,n,r,s)),l=document.createElement("video");R.replaceElement(o._content,l),o.player=new St({video:l}),o.player.supportsFullScreen=!1,o.player.initTimeline(),o.player.media.addEventListener("click",function(){o.player.userActivity.idle()?o.player.userActivity.idle(!1):o.player.togglePlay()});var h=!1;o.player.externalControls.enabled(!1),o.on("beforeHide",function(){h=o.player.paused(),o.player.pause(),o.player.externalControls.enabled(!1)}),o.on("show",function(){h||o.player.play(),o.player.timeline.resize(),o.player.externalControls.enabled(!0)}),o.on("ended",function(){a(n.onEnded)&&n.onEnded()}),n.size=n.size||80;var c=n.size;return o.setSize=function(t){c=n.size=t,this.emit("resize")},o.player.requestFullWindow=function(){n.size=100,o.overlay.backgroundColor("000000",.9),o.header.backgroundColor("000000",.6),o.emit("resize"),o.player.emit("enterFullScreen"),o.player.isFullWindow=function(){return!0}},o.player.cancelFullWindow=function(){o.overlay.backgroundColor("000000",.6),o.header.backgroundColor(o._settings.headerBg,1),n.size=c,o.emit("resize"),o.player.emit("exitFullScreen"),o.player.isFullWindow=function(){return!1}},o.player.on("ended",function(){o.emit("ended")}),o.on("resize",function(){var t=0,e=0,i=s.width(),r=s.height(),a=o.player.scale(),l=i,h=r,c=i,p=r,u=10;i>a*r?(l=a*r,h=r,c=l,u=r/10/h*100,l=n.size*(l/i*100)/100,h=n.size):r>i/a?(h=i/a,l=i,p=h,u=r/10/h*100,h=n.size*(h/r*100)/100,l=n.size):(l=n.size,h=n.size),e=(100-l)/2,t=(100-h)/2,o._title.parentNode.style.height=u+"%";var d={x:(100-l)/2,y:(100-h)/2,width:l,height:h};u<=d.y?(o._title.parentNode.style.transform="translateY(-100%)",o.body.style.top=d.y+u/2+"%"):(o._title.parentNode.style.transform="translateY(0)",o.body.style.top=d.y+"%"),o.body.style.width=d.width+"%",o.body.style.height=d.height+"%",o.body.style.left=d.x+"%",o.autoLineHeight()}),s.on("loadedmetadata",function(){o.emit("resize")}),o.player.on("loadedmetadata",function(){o.emit("resize")}),o.player.load(n.url),o}return x(e,t),e.prototype.content=function(){return this.player},e}(it),zt={backgroundColor:"",onHide:null,onShow:null,externalControls:!0,visible:!0,width:"100%",height:null,x:0,y:null},kt=function(t){function i(n,r,s,o){_(this,i);var a=E(this,t.call(this));return a.wrapper=n,a._visible=!1,a._settings=q(zt,r),a._cache={},a.backgroundColor=e(n),a.parent=s,a.parentPlayer=o,a.init(),a}return x(i,t),i.prototype.settings=function(t){return t&&(this._settings=q(this._settings,t)),this._settings},i.prototype.init=function(){var t=this;this._settings.visible?this.show():this.wrapper.style.display="none",this.parentPlayer.on("resize",function(){t.resize()})},i.prototype.visible=function(t){return"boolean"==typeof t&&(this._visible=t),this._visible},i.prototype.hide=function(){var t=this;this.visible()&&(this.visible(!1),this.emit("beforeHide"),R.addClass(this.wrapper,"hidden"),setTimeout(function(){t.wrapper.style.display="none",a(t._settings.onHide)&&t._settings.onHide(),t.parent.checkVisibleElements(),t.emit("hide")},250))},i.prototype.show=function(){var t=this;this.visible()||(this.visible(!0),this.emit("beforeShow"),this.parent.enabled(!0),this.wrapper.style.display="block",setTimeout(function(){R.removeClass(t.wrapper,"hidden"),a(t._settings.onHide)&&t._settings.onShow(),t.emit("show")},50))},i.prototype.resize=function(){this._cache.width==this._settings.width&&this._cache.height==this._settings.height&&this._cache.x==this._settings.x&&this._cache.y==this._settings.y||(null!=this._settings.width&&(this._cache.width=this.wrapper.style.width=this._settings.width),null!=this._settings.height&&(this._cache.height=this.wrapper.style.height=this._settings.height),null!=this._settings.x&&(this._cache.x=this.wrapper.style.left=this._settings.x),null!=this._settings.y&&(this._cache.y=this.wrapper.style.top=this._settings.y))},i.prototype.addClass=function(t){"kmlTimeline"!=t&&R.addClass(this.wrapper,t)},i.prototype.removeClass=function(t){"kmlTimeline"!=t&&R.removeClass(this.wrapper,t)},i.prototype.toggleClass=function(t){"kmlTimeline"!=t&&R.toggleClass(this.wrapper,t)},i.prototype.content=function(t){null!=t&&(t.nodeName?this.wrapper.appendChild(t):this.wrapper.innerHTML=t)},i.prototype.setFontSize=function(t){this.wrapper.style.fontSize=t+"%"},i.prototype.destroy=function(){this.removeAllListeners(),this.parent.remove(this.wrapper),R.removeElement(this.wrapper)},i}(V),Tt=function(){function t(e){var i=this;_(this,t),this.wrapper=R.createElement("div",{class:"kmlContainers"});var n=R.createElement("div",{class:"popups"}),r=R.createElement("div",{class:"hotspots"}),s=R.createElement("div",{class:"widgets"}),o=R.createElement("div",{class:"timelines"});this.wrapper.appendChild(r),this.wrapper.appendChild(s),this.wrapper.appendChild(o),this.wrapper.appendChild(n),this._els=[];var a=new B({},e);a.applyTo(this.wrapper),this.enabled=function(t){return null!=t&&(0==t&&(t=!1,this.wrapper.style.display="none"),t&&(this.wrapper.style.display="block"),a.enabled(t)),a.enabled()},this.checkVisibleElements=function(){var t=0;for(var e in this._els)this._els[e].visible()&&(t+=1);this.enabled(t)},e.wrapper.appendChild(this.wrapper);var l=[];this.hide=function(t){for(var e in this._els){var i=this._els[e];this._els[e]!==t&&i.visible()&&(i.hide(),l.push(i),i.visible(!1))}},this.show=function(){for(var t in l)l[t].show();l=[]},this.add=function(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments[2],l=t.className||"",h=R.createElement("div");i?i.nodeType||(i=h):i=h;var c=null;switch(a){case"hotspot":c=new tt(e,t),r.appendChild(c.wrapper);break;case"video":R.addClass(h,"kmlPopup isVideo hidden "+l),c=new Ct(h,t,this,e),n.appendChild(c.wrapper);break;case"popup":R.addClass(h,"kmlPopup hidden "+l),c=new it(h,t,this,e),n.appendChild(c.wrapper);break;case"timeline":R.addClass(h,"kmlTimeline "+l),c=new kt(h,t,this,e),o.appendChild(c.wrapper);break;default:R.addClass(h,"kmlWidget "+l),c=new K(h,t,this,e),s.appendChild(c.wrapper)}return this._els.push(c),c},this.remove=function(t){for(var e=0,n=i._els.length;e<n;e+=1){var r=i._els[e];if(r.wrapper===t){i._els.splice(e,1),0==i._els.length&&i.enabled(!1);break}}}}return t.prototype.addClass=function(t){"kmlContainers"!=t&&R.addClass(this.wrapper,t)},t.prototype.removeClass=function(t){"kmlContainers"!=t&&R.removeClass(this.wrapper,t)},t.prototype.toggleClass=function(t){"kmlContainers"!=t&&R.toggleClass(this.wrapper,t)},t.prototype.els=function(t){return this._els[t]||this._els},t}(),Pt=function(t){function e(n,r){_(this,e);var s=E(this,t.call(this,n));s._bounds={},s.containers=new Tt(s),s.widget=function(t,e){return this.containers.add(t,e,"widget")},s.timelineContainer=function(t,e){return this.containers.add(t,e,"timeline")},s.videoContainer=function(t){return this.containers.add(t,null,"video")},s.popupContainer=function(t){return this.containers.add(t,null,"popup")},"boolean"==typeof s.__settings.font&&s.__settings.font&&(s.__settings.font=defaults.font),s.autoFont=new X(s.wrapper,s.__settings.font,s),s.__settings.font&&s.autoFont.enabled(!0),s.bigPlay=new i(s),s.initTimeline(),a(r)&&r.bind(s)();var o={w:s.width(),x:s.offsetX(),y:s.offsetY(),h:s.height()},l=function t(){s._bounds=At(s.media);var e=s.width(),i=s.width(),n=s.offsetX(),r=s.offsetY();o.w==e&&o.h==i&&o.x==n&&o.y==r||(o.w=e,o.h=i,o.x=n,o.y=r,s.emit("resize")),window.requestAnimationFrame(t)};return l(),s}return x(e,t),e.prototype.bounds=function(t){return null!=this._bounds[t]?this._bounds[t]:this._bounds},e}(St),Dt=function(){function t(e){_(this,t),this.player=new Pt(e,this.init)}return t.prototype.init=function(){},t}(),Mt=t(function(t,e){!function(i){function n(){}function r(t){if(!t||"object"!==("undefined"==typeof t?"undefined":w(t)))return!1;var e=z(t)||At;return/object|function/.test(w(e.Element))?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName}function s(t){return t===At||!(!t||!t.Window)&&t instanceof t.Window}function o(t){return!!t&&t instanceof wt}function a(t){return l(t)&&void 0!==w(t.length)&&h(t.splice)}function l(t){return!!t&&"object"===("undefined"==typeof t?"undefined":w(t))}function h(t){return"function"==typeof t}function c(t){return"number"==typeof t}function p(t){return"boolean"==typeof t}function u(t){return"string"==typeof t}function d(t){return!!u(t)&&(bt.querySelector(t),!0)}function f(t,e){for(var i in e)t[i]=e[i];return t}function g(t,e){for(var i in e){var n=!1;for(var r in Jt)if(0===i.indexOf(r)&&Jt[r].test(i)){n=!0;break}n||(t[i]=e[i])}return t}function m(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp}function v(t,e,i){var n=e.length>1?D(e):e[0];_(n,kt,i),t.page.x=kt.x,t.page.y=kt.y,x(n,kt,i),t.client.x=kt.x,t.client.y=kt.y,t.timeStamp=(new Date).getTime()}function y(t,e,i){t.page.x=i.page.x-e.page.x,t.page.y=i.page.y-e.page.y,t.client.x=i.client.x-e.client.x,t.client.y=i.client.y-e.client.y,t.timeStamp=(new Date).getTime()-e.timeStamp;var n=Math.max(t.timeStamp/1e3,.001);t.page.speed=zt(t.page.x,t.page.y)/n,t.page.vx=t.page.x/n,t.page.vy=t.page.y/n,t.client.speed=zt(t.client.x,t.page.y)/n,t.client.vx=t.client.x/n,t.client.vy=t.client.y/n}function A(t){return t instanceof At.Event||Nt&&At.Touch&&t instanceof At.Touch}function b(t,e,i){return i=i||{},t=t||"page",i.x=e[t+"X"],i.y=e[t+"Y"],i}function _(t,e){return e=e||{},Gt&&A(t)?(b("screen",t,e),e.x+=At.scrollX,e.y+=At.scrollY):b("page",t,e),e}function x(t,e){return e=e||{},Gt&&A(t)?b("screen",t,e):b("client",t,e),e}function E(t){return t=t||At,{x:t.scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function S(t){return c(t.pointerId)?t.pointerId:t.identifier}function C(t){return t instanceof Et?t.correspondingUseElement:t}function z(t){if(s(t))return t;var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||At}function k(t){var e=t instanceof _t?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}function T(t){var e=k(t);if(!Ut&&e){var i=E(z(t));e.left+=i.x,e.right+=i.x,e.top+=i.y,e.bottom+=i.y}return e}function P(t){var e=[];return a(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function D(t){for(var e,i={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},n=0;n<t.length;n++)for(e in i)i[e]+=t[n][e];for(e in i)i[e]/=t.length;return i}function M(t){if(t.length||t.touches&&t.touches.length>1){var e=P(t),i=Math.min(e[0].pageX,e[1].pageX),n=Math.min(e[0].pageY,e[1].pageY),r=Math.max(e[0].pageX,e[1].pageX),s=Math.max(e[0].pageY,e[1].pageY);return{x:i,y:n,left:i,top:n,width:r-i,height:s-n}}}function F(t,e){e=e||Ht.deltaSource;var i=e+"X",n=e+"Y",r=P(t),s=r[0][i]-r[1][i],o=r[0][n]-r[1][n];return zt(s,o)}function H(t,e,i){i=i||Ht.deltaSource;var n=i+"X",r=i+"Y",s=P(t),o=s[0][n]-s[1][n],a=s[0][r]-s[1][r],l=180*Math.atan(a/o)/Math.PI;if(c(e)){var h=l-e,p=h%360;p>315?l-=360+l/360|0:p>135?l-=180+l/360|0:p<-315?l+=360+l/360|0:p<-135&&(l+=180+l/360|0)}return l}function O(t,e){var i=t?t.options.origin:Ht.origin;return"parent"===i?i=q(e):"self"===i?i=t.getRect(e):d(i)&&(i=Y(e,i)||{x:0,y:0}),h(i)&&(i=i(t&&e)),r(i)&&(i=T(i)),i.x="x"in i?i.x:i.left,i.y="y"in i?i.y:i.top,i}function N(t,e,i,n){var r=1-t;return r*r*e+2*r*t*i+t*t*n}function R(t,e,i,n,r,s,o){return{x:N(o,t,i,r),y:N(o,e,n,s)}}function I(t,e,i,n){return t/=n,-i*t*(t-2)+e}function L(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function Y(t,e){for(var i=q(t);r(i);){if(gt(i,e))return i;i=q(i)}return null}function q(t){var e=t.parentNode;if(o(e)){for(;(e=e.host)&&o(e););return e}return e}function X(t,e){return t._context===e.ownerDocument||L(t._context,e)}function W(t,e,i){var n=t.options.ignoreFrom;return!(!n||!r(i))&&(u(n)?mt(i,n,e):!!r(n)&&L(n,i))}function B(t,e,i){var n=t.options.allowFrom;return!n||!!r(i)&&(u(n)?mt(i,n,e):!!r(n)&&L(n,i))}function j(t,e){if(!e)return!1;var i=e.options.drag.axis;return"xy"===t||"xy"===i||i===t}function V(t,e){var i=t.options;return/^resize/.test(e)&&(e="resize"),i[e].snap&&i[e].snap.enabled}function G(t,e){var i=t.options;return/^resize/.test(e)&&(e="resize"),i[e].restrict&&i[e].restrict.enabled}function U(t,e){var i=t.options;return/^resize/.test(e)&&(e="resize"),i[e].autoScroll&&i[e].autoScroll.enabled}function Q(t,e,i){for(var n=t.options,r=n[i.name].max,s=n[i.name].maxPerElement,o=0,a=0,l=0,h=0,c=Dt.length;h<c;h++){var p=Dt[h],u=p.prepared.name,d=p.interacting();if(d){if(o++,o>=qt)return!1;if(p.target===t){if(a+=u===i.name|0,a>=r)return!1;if(p.element===e&&(l++,u!==i.name||l>=s))return!1}}}return qt>0}function $(t){var e,i,n,r,s,o=t[0],a=o?0:-1,l=[],h=[];for(r=1;r<t.length;r++)if(e=t[r],e&&e!==o)if(o){if(e.parentNode!==e.ownerDocument)if(o.parentNode!==e.ownerDocument){if(!l.length)for(i=o;i.parentNode&&i.parentNode!==i.ownerDocument;)l.unshift(i),i=i.parentNode;if(o instanceof St&&e instanceof _t&&!(e instanceof xt)){if(e===o.parentNode)continue;i=e.ownerSVGElement}else i=e;for(h=[];i.parentNode!==i.ownerDocument;)h.unshift(i),i=i.parentNode;for(s=0;h[s]&&h[s]===l[s];)s++;var c=[h[s-1],h[s],l[s]];for(n=c[0].lastChild;n;){if(n===c[1]){o=e,a=r,l=[];break}if(n===c[2])break;n=n.previousSibling}}else o=e,a=r}else o=e,a=r;return a}function Z(){if(this.target=null,this.element=null,this.dropTarget=null,this.dropElement=null,this.prevDropTarget=null,this.prevDropElement=null,this.prepared={name:null,axis:null,edges:null},this.matches=[],this.matchElements=[],this.inertiaStatus={active:!1,smoothEnd:!1,ending:!1,startEvent:null,upCoords:{},xe:0,ye:0,sx:0,sy:0,t0:0,vx0:0,vys:0,duration:0,resumeDx:0,resumeDy:0,lambda_v0:0,one_ve_v0:0,i:null},h(Function.prototype.bind))this.boundInertiaFrame=this.inertiaFrame.bind(this),this.boundSmoothEndFrame=this.smoothEndFrame.bind(this);else{var t=this;this.boundInertiaFrame=function(){return t.inertiaFrame()},this.boundSmoothEndFrame=function(){return t.smoothEndFrame()}}this.activeDrops={dropzones:[],elements:[],rects:[]},this.pointers=[],this.pointerIds=[],this.downTargets=[],this.downTimes=[],this.holdTimers=[],this.prevCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.curCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.startCoords={page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},this.pointerDelta={page:{x:0,y:0,vx:0,vy:0,speed:0},client:{x:0,y:0,vx:0,vy:0,speed:0},timeStamp:0},this.downEvent=null,this.downPointer={},this._eventTarget=null,this._curEventTarget=null,this.prevEvent=null,this.tapTime=0,this.prevTap=null,this.startOffset={left:0,right:0,top:0,bottom:0},this.restrictOffset={left:0,right:0,top:0,bottom:0},this.snapOffsets=[],this.gesture={start:{x:0,y:0},startDistance:0,prevDistance:0,distance:0,scale:1,startAngle:0,prevAngle:0},this.snapStatus={x:0,y:0,dx:0,dy:0,realX:0,realY:0,snappedX:0,snappedY:0,targets:[],locked:!1,changed:!1},this.restrictStatus={dx:0,dy:0,restrictedX:0,restrictedY:0,snap:null,restricted:!1,changed:!1},this.restrictStatus.snap=this.snapStatus,this.pointerIsDown=!1,this.pointerWasMoved=!1,this.gesturing=!1,this.dragging=!1,this.resizing=!1,this.resizeAxes="xy",this.mouse=!1,Dt.push(this)}function K(t,e,i){var n,r=0,s=Dt.length,o=/mouse/i.test(t.pointerType||e)||4===t.pointerType,a=S(t);if(/down|start/i.test(e))for(r=0;r<s;r++){n=Dt[r];var l=i;if(n.inertiaStatus.active&&n.target.options[n.prepared.name].inertia.allowResume&&n.mouse===o)for(;l;){if(l===n.element)return n;l=q(l)}}if(o||!Nt&&!Rt){for(r=0;r<s;r++)if(Dt[r].mouse&&!Dt[r].inertiaStatus.active)return Dt[r];for(r=0;r<s;r++)if(Dt[r].mouse&&(!/down/.test(e)||!Dt[r].inertiaStatus.active))return n;return n=new Z,n.mouse=!0,n}for(r=0;r<s;r++)if(ft(Dt[r].pointerIds,a))return Dt[r];if(/up|end|out/i.test(e))return null;for(r=0;r<s;r++)if(n=Dt[r],(!n.prepared.name||n.target.options.gesture.enabled)&&!n.interacting()&&(o||!n.mouse))return n;return new Z}function J(t){return function(e){var i,n,r=C(e.path?e.path[0]:e.target),s=C(e.currentTarget);if(Nt&&/touch/.test(e.type))for(Yt=(new Date).getTime(),n=0;n<e.changedTouches.length;n++){var o=e.changedTouches[n];i=K(o,e.type,r),i&&(i._updateEventTargets(r,s),i[t](o,e,r,s))}else{if(!Rt&&/mouse/.test(e.type)){for(n=0;n<Dt.length;n++)if(!Dt[n].mouse&&Dt[n].pointerIsDown)return;if((new Date).getTime()-Yt<500)return}if(i=K(e,e.type,r),!i)return;i._updateEventTargets(r,s),i[t](e,e,r,s)}}}function tt(t,e,i,n,r,s){var o,a,l=t.target,h=t.snapStatus,c=t.restrictStatus,p=t.pointers,u=(l&&l.options||Ht).deltaSource,d=u+"X",g=u+"Y",m=l?l.options:Ht,v=O(l,r),y="start"===n,A="end"===n,b=y?t.startCoords:t.curCoords;r=r||t.element,a=f({},b.page),o=f({},b.client),a.x-=v.x,a.y-=v.y,o.x-=v.x,o.y-=v.y;var w=m[i].snap&&m[i].snap.relativePoints;!V(l,i)||y&&w&&w.length||(this.snap={range:h.range,locked:h.locked,x:h.snappedX,y:h.snappedY,realX:h.realX,realY:h.realY,dx:h.dx,dy:h.dy},h.locked&&(a.x+=h.dx,a.y+=h.dy,o.x+=h.dx,o.y+=h.dy)),!G(l,i)||y&&m[i].restrict.elementRect||!c.restricted||(a.x+=c.dx,a.y+=c.dy,o.x+=c.dx,o.y+=c.dy,this.restrict={dx:c.dx,dy:c.dy}),this.pageX=a.x,this.pageY=a.y,this.clientX=o.x,this.clientY=o.y,this.x0=t.startCoords.page.x-v.x,this.y0=t.startCoords.page.y-v.y,this.clientX0=t.startCoords.client.x-v.x,this.clientY0=t.startCoords.client.y-v.y,this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.button=e.button,this.buttons=e.buttons,this.target=r,this.t0=t.downTimes[0],this.type=i+(n||""),this.interaction=t,this.interactable=l;var _=t.inertiaStatus;if(_.active&&(this.detail="inertia"),s&&(this.relatedTarget=s),A?"client"===u?(this.dx=o.x-t.startCoords.client.x,this.dy=o.y-t.startCoords.client.y):(this.dx=a.x-t.startCoords.page.x,this.dy=a.y-t.startCoords.page.y):y?(this.dx=0,this.dy=0):"inertiastart"===n?(this.dx=t.prevEvent.dx,this.dy=t.prevEvent.dy):"client"===u?(this.dx=o.x-t.prevEvent.clientX,this.dy=o.y-t.prevEvent.clientY):(this.dx=a.x-t.prevEvent.pageX,this.dy=a.y-t.prevEvent.pageY),t.prevEvent&&"inertia"===t.prevEvent.detail&&!_.active&&m[i].inertia&&m[i].inertia.zeroResumeDelta&&(_.resumeDx+=this.dx,_.resumeDy+=this.dy,this.dx=this.dy=0),"resize"===i&&t.resizeAxes?m.resize.square?("y"===t.resizeAxes?this.dx=this.dy:this.dy=this.dx,this.axes="xy"):(this.axes=t.resizeAxes,"x"===t.resizeAxes?this.dy=0:"y"===t.resizeAxes&&(this.dx=0)):"gesture"===i&&(this.touches=[p[0],p[1]],y?(this.distance=F(p,u),this.box=M(p),this.scale=1,this.ds=0,this.angle=H(p,void 0,u),this.da=0):A||e instanceof tt?(this.distance=t.prevEvent.distance,this.box=t.prevEvent.box,this.scale=t.prevEvent.scale,this.ds=this.scale-1,this.angle=t.prevEvent.angle,this.da=this.angle-t.gesture.startAngle):(this.distance=F(p,u),this.box=M(p),this.scale=this.distance/t.gesture.startDistance,this.angle=H(p,t.gesture.prevAngle,u),this.ds=this.scale-t.gesture.prevScale,this.da=this.angle-t.gesture.prevAngle)),y)this.timeStamp=t.downTimes[0],this.dt=0,this.duration=0,this.speed=0,this.velocityX=0,this.velocityY=0;else if("inertiastart"===n)this.timeStamp=t.prevEvent.timeStamp,this.dt=t.prevEvent.dt,this.duration=t.prevEvent.duration,this.speed=t.prevEvent.speed,this.velocityX=t.prevEvent.velocityX,this.velocityY=t.prevEvent.velocityY;else if(this.timeStamp=(new Date).getTime(),this.dt=this.timeStamp-t.prevEvent.timeStamp,this.duration=this.timeStamp-t.downTimes[0],e instanceof tt){var x=this[d]-t.prevEvent[d],E=this[g]-t.prevEvent[g],S=this.dt/1e3;this.speed=zt(x,E)/S,this.velocityX=x/S,this.velocityY=E/S}else this.speed=t.pointerDelta[u].speed,this.velocityX=t.pointerDelta[u].vx,this.velocityY=t.pointerDelta[u].vy;if((A||"inertiastart"===n)&&t.prevEvent.speed>600&&this.timeStamp-t.prevEvent.timeStamp<150){var C=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI,z=22.5;C<0&&(C+=360);var k=135-z<=C&&C<225+z,T=225-z<=C&&C<315+z,P=!k&&(315-z<=C||C<45+z),D=!T&&45-z<=C&&C<135+z;this.swipe={up:T,down:D,left:k,right:P,angle:C,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}}function et(){this.originalEvent.preventDefault()}function it(t){var e="";if("drag"===t.name&&(e=Xt.drag),"resize"===t.name)if(t.axis)e=Xt[t.name+t.axis];else if(t.edges){for(var i="resize",n=["top","bottom","left","right"],r=0;r<4;r++)t.edges[n[r]]&&(i+=n[r]);e=Xt[i]}return e}function nt(t,e,i,n,s,o,a){if(!e)return!1;if(e===!0){var l=c(o.width)?o.width:o.right-o.left,h=c(o.height)?o.height:o.bottom-o.top;if(l<0&&("left"===t?t="right":"right"===t&&(t="left")),h<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return i.x<(l>=0?o.left:o.right)+a;if("top"===t)return i.y<(h>=0?o.top:o.bottom)+a;if("right"===t)return i.x>(l>=0?o.right:o.left)-a;if("bottom"===t)return i.y>(h>=0?o.bottom:o.top)-a}return!!r(n)&&(r(e)?e===n:mt(n,e,s))}function rt(t,e,i){var n,r=this.getRect(i),s=!1,o=null,a=null,h=f({},e.curCoords.page),c=this.options;if(!r)return null;if(Wt.resize&&c.resize.enabled){var p=c.resize;if(n={left:!1,right:!1,top:!1,bottom:!1},l(p.edges)){for(var u in n)n[u]=nt(u,p.edges[u],h,e._eventTarget,i,r,p.margin||It);n.left=n.left&&!n.right,n.top=n.top&&!n.bottom,s=n.left||n.right||n.top||n.bottom}else{var d="y"!==c.resize.axis&&h.x>r.right-It,g="x"!==c.resize.axis&&h.y>r.bottom-It;s=d||g,a=(d?"x":"")+(g?"y":"")}}return o=s?"resize":Wt.drag&&c.drag.enabled?"drag":null,Wt.gesture&&e.pointerIds.length>=2&&!e.dragging&&!e.resizing&&(o="gesture"),o?{name:o,axis:a,edges:n}:null}function st(t,e){if(!l(t))return null;var i=t.name,n=e.options;return("resize"===i&&n.resize.enabled||"drag"===i&&n.drag.enabled||"gesture"===i&&n.gesture.enabled)&&Wt[i]?("resize"!==i&&"resizeyx"!==i||(i="resizexy"),t):null}function ot(t,e){var i={},n=Ft[t.type],s=C(t.path?t.path[0]:t.target),o=s;e=!!e;for(var a in t)i[a]=t[a];for(i.originalEvent=t,i.preventDefault=et;r(o);){for(var l=0;l<n.selectors.length;l++){var h=n.selectors[l],c=n.contexts[l];if(gt(o,h)&&L(c,s)&&L(c,o)){var p=n.listeners[l];i.currentTarget=o;for(var u=0;u<p.length;u++)p[u][1]===e&&p[u][0](i)}}o=q(o)}}function at(t){return ot.call(this,t,!0)}function lt(t,e){return Pt.get(t,e)||new ht(t,e)}function ht(t,e){this._element=t,this._iEvents=this._iEvents||{};var i;if(d(t)){this.selector=t;var n=e&&e.context;i=n?z(n):At,n&&(i.Node?n instanceof i.Node:r(n)||n===i.document)&&(this._context=n)}else i=z(t),r(t,i)&&(Ct?(Kt.add(this._element,vt.down,te.pointerDown),Kt.add(this._element,vt.move,te.pointerHover)):(Kt.add(this._element,"mousedown",te.pointerDown),Kt.add(this._element,"mousemove",te.pointerHover),Kt.add(this._element,"touchstart",te.pointerDown),Kt.add(this._element,"touchmove",te.pointerHover)));this._doc=i.document,ft(Tt,this._doc)||ut(this._doc),Pt.push(this),this.set(e)}function ct(t,e){var i=!1;return function(){return i||(At.console.warn(e),i=!0),t.apply(this,arguments)}}function pt(t){for(var e=0;e<Dt.length;e++)Dt[e].pointerEnd(t,t)}function ut(t){if(!ft(Tt,t)){var e=t.defaultView||t.parentWindow;for(var i in Ft)Kt.add(t,i,ot),Kt.add(t,i,at,!0);Ct?(vt=Ct===e.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"},Kt.add(t,vt.down,te.selectorDown),Kt.add(t,vt.move,te.pointerMove),Kt.add(t,vt.over,te.pointerOver),Kt.add(t,vt.out,te.pointerOut),Kt.add(t,vt.up,te.pointerUp),Kt.add(t,vt.cancel,te.pointerCancel),Kt.add(t,vt.move,te.autoScrollMove)):(Kt.add(t,"mousedown",te.selectorDown),Kt.add(t,"mousemove",te.pointerMove),Kt.add(t,"mouseup",te.pointerUp),Kt.add(t,"mouseover",te.pointerOver),Kt.add(t,"mouseout",te.pointerOut),Kt.add(t,"touchstart",te.selectorDown),Kt.add(t,"touchmove",te.pointerMove),Kt.add(t,"touchend",te.pointerUp),Kt.add(t,"touchcancel",te.pointerCancel),Kt.add(t,"mousemove",te.autoScrollMove),Kt.add(t,"touchmove",te.autoScrollMove)),
Kt.add(e,"blur",pt);try{if(e.frameElement){var n=e.frameElement.ownerDocument,r=n.defaultView;Kt.add(n,"mouseup",te.pointerEnd),Kt.add(n,"touchend",te.pointerEnd),Kt.add(n,"touchcancel",te.pointerEnd),Kt.add(n,"pointerup",te.pointerEnd),Kt.add(n,"MSPointerUp",te.pointerEnd),Kt.add(r,"blur",pt)}}catch(t){lt.windowParentError=t}Kt.add(t,"dragstart",function(t){for(var e=0;e<Dt.length;e++){var i=Dt[e];if(i.element&&(i.element===t.target||L(i.element,t.target)))return void i.checkAndPreventDefault(t,i.target,i.element)}}),Kt.useAttachEvent&&(Kt.add(t,"selectstart",function(t){var e=Dt[0];e.currentAction()&&e.checkAndPreventDefault(t)}),Kt.add(t,"dblclick",J("ie8Dblclick"))),Tt.push(t)}}function dt(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1}function ft(t,e){return dt(t,e)!==-1}function gt(t,e,n){return yt?yt(t,e,n):(At!==i&&(e=e.replace(/\/deep\//g," ")),t[Qt](e))}function mt(t,e,i){for(;r(t);){if(gt(t,e))return!0;if(t=q(t),t===i)return gt(t,e)}return!1}if(i){var vt,yt,At=function(){var t=i.document.createTextNode("");return t.ownerDocument!==i.document&&"function"==typeof i.wrap&&i.wrap(t)===t?i.wrap(i):i}(),bt=At.document,wt=At.DocumentFragment||n,_t=At.SVGElement||n,xt=At.SVGSVGElement||n,Et=At.SVGElementInstance||n,St=At.HTMLElement||At.Element,Ct=At.PointerEvent||At.MSPointerEvent,zt=Math.hypot||function(t,e){return Math.sqrt(t*t+e*e)},kt={},Tt=[],Pt=[],Dt=[],Mt=!1,Ft={},Ht={base:{accept:null,actionChecker:null,styleCursor:!0,preventDefault:"auto",origin:{x:0,y:0},deltaSource:"page",allowFrom:null,ignoreFrom:null,_context:bt,dropChecker:null},drag:{enabled:!1,manualStart:!0,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,axis:"xy"},drop:{enabled:!1,accept:null,overlap:"pointer"},resize:{enabled:!1,manualStart:!1,max:1/0,maxPerElement:1,snap:null,restrict:null,inertia:null,autoScroll:null,square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},gesture:{manualStart:!1,enabled:!1,max:1/0,maxPerElement:1,restrict:null},perAction:{manualStart:!1,max:1/0,maxPerElement:1,snap:{enabled:!1,endOnly:!1,range:1/0,targets:null,offsets:null,relativePoints:null},restrict:{enabled:!1,endOnly:!1},autoScroll:{enabled:!1,container:null,margin:60,speed:300},inertia:{enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,zeroResumeDelta:!0,smoothEndDuration:300}},_holdDuration:600},Ot={interaction:null,i:null,x:0,y:0,scroll:function(){var t,e,i,n,r=Ot.interaction.target.options[Ot.interaction.prepared.name].autoScroll,o=r.container||z(Ot.interaction.element),a=(new Date).getTime(),l=(a-Ot.prevTimeX)/1e3,h=(a-Ot.prevTimeY)/1e3;r.velocity?(t=r.velocity.x,e=r.velocity.y):t=e=r.speed,i=t*l,n=e*h,(i>=1||n>=1)&&(s(o)?o.scrollBy(Ot.x*i,Ot.y*n):o&&(o.scrollLeft+=Ot.x*i,o.scrollTop+=Ot.y*n),i>=1&&(Ot.prevTimeX=a),n>=1&&(Ot.prevTimeY=a)),Ot.isScrolling&&(Zt(Ot.i),Ot.i=$t(Ot.scroll))},isScrolling:!1,prevTimeX:0,prevTimeY:0,start:function(t){Ot.isScrolling=!0,Zt(Ot.i),Ot.interaction=t,Ot.prevTimeX=(new Date).getTime(),Ot.prevTimeY=(new Date).getTime(),Ot.i=$t(Ot.scroll)},stop:function(){Ot.isScrolling=!1,Zt(Ot.i)}},Nt="ontouchstart"in At||At.DocumentTouch&&bt instanceof At.DocumentTouch,Rt=!!Ct,It=Nt||Rt?20:10,Lt=1,Yt=0,qt=1/0,Xt=bt.all&&!At.atob?{drag:"move",resizex:"e-resize",resizey:"s-resize",resizexy:"se-resize",resizetop:"n-resize",resizeleft:"w-resize",resizebottom:"s-resize",resizeright:"e-resize",resizetopleft:"se-resize",resizebottomright:"se-resize",resizetopright:"ne-resize",resizebottomleft:"ne-resize",gesture:""}:{drag:"move",resizex:"ew-resize",resizey:"ns-resize",resizexy:"nwse-resize",resizetop:"ns-resize",resizeleft:"ew-resize",resizebottom:"ns-resize",resizeright:"ew-resize",resizetopleft:"nwse-resize",resizebottomright:"nwse-resize",resizetopright:"nesw-resize",resizebottomleft:"nesw-resize",gesture:""},Wt={drag:!0,resize:!0,gesture:!0},Bt="onmousewheel"in bt?"mousewheel":"wheel",jt=["dragstart","dragmove","draginertiastart","dragend","dragenter","dragleave","dropactivate","dropdeactivate","dropmove","drop","resizestart","resizemove","resizeinertiastart","resizeend","gesturestart","gesturemove","gestureinertiastart","gestureend","down","move","up","cancel","tap","doubletap","hold"],Vt={},Gt="Opera"==navigator.appName&&Nt&&navigator.userAgent.match("Presto"),Ut=/iP(hone|od|ad)/.test(navigator.platform)&&/OS 7[^\d]/.test(navigator.appVersion),Qt="matches"in Element.prototype?"matches":"webkitMatchesSelector"in Element.prototype?"webkitMatchesSelector":"mozMatchesSelector"in Element.prototype?"mozMatchesSelector":"oMatchesSelector"in Element.prototype?"oMatchesSelector":"msMatchesSelector",$t=i.requestAnimationFrame,Zt=i.cancelAnimationFrame,Kt=function(){function t(t,e,a,u){var d=dt(h,t),f=c[d];if(f||(f={events:{},typeCount:0},d=h.push(t)-1,c.push(f),p.push(s?{supplied:[],wrapped:[],useCount:[]}:null)),f.events[e]||(f.events[e]=[],f.typeCount++),!ft(f.events[e],a)){var g;if(s){var m=p[d],v=dt(m.supplied,a),y=m.wrapped[v]||function(e){e.immediatePropagationStopped||(e.target=e.srcElement,e.currentTarget=t,e.preventDefault=e.preventDefault||i,e.stopPropagation=e.stopPropagation||n,e.stopImmediatePropagation=e.stopImmediatePropagation||r,/mouse|click/.test(e.type)&&(e.pageX=e.clientX+z(t).document.documentElement.scrollLeft,e.pageY=e.clientY+z(t).document.documentElement.scrollTop),a(e))};g=t[o](l+e,y,Boolean(u)),v===-1?(m.supplied.push(a),m.wrapped.push(y),m.useCount.push(1)):m.useCount[v]++}else g=t[o](e,a,u||!1);return f.events[e].push(a),g}}function e(t,i,n,r){var o,u,d,f=dt(h,t),g=c[f],m=n;if(g&&g.events)if(s&&(u=p[f],d=dt(u.supplied,n),m=u.wrapped[d]),"all"!==i){if(g.events[i]){var v=g.events[i].length;if("all"===n){for(o=0;o<v;o++)e(t,i,g.events[i][o],Boolean(r));return}for(o=0;o<v;o++)if(g.events[i][o]===n){t[a](l+i,m,r||!1),g.events[i].splice(o,1),s&&u&&(u.useCount[d]--,0===u.useCount[d]&&(u.supplied.splice(d,1),u.wrapped.splice(d,1),u.useCount.splice(d,1)));break}g.events[i]&&0===g.events[i].length&&(g.events[i]=null,g.typeCount--)}g.typeCount||(c.splice(f,1),h.splice(f,1),p.splice(f,1))}else for(i in g.events)g.events.hasOwnProperty(i)&&e(t,i,"all")}function i(){this.returnValue=!1}function n(){this.cancelBubble=!0}function r(){this.cancelBubble=!0,this.immediatePropagationStopped=!0}var s="attachEvent"in At&&!("addEventListener"in At),o=s?"attachEvent":"addEventListener",a=s?"detachEvent":"removeEventListener",l=s?"on":"",h=[],c=[],p=[];return{add:t,remove:e,useAttachEvent:s,_elements:h,_targets:c,_attachedListeners:p}}(),Jt={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/};Z.prototype={getPageXY:function(t,e){return _(t,e,this)},getClientXY:function(t,e){return x(t,e,this)},setEventXY:function(t,e){return v(t,e,this)},pointerOver:function(t,e,i){function n(t,e){t&&X(t,i)&&!W(t,i,i)&&B(t,i,i)&&gt(i,e)&&(r.push(t),s.push(i))}if(!this.prepared.name&&this.mouse){var r=[],s=[],o=this.element;this.addPointer(t),!this.target||!W(this.target,this.element,i)&&B(this.target,this.element,i)||(this.target=null,this.element=null,this.matches=[],this.matchElements=[]);var a=Pt.get(i),l=a&&!W(a,i,i)&&B(a,i,i)&&st(a.getAction(t,e,this,i),a);l&&!Q(a,i,l)&&(l=null),l?(this.target=a,this.element=i,this.matches=[],this.matchElements=[]):(Pt.forEachSelector(n),this.validateSelector(t,e,r,s)?(this.matches=r,this.matchElements=s,this.pointerHover(t,e,this.matches,this.matchElements),Kt.add(i,Ct?vt.move:"mousemove",te.pointerHover)):this.target&&(L(o,i)?(this.pointerHover(t,e,this.matches,this.matchElements),Kt.add(this.element,Ct?vt.move:"mousemove",te.pointerHover)):(this.target=null,this.element=null,this.matches=[],this.matchElements=[])))}},pointerHover:function(t,e,i,n,r,s){var o=this.target;if(!this.prepared.name&&this.mouse){var a;this.setEventXY(this.curCoords,[t]),r?a=this.validateSelector(t,e,r,s):o&&(a=st(o.getAction(this.pointers[0],e,this,this.element),this.target)),o&&o.options.styleCursor&&(a?o._doc.documentElement.style.cursor=it(a):o._doc.documentElement.style.cursor="")}else this.prepared.name&&this.checkAndPreventDefault(e,o,this.element)},pointerOut:function(t,e,i){this.prepared.name||(Pt.get(i)||Kt.remove(i,Ct?vt.move:"mousemove",te.pointerHover),this.target&&this.target.options.styleCursor&&!this.interacting()&&(this.target._doc.documentElement.style.cursor=""))},selectorDown:function(t,e,i,n){function s(t,e,n){var r=yt?n.querySelectorAll(e):void 0;X(t,h)&&!W(t,h,i)&&B(t,h,i)&&gt(h,e,r)&&(a.matches.push(t),a.matchElements.push(h))}var o,a=this,l=Kt.useAttachEvent?f({},e):e,h=i,c=this.addPointer(t);if(this.holdTimers[c]=setTimeout(function(){a.pointerHold(Kt.useAttachEvent?l:t,l,i,n)},Ht._holdDuration),this.pointerIsDown=!0,this.inertiaStatus.active&&this.target.selector)for(;r(h);){if(h===this.element&&st(this.target.getAction(t,e,this,this.element),this.target).name===this.prepared.name)return Zt(this.inertiaStatus.i),this.inertiaStatus.active=!1,void this.collectEventTargets(t,e,i,"down");h=q(h)}if(this.interacting())return void this.collectEventTargets(t,e,i,"down");for(this.setEventXY(this.curCoords,[t]),this.downEvent=e;r(h)&&!o;)this.matches=[],this.matchElements=[],Pt.forEachSelector(s),o=this.validateSelector(t,e,this.matches,this.matchElements),h=q(h);return o?(this.prepared.name=o.name,this.prepared.axis=o.axis,this.prepared.edges=o.edges,this.collectEventTargets(t,e,i,"down"),this.pointerDown(t,e,i,n,o)):(this.downTimes[c]=(new Date).getTime(),this.downTargets[c]=i,g(this.downPointer,t),m(this.prevCoords,this.curCoords),this.pointerWasMoved=!1,void this.collectEventTargets(t,e,i,"down"))},pointerDown:function(t,e,i,n,r){if(!r&&!this.inertiaStatus.active&&this.pointerWasMoved&&this.prepared.name)return void this.checkAndPreventDefault(e,this.target,this.element);this.pointerIsDown=!0,this.downEvent=e;var s,o=this.addPointer(t);if(this.pointerIds.length>1&&this.target._element===this.element){var a=st(r||this.target.getAction(t,e,this,this.element),this.target);Q(this.target,this.element,a)&&(s=a),this.prepared.name=null}else if(!this.prepared.name){var l=Pt.get(n);l&&!W(l,n,i)&&B(l,n,i)&&(s=st(r||l.getAction(t,e,this,n),l,i))&&Q(l,n,s)&&(this.target=l,this.element=n)}var h=this.target,c=h&&h.options;if(!h||!r&&this.prepared.name)this.inertiaStatus.active&&n===this.element&&st(h.getAction(t,e,this,this.element),h).name===this.prepared.name&&(Zt(this.inertiaStatus.i),this.inertiaStatus.active=!1,this.checkAndPreventDefault(e,h,this.element));else{if(s=s||st(r||h.getAction(t,e,this,n),h,this.element),this.setEventXY(this.startCoords,this.pointers),!s)return;c.styleCursor&&(h._doc.documentElement.style.cursor=it(s)),this.resizeAxes="resize"===s.name?s.axis:null,"gesture"===s&&this.pointerIds.length<2&&(s=null),this.prepared.name=s.name,this.prepared.axis=s.axis,this.prepared.edges=s.edges,this.snapStatus.snappedX=this.snapStatus.snappedY=this.restrictStatus.restrictedX=this.restrictStatus.restrictedY=NaN,this.downTimes[o]=(new Date).getTime(),this.downTargets[o]=i,g(this.downPointer,t),m(this.prevCoords,this.startCoords),this.pointerWasMoved=!1,this.checkAndPreventDefault(e,h,this.element)}},setModifications:function(t,e){var i=this.target,n=!0,r=V(i,this.prepared.name)&&(!i.options[this.prepared.name].snap.endOnly||e),s=G(i,this.prepared.name)&&(!i.options[this.prepared.name].restrict.endOnly||e);return r?this.setSnapping(t):this.snapStatus.locked=!1,s?this.setRestriction(t):this.restrictStatus.restricted=!1,r&&this.snapStatus.locked&&!this.snapStatus.changed?n=s&&this.restrictStatus.restricted&&this.restrictStatus.changed:s&&this.restrictStatus.restricted&&!this.restrictStatus.changed&&(n=!1),n},setStartOffsets:function(t,e,i){var n,r,s=e.getRect(i),o=O(e,i),a=e.options[this.prepared.name].snap,l=e.options[this.prepared.name].restrict;s?(this.startOffset.left=this.startCoords.page.x-s.left,this.startOffset.top=this.startCoords.page.y-s.top,this.startOffset.right=s.right-this.startCoords.page.x,this.startOffset.bottom=s.bottom-this.startCoords.page.y,n="width"in s?s.width:s.right-s.left,r="height"in s?s.height:s.bottom-s.top):this.startOffset.left=this.startOffset.top=this.startOffset.right=this.startOffset.bottom=0,this.snapOffsets.splice(0);var h=a&&"startCoords"===a.offset?{x:this.startCoords.page.x-o.x,y:this.startCoords.page.y-o.y}:a&&a.offset||{x:0,y:0};if(s&&a&&a.relativePoints&&a.relativePoints.length)for(var c=0;c<a.relativePoints.length;c++)this.snapOffsets.push({x:this.startOffset.left-n*a.relativePoints[c].x+h.x,y:this.startOffset.top-r*a.relativePoints[c].y+h.y});else this.snapOffsets.push(h);s&&l.elementRect?(this.restrictOffset.left=this.startOffset.left-n*l.elementRect.left,this.restrictOffset.top=this.startOffset.top-r*l.elementRect.top,this.restrictOffset.right=this.startOffset.right-n*(1-l.elementRect.right),this.restrictOffset.bottom=this.startOffset.bottom-r*(1-l.elementRect.bottom)):this.restrictOffset.left=this.restrictOffset.top=this.restrictOffset.right=this.restrictOffset.bottom=0},start:function(t,e,i){this.interacting()||!this.pointerIsDown||this.pointerIds.length<("gesture"===t.name?2:1)||(dt(Dt,this)===-1&&Dt.push(this),this.prepared.name||this.setEventXY(this.startCoords),this.prepared.name=t.name,this.prepared.axis=t.axis,this.prepared.edges=t.edges,this.target=e,this.element=i,this.setStartOffsets(t.name,e,i),this.setModifications(this.startCoords.page),this.prevEvent=this[this.prepared.name+"Start"](this.downEvent))},pointerMove:function(t,e,i,n,s){if(this.inertiaStatus.active){var o=this.inertiaStatus.upCoords.page,a=this.inertiaStatus.upCoords.client,l={pageX:o.x+this.inertiaStatus.sx,pageY:o.y+this.inertiaStatus.sy,clientX:a.x+this.inertiaStatus.sx,clientY:a.y+this.inertiaStatus.sy};this.setEventXY(this.curCoords,[l])}else this.recordPointer(t),this.setEventXY(this.curCoords,this.pointers);var h,c,p=this.curCoords.page.x===this.prevCoords.page.x&&this.curCoords.page.y===this.prevCoords.page.y&&this.curCoords.client.x===this.prevCoords.client.x&&this.curCoords.client.y===this.prevCoords.client.y,u=this.mouse?0:dt(this.pointerIds,S(t));if(this.pointerIsDown&&!this.pointerWasMoved&&(h=this.curCoords.client.x-this.startCoords.client.x,c=this.curCoords.client.y-this.startCoords.client.y,this.pointerWasMoved=zt(h,c)>Lt),p||this.pointerIsDown&&!this.pointerWasMoved||(this.pointerIsDown&&clearTimeout(this.holdTimers[u]),this.collectEventTargets(t,e,i,"move")),this.pointerIsDown){if(p&&this.pointerWasMoved&&!s)return void this.checkAndPreventDefault(e,this.target,this.element);if(y(this.pointerDelta,this.prevCoords,this.curCoords),this.prepared.name){if(this.pointerWasMoved&&(!this.inertiaStatus.active||t instanceof tt&&/inertiastart/.test(t.type))){if(!this.interacting()&&(y(this.pointerDelta,this.prevCoords,this.curCoords),"drag"===this.prepared.name)){var d=Math.abs(h),f=Math.abs(c),g=this.target.options.drag.axis,v=d>f?"x":d<f?"y":"xy";if("xy"!==v&&"xy"!==g&&g!==v){this.prepared.name=null;for(var A=i;r(A);){var b=Pt.get(A);if(b&&b!==this.target&&!b.options.drag.manualStart&&"drag"===b.getAction(this.downPointer,this.downEvent,this,A).name&&j(v,b)){this.prepared.name="drag",this.target=b,this.element=A;break}A=q(A)}if(!this.prepared.name){var w=this,_=function(t,e,n){var r=yt?n.querySelectorAll(e):void 0;if(t!==w.target)return X(t,i)&&!t.options.drag.manualStart&&!W(t,A,i)&&B(t,A,i)&&gt(A,e,r)&&"drag"===t.getAction(w.downPointer,w.downEvent,w,A).name&&j(v,t)&&Q(t,A,"drag")?t:void 0};for(A=i;r(A);){var x=Pt.forEachSelector(_);if(x){this.prepared.name="drag",this.target=x,this.element=A;break}A=q(A)}}}}var E=!!this.prepared.name&&!this.interacting();if(E&&(this.target.options[this.prepared.name].manualStart||!Q(this.target,this.element,this.prepared)))return void this.stop(e);if(this.prepared.name&&this.target){E&&this.start(this.prepared,this.target,this.element);var C=this.setModifications(this.curCoords.page,s);(C||E)&&(this.prevEvent=this[this.prepared.name+"Move"](e)),this.checkAndPreventDefault(e,this.target,this.element)}}m(this.prevCoords,this.curCoords),(this.dragging||this.resizing)&&this.autoScrollMove(t)}}},dragStart:function(t){var e=new tt(this,t,"drag","start",this.element);this.dragging=!0,this.target.fire(e),this.activeDrops.dropzones=[],this.activeDrops.elements=[],this.activeDrops.rects=[],this.dynamicDrop||this.setActiveDrops(this.element);var i=this.getDropEvents(t,e);return i.activate&&this.fireActiveDrops(i.activate),e},dragMove:function(t){var e=this.target,i=new tt(this,t,"drag","move",this.element),n=this.element,r=this.getDrop(i,t,n);this.dropTarget=r.dropzone,this.dropElement=r.element;var s=this.getDropEvents(t,i);return e.fire(i),s.leave&&this.prevDropTarget.fire(s.leave),s.enter&&this.dropTarget.fire(s.enter),s.move&&this.dropTarget.fire(s.move),this.prevDropTarget=this.dropTarget,this.prevDropElement=this.dropElement,i},resizeStart:function(t){var e=new tt(this,t,"resize","start",this.element);if(this.prepared.edges){var i=this.target.getRect(this.element);if(this.target.options.resize.square||this.target.options.resize.preserveAspectRatio){var n=f({},this.prepared.edges);n.top=n.top||n.left&&!n.bottom,n.left=n.left||n.top&&!n.right,n.bottom=n.bottom||n.right&&!n.top,n.right=n.right||n.bottom&&!n.left,this.prepared._linkedEdges=n}else this.prepared._linkedEdges=null;this.target.options.resize.preserveAspectRatio&&(this.resizeStartAspectRatio=i.width/i.height),this.resizeRects={start:i,current:f({},i),restricted:f({},i),previous:f({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},e.rect=this.resizeRects.restricted,e.deltaRect=this.resizeRects.delta}return this.target.fire(e),this.resizing=!0,e},resizeMove:function(t){var e=new tt(this,t,"resize","move",this.element),i=this.prepared.edges,n=this.target.options.resize.invert,r="reposition"===n||"negate"===n;if(i){var s=e.dx,o=e.dy,a=this.resizeRects.start,l=this.resizeRects.current,h=this.resizeRects.restricted,c=this.resizeRects.delta,p=f(this.resizeRects.previous,h),u=i;if(this.target.options.resize.preserveAspectRatio){var d=this.resizeStartAspectRatio;i=this.prepared._linkedEdges,u.left&&u.bottom||u.right&&u.top?o=-s/d:u.left||u.right?o=s/d:(u.top||u.bottom)&&(s=o*d)}else this.target.options.resize.square&&(i=this.prepared._linkedEdges,u.left&&u.bottom||u.right&&u.top?o=-s:u.left||u.right?o=s:(u.top||u.bottom)&&(s=o));if(i.top&&(l.top+=o),i.bottom&&(l.bottom+=o),i.left&&(l.left+=s),i.right&&(l.right+=s),r){if(f(h,l),"reposition"===n){var g;h.top>h.bottom&&(g=h.top,h.top=h.bottom,h.bottom=g),h.left>h.right&&(g=h.left,h.left=h.right,h.right=g)}}else h.top=Math.min(l.top,a.bottom),h.bottom=Math.max(l.bottom,a.top),h.left=Math.min(l.left,a.right),h.right=Math.max(l.right,a.left);h.width=h.right-h.left,h.height=h.bottom-h.top;for(var m in h)c[m]=h[m]-p[m];e.edges=this.prepared.edges,e.rect=h,e.deltaRect=c}return this.target.fire(e),e},gestureStart:function(t){var e=new tt(this,t,"gesture","start",this.element);return e.ds=0,this.gesture.startDistance=this.gesture.prevDistance=e.distance,this.gesture.startAngle=this.gesture.prevAngle=e.angle,this.gesture.scale=1,this.gesturing=!0,this.target.fire(e),e},gestureMove:function(t){if(!this.pointerIds.length)return this.prevEvent;var e;return e=new tt(this,t,"gesture","move",this.element),e.ds=e.scale-this.gesture.scale,this.target.fire(e),this.gesture.prevAngle=e.angle,this.gesture.prevDistance=e.distance,e.scale===1/0||null===e.scale||void 0===e.scale||isNaN(e.scale)||(this.gesture.scale=e.scale),e},pointerHold:function(t,e,i){this.collectEventTargets(t,e,i,"hold")},pointerUp:function(t,e,i,n){var r=this.mouse?0:dt(this.pointerIds,S(t));clearTimeout(this.holdTimers[r]),this.collectEventTargets(t,e,i,"up"),this.collectEventTargets(t,e,i,"tap"),this.pointerEnd(t,e,i,n),this.removePointer(t)},pointerCancel:function(t,e,i,n){var r=this.mouse?0:dt(this.pointerIds,S(t));clearTimeout(this.holdTimers[r]),this.collectEventTargets(t,e,i,"cancel"),this.pointerEnd(t,e,i,n),this.removePointer(t)},ie8Dblclick:function(t,e,i){this.prevTap&&e.clientX===this.prevTap.clientX&&e.clientY===this.prevTap.clientY&&i===this.prevTap.target&&(this.downTargets[0]=i,this.downTimes[0]=(new Date).getTime(),this.collectEventTargets(t,e,i,"tap"))},pointerEnd:function(t,e,i,n){var r,s=this.target,o=s&&s.options,a=o&&this.prepared.name&&o[this.prepared.name].inertia,l=this.inertiaStatus;if(this.interacting()){if(l.active&&!l.ending)return;var h,c,p=(new Date).getTime(),u=!1,d=!1,g=!1,v=V(s,this.prepared.name)&&o[this.prepared.name].snap.endOnly,y=G(s,this.prepared.name)&&o[this.prepared.name].restrict.endOnly,A=0,b=0;if(h=this.dragging?"x"===o.drag.axis?Math.abs(this.pointerDelta.client.vx):"y"===o.drag.axis?Math.abs(this.pointerDelta.client.vy):this.pointerDelta.client.speed:this.pointerDelta.client.speed,u=a&&a.enabled&&"gesture"!==this.prepared.name&&e!==l.startEvent,d=u&&p-this.curCoords.timeStamp<50&&h>a.minSpeed&&h>a.endSpeed,u&&!d&&(v||y)){var w={};w.snap=w.restrict=w,v&&(this.setSnapping(this.curCoords.page,w),w.locked&&(A+=w.dx,b+=w.dy)),y&&(this.setRestriction(this.curCoords.page,w),w.restricted&&(A+=w.dx,b+=w.dy)),(A||b)&&(g=!0)}if(d||g){if(m(l.upCoords,this.curCoords),this.pointers[0]=l.startEvent=c=new tt(this,e,this.prepared.name,"inertiastart",this.element),l.t0=p,s.fire(l.startEvent),d){l.vx0=this.pointerDelta.client.vx,l.vy0=this.pointerDelta.client.vy,l.v0=h,this.calcInertia(l);var _,x=f({},this.curCoords.page),E=O(s,this.element);if(x.x=x.x+l.xe-E.x,x.y=x.y+l.ye-E.y,_={useStatusXY:!0,x:x.x,y:x.y,dx:0,dy:0,snap:null},_.snap=_,A=b=0,v){var S=this.setSnapping(this.curCoords.page,_);S.locked&&(A+=S.dx,b+=S.dy)}if(y){var C=this.setRestriction(this.curCoords.page,_);C.restricted&&(A+=C.dx,b+=C.dy)}l.modifiedXe+=A,l.modifiedYe+=b,l.i=$t(this.boundInertiaFrame)}else l.smoothEnd=!0,l.xe=A,l.ye=b,l.sx=l.sy=0,l.i=$t(this.boundSmoothEndFrame);return void(l.active=!0)}(v||y)&&this.pointerMove(t,e,i,n,!0)}if(this.dragging){r=new tt(this,e,"drag","end",this.element);var z=this.element,k=this.getDrop(r,e,z);this.dropTarget=k.dropzone,this.dropElement=k.element;var T=this.getDropEvents(e,r);T.leave&&this.prevDropTarget.fire(T.leave),T.enter&&this.dropTarget.fire(T.enter),T.drop&&this.dropTarget.fire(T.drop),T.deactivate&&this.fireActiveDrops(T.deactivate),s.fire(r)}else this.resizing?(r=new tt(this,e,"resize","end",this.element),s.fire(r)):this.gesturing&&(r=new tt(this,e,"gesture","end",this.element),s.fire(r));this.stop(e)},collectDrops:function(t){var e,i=[],n=[];for(t=t||this.element,e=0;e<Pt.length;e++)if(Pt[e].options.drop.enabled){var s=Pt[e],o=s.options.drop.accept;if(!(r(o)&&o!==t||u(o)&&!gt(t,o)))for(var a=s.selector?s._context.querySelectorAll(s.selector):[s._element],l=0,h=a.length;l<h;l++){var c=a[l];c!==t&&(i.push(s),n.push(c))}}return{dropzones:i,elements:n}},fireActiveDrops:function(t){var e,i,n,r;for(e=0;e<this.activeDrops.dropzones.length;e++)i=this.activeDrops.dropzones[e],n=this.activeDrops.elements[e],n!==r&&(t.target=n,i.fire(t)),r=n},setActiveDrops:function(t){var e=this.collectDrops(t,!0);this.activeDrops.dropzones=e.dropzones,this.activeDrops.elements=e.elements,this.activeDrops.rects=[];for(var i=0;i<this.activeDrops.dropzones.length;i++)this.activeDrops.rects[i]=this.activeDrops.dropzones[i].getRect(this.activeDrops.elements[i])},getDrop:function(t,e,i){var n=[];Mt&&this.setActiveDrops(i);for(var r=0;r<this.activeDrops.dropzones.length;r++){var s=this.activeDrops.dropzones[r],o=this.activeDrops.elements[r],a=this.activeDrops.rects[r];n.push(s.dropCheck(t,e,this.target,i,o,a)?o:null)}var l=$(n),h=this.activeDrops.dropzones[l]||null,c=this.activeDrops.elements[l]||null;return{dropzone:h,element:c}},getDropEvents:function(t,e){var i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return this.dropElement!==this.prevDropElement&&(this.prevDropTarget&&(i.leave={target:this.prevDropElement,dropzone:this.prevDropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragleave"},e.dragLeave=this.prevDropElement,e.prevDropzone=this.prevDropTarget),this.dropTarget&&(i.enter={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dragenter"},e.dragEnter=this.dropElement,e.dropzone=this.dropTarget)),"dragend"===e.type&&this.dropTarget&&(i.drop={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"drop"},e.dropzone=this.dropTarget),"dragstart"===e.type&&(i.activate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropactivate"}),"dragend"===e.type&&(i.deactivate={target:null,dropzone:null,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,timeStamp:e.timeStamp,type:"dropdeactivate"}),"dragmove"===e.type&&this.dropTarget&&(i.move={target:this.dropElement,dropzone:this.dropTarget,relatedTarget:e.target,draggable:e.interactable,dragEvent:e,interaction:this,dragmove:e,timeStamp:e.timeStamp,type:"dropmove"},e.dropzone=this.dropTarget),i},currentAction:function(){return this.dragging&&"drag"||this.resizing&&"resize"||this.gesturing&&"gesture"||null},interacting:function(){return this.dragging||this.resizing||this.gesturing},clearTargets:function(){this.target=this.element=null,this.dropTarget=this.dropElement=this.prevDropTarget=this.prevDropElement=null},stop:function(t){if(this.interacting()){Ot.stop(),this.matches=[],this.matchElements=[];var e=this.target;e.options.styleCursor&&(e._doc.documentElement.style.cursor=""),t&&h(t.preventDefault)&&this.checkAndPreventDefault(t,e,this.element),this.dragging&&(this.activeDrops.dropzones=this.activeDrops.elements=this.activeDrops.rects=null)}this.clearTargets(),this.pointerIsDown=this.snapStatus.locked=this.dragging=this.resizing=this.gesturing=!1,this.prepared.name=this.prevEvent=null,this.inertiaStatus.resumeDx=this.inertiaStatus.resumeDy=0;for(var i=0;i<this.pointers.length;i++)dt(this.pointerIds,S(this.pointers[i]))===-1&&this.pointers.splice(i,1)},inertiaFrame:function(){var t=this.inertiaStatus,e=this.target.options[this.prepared.name].inertia,i=e.resistance,n=(new Date).getTime()/1e3-t.t0;if(n<t.te){var r=1-(Math.exp(-i*n)-t.lambda_v0)/t.one_ve_v0;if(t.modifiedXe===t.xe&&t.modifiedYe===t.ye)t.sx=t.xe*r,t.sy=t.ye*r;else{var s=R(0,0,t.xe,t.ye,t.modifiedXe,t.modifiedYe,r);t.sx=s.x,t.sy=s.y}this.pointerMove(t.startEvent,t.startEvent),t.i=$t(this.boundInertiaFrame)}else t.ending=!0,t.sx=t.modifiedXe,t.sy=t.modifiedYe,this.pointerMove(t.startEvent,t.startEvent),this.pointerEnd(t.startEvent,t.startEvent),t.active=t.ending=!1},smoothEndFrame:function(){var t=this.inertiaStatus,e=(new Date).getTime()-t.t0,i=this.target.options[this.prepared.name].inertia.smoothEndDuration;e<i?(t.sx=I(e,0,t.xe,i),t.sy=I(e,0,t.ye,i),this.pointerMove(t.startEvent,t.startEvent),t.i=$t(this.boundSmoothEndFrame)):(t.ending=!0,t.sx=t.xe,t.sy=t.ye,this.pointerMove(t.startEvent,t.startEvent),this.pointerEnd(t.startEvent,t.startEvent),t.smoothEnd=t.active=t.ending=!1)},addPointer:function(t){var e=S(t),i=this.mouse?0:dt(this.pointerIds,e);return i===-1&&(i=this.pointerIds.length),this.pointerIds[i]=e,this.pointers[i]=t,i},removePointer:function(t){var e=S(t),i=this.mouse?0:dt(this.pointerIds,e);i!==-1&&(this.pointers.splice(i,1),this.pointerIds.splice(i,1),this.downTargets.splice(i,1),this.downTimes.splice(i,1),this.holdTimers.splice(i,1))},recordPointer:function(t){var e=this.mouse?0:dt(this.pointerIds,S(t));e!==-1&&(this.pointers[e]=t)},collectEventTargets:function(t,e,i,n){function s(t,e,s){var o=yt?s.querySelectorAll(e):void 0;t._iEvents[n]&&r(h)&&X(t,h)&&!W(t,h,i)&&B(t,h,i)&&gt(h,e,o)&&(a.push(t),l.push(h))}var o=this.mouse?0:dt(this.pointerIds,S(t));if("tap"!==n||!this.pointerWasMoved&&this.downTargets[o]&&this.downTargets[o]===i){for(var a=[],l=[],h=i;h;)lt.isSet(h)&&lt(h)._iEvents[n]&&(a.push(lt(h)),l.push(h)),Pt.forEachSelector(s),h=q(h);(a.length||"tap"===n)&&this.firePointers(t,e,i,a,l,n)}},firePointers:function(t,e,i,n,r,s){var o,a,l,h=this.mouse?0:dt(this.pointerIds,S(t)),c={};for("doubletap"===s?c=t:(g(c,e),e!==t&&g(c,t),c.preventDefault=et,c.stopPropagation=tt.prototype.stopPropagation,c.stopImmediatePropagation=tt.prototype.stopImmediatePropagation,c.interaction=this,c.timeStamp=(new Date).getTime(),c.originalEvent=e,c.originalPointer=t,c.type=s,c.pointerId=S(t),c.pointerType=this.mouse?"mouse":Rt?u(t.pointerType)?t.pointerType:[,,"touch","pen","mouse"][t.pointerType]:"touch"),"tap"===s&&(c.dt=c.timeStamp-this.downTimes[h],a=c.timeStamp-this.tapTime,l=!!(this.prevTap&&"doubletap"!==this.prevTap.type&&this.prevTap.target===c.target&&a<500),c.double=l,this.tapTime=c.timeStamp),o=0;o<n.length&&(c.currentTarget=r[o],c.interactable=n[o],n[o].fire(c),!(c.immediatePropagationStopped||c.propagationStopped&&r[o+1]!==c.currentTarget));o++);if(l){var p={};f(p,c),p.dt=a,p.type="doubletap",this.collectEventTargets(p,e,i,"doubletap"),this.prevTap=p}else"tap"===s&&(this.prevTap=c)},validateSelector:function(t,e,i,n){for(var r=0,s=i.length;r<s;r++){var o=i[r],a=n[r],l=st(o.getAction(t,e,this,a),o);if(l&&Q(o,a,l))return this.target=o,this.element=a,l}},setSnapping:function(t,e){var i,n,r,s=this.target.options[this.prepared.name].snap,o=[];if(e=e||this.snapStatus,e.useStatusXY)n={x:e.x,y:e.y};else{var a=O(this.target,this.element);n=f({},t),n.x-=a.x,n.y-=a.y}e.realX=n.x,e.realY=n.y,n.x=n.x-this.inertiaStatus.resumeDx,n.y=n.y-this.inertiaStatus.resumeDy;for(var l=s.targets?s.targets.length:0,p=0;p<this.snapOffsets.length;p++){var u={x:n.x-this.snapOffsets[p].x,y:n.y-this.snapOffsets[p].y};for(r=0;r<l;r++)i=h(s.targets[r])?s.targets[r](u.x,u.y,this):s.targets[r],i&&o.push({x:c(i.x)?i.x+this.snapOffsets[p].x:u.x,y:c(i.y)?i.y+this.snapOffsets[p].y:u.y,range:c(i.range)?i.range:s.range})}var d={target:null,inRange:!1,distance:0,range:0,dx:0,dy:0};for(r=0,l=o.length;r<l;r++){i=o[r];var g=i.range,m=i.x-n.x,v=i.y-n.y,y=zt(m,v),A=y<=g;g===1/0&&d.inRange&&d.range!==1/0&&(A=!1),d.target&&!(A?d.inRange&&g!==1/0?y/g<d.distance/d.range:g===1/0&&d.range!==1/0||y<d.distance:!d.inRange&&y<d.distance)||(g===1/0&&(A=!0),d.target=i,d.distance=y,d.range=g,d.inRange=A,d.dx=m,d.dy=v,e.range=g)}var b;return d.target?(b=e.snappedX!==d.target.x||e.snappedY!==d.target.y,e.snappedX=d.target.x,e.snappedY=d.target.y):(b=!0,e.snappedX=NaN,e.snappedY=NaN),e.dx=d.dx,e.dy=d.dy,e.changed=b||d.inRange&&!e.locked,e.locked=d.inRange,e},setRestriction:function(t,e){var i,n=this.target,s=n&&n.options[this.prepared.name].restrict,o=s&&s.restriction;if(!o)return e;e=e||this.restrictStatus,i=i=e.useStatusXY?{x:e.x,y:e.y}:f({},t),e.snap&&e.snap.locked&&(i.x+=e.snap.dx||0,i.y+=e.snap.dy||0),i.x-=this.inertiaStatus.resumeDx,i.y-=this.inertiaStatus.resumeDy,e.dx=0,e.dy=0,e.restricted=!1;var a,l,c;return u(o)&&(o="parent"===o?q(this.element):"self"===o?n.getRect(this.element):Y(this.element,o),!o)?e:(h(o)&&(o=o(i.x,i.y,this.element)),r(o)&&(o=T(o)),a=o,o?"x"in o&&"y"in o?(l=Math.max(Math.min(a.x+a.width-this.restrictOffset.right,i.x),a.x+this.restrictOffset.left),c=Math.max(Math.min(a.y+a.height-this.restrictOffset.bottom,i.y),a.y+this.restrictOffset.top)):(l=Math.max(Math.min(a.right-this.restrictOffset.right,i.x),a.left+this.restrictOffset.left),c=Math.max(Math.min(a.bottom-this.restrictOffset.bottom,i.y),a.top+this.restrictOffset.top)):(l=i.x,c=i.y),e.dx=l-i.x,e.dy=c-i.y,e.changed=e.restrictedX!==l||e.restrictedY!==c,e.restricted=!(!e.dx&&!e.dy),e.restrictedX=l,e.restrictedY=c,e)},checkAndPreventDefault:function(t,e,i){if(e=e||this.target){var n=e.options,r=n.preventDefault;if("auto"===r&&i&&!/^(input|select|textarea)$/i.test(t.target.nodeName)){if(/down|start/i.test(t.type)&&"drag"===this.prepared.name&&"xy"!==n.drag.axis)return;if(n[this.prepared.name]&&n[this.prepared.name].manualStart&&!this.interacting())return;return void t.preventDefault()}return"always"===r?void t.preventDefault():void 0;
}},calcInertia:function(t){var e=this.target.options[this.prepared.name].inertia,i=e.resistance,n=-Math.log(e.endSpeed/t.v0)/i;t.x0=this.prevEvent.pageX,t.y0=this.prevEvent.pageY,t.t0=t.startEvent.timeStamp/1e3,t.sx=t.sy=0,t.modifiedXe=t.xe=(t.vx0-n)/i,t.modifiedYe=t.ye=(t.vy0-n)/i,t.te=n,t.lambda_v0=i/t.v0,t.one_ve_v0=1-e.endSpeed/t.v0},autoScrollMove:function(t){if(this.interacting()&&U(this.target,this.prepared.name)){if(this.inertiaStatus.active)return void(Ot.x=Ot.y=0);var e,i,n,r,o=this.target.options[this.prepared.name].autoScroll,a=o.container||z(this.element);if(s(a))r=t.clientX<Ot.margin,e=t.clientY<Ot.margin,i=t.clientX>a.innerWidth-Ot.margin,n=t.clientY>a.innerHeight-Ot.margin;else{var l=k(a);r=t.clientX<l.left+Ot.margin,e=t.clientY<l.top+Ot.margin,i=t.clientX>l.right-Ot.margin,n=t.clientY>l.bottom-Ot.margin}Ot.x=i?1:r?-1:0,Ot.y=n?1:e?-1:0,Ot.isScrolling||(Ot.margin=o.margin,Ot.speed=o.speed,Ot.start(this))}},_updateEventTargets:function(t,e){this._eventTarget=t,this._curEventTarget=e}},tt.prototype={preventDefault:n,stopImmediatePropagation:function(){this.immediatePropagationStopped=this.propagationStopped=!0},stopPropagation:function(){this.propagationStopped=!0}};for(var te={},ee=["dragStart","dragMove","resizeStart","resizeMove","gestureStart","gestureMove","pointerOver","pointerOut","pointerHover","selectorDown","pointerDown","pointerMove","pointerUp","pointerCancel","pointerEnd","addPointer","removePointer","recordPointer","autoScrollMove"],ie=0,ne=ee.length;ie<ne;ie++){var re=ee[ie];te[re]=J(re)}Pt.indexOfElement=function(t,e){e=e||bt;for(var i=0;i<this.length;i++){var n=this[i];if(n.selector===t&&n._context===e||!n.selector&&n._element===t)return i}return-1},Pt.get=function(t,e){return this[this.indexOfElement(t,e&&e.context)]},Pt.forEachSelector=function(t){for(var e=0;e<this.length;e++){var i=this[e];if(i.selector){var n=t(i,i.selector,i._context,e,this);if(void 0!==n)return n}}},ht.prototype={setOnEvents:function(t,e){return"drop"===t?(h(e.ondrop)&&(this.ondrop=e.ondrop),h(e.ondropactivate)&&(this.ondropactivate=e.ondropactivate),h(e.ondropdeactivate)&&(this.ondropdeactivate=e.ondropdeactivate),h(e.ondragenter)&&(this.ondragenter=e.ondragenter),h(e.ondragleave)&&(this.ondragleave=e.ondragleave),h(e.ondropmove)&&(this.ondropmove=e.ondropmove)):(t="on"+t,h(e.onstart)&&(this[t+"start"]=e.onstart),h(e.onmove)&&(this[t+"move"]=e.onmove),h(e.onend)&&(this[t+"end"]=e.onend),h(e.oninertiastart)&&(this[t+"inertiastart"]=e.oninertiastart)),this},draggable:function(t){return l(t)?(this.options.drag.enabled=t.enabled!==!1,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.drag.axis=t.axis:null===t.axis&&delete this.options.drag.axis,this):p(t)?(this.options.drag.enabled=t,this):this.options.drag},setPerAction:function(t,e){for(var i in e)i in Ht[t]&&(l(e[i])?(this.options[t][i]=f(this.options[t][i]||{},e[i]),l(Ht.perAction[i])&&"enabled"in Ht.perAction[i]&&(this.options[t][i].enabled=e[i].enabled!==!1)):p(e[i])&&l(Ht.perAction[i])?this.options[t][i].enabled=e[i]:void 0!==e[i]&&(this.options[t][i]=e[i]))},dropzone:function(t){return l(t)?(this.options.drop.enabled=t.enabled!==!1,this.setOnEvents("drop",t),/^(pointer|center)$/.test(t.overlap)?this.options.drop.overlap=t.overlap:c(t.overlap)&&(this.options.drop.overlap=Math.max(Math.min(1,t.overlap),0)),"accept"in t&&(this.options.drop.accept=t.accept),"checker"in t&&(this.options.drop.checker=t.checker),this):p(t)?(this.options.drop.enabled=t,this):this.options.drop},dropCheck:function(t,e,i,n,r,s){var o=!1;if(!(s=s||this.getRect(r)))return!!this.options.drop.checker&&this.options.drop.checker(t,e,o,this,r,i,n);var a=this.options.drop.overlap;if("pointer"===a){var l,h,p=_(t),u=O(i,n);p.x+=u.x,p.y+=u.y,l=p.x>s.left&&p.x<s.right,h=p.y>s.top&&p.y<s.bottom,o=l&&h}var d=i.getRect(n);if("center"===a){var f=d.left+d.width/2,g=d.top+d.height/2;o=f>=s.left&&f<=s.right&&g>=s.top&&g<=s.bottom}if(c(a)){var m=Math.max(0,Math.min(s.right,d.right)-Math.max(s.left,d.left))*Math.max(0,Math.min(s.bottom,d.bottom)-Math.max(s.top,d.top)),v=m/(d.width*d.height);o=v>=a}return this.options.drop.checker&&(o=this.options.drop.checker(t,e,o,this,r,i,n)),o},dropChecker:function(t){return h(t)?(this.options.drop.checker=t,this):null===t?(delete this.options.getRect,this):this.options.drop.checker},accept:function(t){return r(t)?(this.options.drop.accept=t,this):d(t)?(this.options.drop.accept=t,this):null===t?(delete this.options.drop.accept,this):this.options.drop.accept},resizable:function(t){return l(t)?(this.options.resize.enabled=t.enabled!==!1,this.setPerAction("resize",t),this.setOnEvents("resize",t),/^x$|^y$|^xy$/.test(t.axis)?this.options.resize.axis=t.axis:null===t.axis&&(this.options.resize.axis=Ht.resize.axis),p(t.preserveAspectRatio)?this.options.resize.preserveAspectRatio=t.preserveAspectRatio:p(t.square)&&(this.options.resize.square=t.square),this):p(t)?(this.options.resize.enabled=t,this):this.options.resize},squareResize:function(t){return p(t)?(this.options.resize.square=t,this):null===t?(delete this.options.resize.square,this):this.options.resize.square},gesturable:function(t){return l(t)?(this.options.gesture.enabled=t.enabled!==!1,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):p(t)?(this.options.gesture.enabled=t,this):this.options.gesture},autoScroll:function(t){return l(t)?t=f({actions:["drag","resize"]},t):p(t)&&(t={actions:["drag","resize"],enabled:t}),this.setOptions("autoScroll",t)},snap:function(t){var e=this.setOptions("snap",t);return e===this?this:e.drag},setOptions:function(t,e){var i,n=e&&a(e.actions)?e.actions:["drag"];if(l(e)||p(e)){for(i=0;i<n.length;i++){var r=/resize/.test(n[i])?"resize":n[i];if(l(this.options[r])){var s=this.options[r][t];l(e)?(f(s,e),s.enabled=e.enabled!==!1,"snap"===t&&("grid"===s.mode?s.targets=[lt.createSnapGrid(f({offset:s.gridOffset||{x:0,y:0}},s.grid||{}))]:"anchor"===s.mode?s.targets=s.anchors:"path"===s.mode&&(s.targets=s.paths),"elementOrigin"in e&&(s.relativePoints=[e.elementOrigin]))):p(e)&&(s.enabled=e)}}return this}var o={},h=["drag","resize","gesture"];for(i=0;i<h.length;i++)t in Ht[h[i]]&&(o[h[i]]=this.options[h[i]][t]);return o},inertia:function(t){var e=this.setOptions("inertia",t);return e===this?this:e.drag},getAction:function(t,e,i,n){var r=this.defaultActionChecker(t,i,n);return this.options.actionChecker?this.options.actionChecker(t,e,r,this,n,i):r},defaultActionChecker:rt,actionChecker:function(t){return h(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker},getRect:function(t){return t=t||this._element,this.selector&&!r(t)&&(t=this._context.querySelector(this.selector)),T(t)},rectChecker:function(t){return h(t)?(this.getRect=t,this):null===t?(delete this.options.getRect,this):this.getRect},styleCursor:function(t){return p(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor},preventDefault:function(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):p(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault},origin:function(t){return d(t)?(this.options.origin=t,this):l(t)?(this.options.origin=t,this):this.options.origin},deltaSource:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource},restrict:function(t){if(!l(t))return this.setOptions("restrict",t);for(var e,i=["drag","resize","gesture"],n=0;n<i.length;n++){var r=i[n];if(r in t){var s=f({actions:[r],restriction:t[r]},t);e=this.setOptions("restrict",s)}}return e},context:function(){return this._context},_context:bt,ignoreFrom:function(t){return d(t)?(this.options.ignoreFrom=t,this):r(t)?(this.options.ignoreFrom=t,this):this.options.ignoreFrom},allowFrom:function(t){return d(t)?(this.options.allowFrom=t,this):r(t)?(this.options.allowFrom=t,this):this.options.allowFrom},element:function(){return this._element},fire:function(t){if(!t||!t.type||!ft(jt,t.type))return this;var e,i,n,r="on"+t.type,s="";if(t.type in this._iEvents)for(e=this._iEvents[t.type],i=0,n=e.length;i<n&&!t.immediatePropagationStopped;i++)s=e[i].name,e[i](t);if(h(this[r])&&(s=this[r].name,this[r](t)),t.type in Vt&&(e=Vt[t.type]))for(i=0,n=e.length;i<n&&!t.immediatePropagationStopped;i++)s=e[i].name,e[i](t);return this},on:function(t,e,i){var n;if(u(t)&&t.search(" ")!==-1&&(t=t.trim().split(/ +/)),a(t)){for(n=0;n<t.length;n++)this.on(t[n],e,i);return this}if(l(t)){for(var r in t)this.on(r,t[r],e);return this}if("wheel"===t&&(t=Bt),i=!!i,ft(jt,t))t in this._iEvents?this._iEvents[t].push(e):this._iEvents[t]=[e];else if(this.selector){if(!Ft[t])for(Ft[t]={selectors:[],contexts:[],listeners:[]},n=0;n<Tt.length;n++)Kt.add(Tt[n],t,ot),Kt.add(Tt[n],t,at,!0);var s,o=Ft[t];for(s=o.selectors.length-1;s>=0&&(o.selectors[s]!==this.selector||o.contexts[s]!==this._context);s--);s===-1&&(s=o.selectors.length,o.selectors.push(this.selector),o.contexts.push(this._context),o.listeners.push([])),o.listeners[s].push([e,i])}else Kt.add(this._element,t,e,i);return this},off:function(t,e,i){var n;if(u(t)&&t.search(" ")!==-1&&(t=t.trim().split(/ +/)),a(t)){for(n=0;n<t.length;n++)this.off(t[n],e,i);return this}if(l(t)){for(var r in t)this.off(r,t[r],e);return this}var s,o=-1;if(i=!!i,"wheel"===t&&(t=Bt),ft(jt,t))s=this._iEvents[t],s&&(o=dt(s,e))!==-1&&this._iEvents[t].splice(o,1);else if(this.selector){var h=Ft[t],c=!1;if(!h)return this;for(o=h.selectors.length-1;o>=0;o--)if(h.selectors[o]===this.selector&&h.contexts[o]===this._context){var p=h.listeners[o];for(n=p.length-1;n>=0;n--){var d=p[n][0],f=p[n][1];if(d===e&&f===i){p.splice(n,1),p.length||(h.selectors.splice(o,1),h.contexts.splice(o,1),h.listeners.splice(o,1),Kt.remove(this._context,t,ot),Kt.remove(this._context,t,at,!0),h.selectors.length||(Ft[t]=null)),c=!0;break}}if(c)break}}else Kt.remove(this._element,t,e,i);return this},set:function(t){l(t)||(t={}),this.options=f({},Ht.base);var e,i=["drag","drop","resize","gesture"],n=["draggable","dropzone","resizable","gesturable"],r=f(f({},Ht.perAction),t[s]||{});for(e=0;e<i.length;e++){var s=i[e];this.options[s]=f({},Ht[s]),this.setPerAction(s,r),this[n[e]](t[s])}var o=["accept","actionChecker","allowFrom","deltaSource","dropChecker","ignoreFrom","origin","preventDefault","rectChecker","styleCursor"];for(e=0,ne=o.length;e<ne;e++){var a=o[e];this.options[a]=Ht.base[a],a in t&&this[a](t[a])}return this},unset:function(){if(Kt.remove(this._element,"all"),u(this.selector))for(var t in Ft)for(var e=Ft[t],i=0;i<e.selectors.length;i++){e.selectors[i]===this.selector&&e.contexts[i]===this._context&&(e.selectors.splice(i,1),e.contexts.splice(i,1),e.listeners.splice(i,1),e.selectors.length||(Ft[t]=null)),Kt.remove(this._context,t,ot),Kt.remove(this._context,t,at,!0);break}else Kt.remove(this,"all"),this.options.styleCursor&&(this._element.style.cursor="");return this.dropzone(!1),Pt.splice(dt(Pt,this),1),lt}},ht.prototype.snap=ct(ht.prototype.snap,"Interactable#snap is deprecated. See the new documentation for snapping at http://interactjs.io/docs/snapping"),ht.prototype.restrict=ct(ht.prototype.restrict,"Interactable#restrict is deprecated. See the new documentation for resticting at http://interactjs.io/docs/restriction"),ht.prototype.inertia=ct(ht.prototype.inertia,"Interactable#inertia is deprecated. See the new documentation for inertia at http://interactjs.io/docs/inertia"),ht.prototype.autoScroll=ct(ht.prototype.autoScroll,"Interactable#autoScroll is deprecated. See the new documentation for autoScroll at http://interactjs.io/docs/#autoscroll"),ht.prototype.squareResize=ct(ht.prototype.squareResize,"Interactable#squareResize is deprecated. See http://interactjs.io/docs/#resize-square"),ht.prototype.accept=ct(ht.prototype.accept,"Interactable#accept is deprecated. use Interactable#dropzone({ accept: target }) instead"),ht.prototype.dropChecker=ct(ht.prototype.dropChecker,"Interactable#dropChecker is deprecated. use Interactable#dropzone({ dropChecker: checkerFunction }) instead"),ht.prototype.context=ct(ht.prototype.context,"Interactable#context as a method is deprecated. It will soon be a DOM Node instead"),lt.isSet=function(t,e){return Pt.indexOfElement(t,e&&e.context)!==-1},lt.on=function(t,e,i){if(u(t)&&t.search(" ")!==-1&&(t=t.trim().split(/ +/)),a(t)){for(var n=0;n<t.length;n++)lt.on(t[n],e,i);return lt}if(l(t)){for(var r in t)lt.on(r,t[r],e);return lt}return ft(jt,t)?Vt[t]?Vt[t].push(e):Vt[t]=[e]:Kt.add(bt,t,e,i),lt},lt.off=function(t,e,i){if(u(t)&&t.search(" ")!==-1&&(t=t.trim().split(/ +/)),a(t)){for(var n=0;n<t.length;n++)lt.off(t[n],e,i);return lt}if(l(t)){for(var r in t)lt.off(r,t[r],e);return lt}if(ft(jt,t)){var s;t in Vt&&(s=dt(Vt[t],e))!==-1&&Vt[t].splice(s,1)}else Kt.remove(bt,t,e,i);return lt},lt.enableDragging=ct(function(t){return null!==t&&void 0!==t?(Wt.drag=t,lt):Wt.drag},"interact.enableDragging is deprecated and will soon be removed."),lt.enableResizing=ct(function(t){return null!==t&&void 0!==t?(Wt.resize=t,lt):Wt.resize},"interact.enableResizing is deprecated and will soon be removed."),lt.enableGesturing=ct(function(t){return null!==t&&void 0!==t?(Wt.gesture=t,lt):Wt.gesture},"interact.enableGesturing is deprecated and will soon be removed."),lt.eventTypes=jt,lt.debug=function(){var t=Dt[0]||new Z;return{interactions:Dt,target:t.target,dragging:t.dragging,resizing:t.resizing,gesturing:t.gesturing,prepared:t.prepared,matches:t.matches,matchElements:t.matchElements,prevCoords:t.prevCoords,startCoords:t.startCoords,pointerIds:t.pointerIds,pointers:t.pointers,addPointer:te.addPointer,removePointer:te.removePointer,recordPointer:te.recordPointer,snap:t.snapStatus,restrict:t.restrictStatus,inertia:t.inertiaStatus,downTime:t.downTimes[0],downEvent:t.downEvent,downPointer:t.downPointer,prevEvent:t.prevEvent,Interactable:ht,interactables:Pt,pointerIsDown:t.pointerIsDown,defaultOptions:Ht,defaultActionChecker:rt,actionCursors:Xt,dragMove:te.dragMove,resizeMove:te.resizeMove,gestureMove:te.gestureMove,pointerUp:te.pointerUp,pointerDown:te.pointerDown,pointerMove:te.pointerMove,pointerHover:te.pointerHover,eventTypes:jt,events:Kt,globalEvents:Vt,delegatedEvents:Ft,prefixedPropREs:Jt}},lt.getPointerAverage=D,lt.getTouchBBox=M,lt.getTouchDistance=F,lt.getTouchAngle=H,lt.getElementRect=T,lt.getElementClientRect=k,lt.matchesSelector=gt,lt.closest=Y,lt.margin=ct(function(t){return c(t)?(It=t,lt):It},"interact.margin is deprecated. Use interact(target).resizable({ margin: number }); instead."),lt.supportsTouch=function(){return Nt},lt.supportsPointerEvent=function(){return Rt},lt.stop=function(t){for(var e=Dt.length-1;e>=0;e--)Dt[e].stop(t);return lt},lt.dynamicDrop=function(t){return p(t)?(Mt=t,lt):Mt},lt.pointerMoveTolerance=function(t){return c(t)?(Lt=t,this):Lt},lt.maxInteractions=function(t){return c(t)?(qt=t,this):qt},lt.createSnapGrid=function(t){return function(e,i){var n=0,r=0;l(t.offset)&&(n=t.offset.x,r=t.offset.y);var s=Math.round((e-n)/t.x),o=Math.round((i-r)/t.y),a=s*t.x+n,h=o*t.y+r;return{x:a,y:h,range:t.range}}},ut(bt),Qt in Element.prototype&&h(Element.prototype[Qt])||(yt=function(t,e,i){i=i||t.parentNode.querySelectorAll(e);for(var n=0,r=i.length;n<r;n++)if(i[n]===t)return!0;return!1}),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!i.requestAnimationFrame;++n)$t=i[e[n]+"RequestAnimationFrame"],Zt=i[e[n]+"CancelAnimationFrame"]||i[e[n]+"CancelRequestAnimationFrame"];$t||($t=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),r=setTimeout(function(){e(i+n)},n);return t=i+n,r}),Zt||(Zt=function(t){clearTimeout(t)})}(),"undefined"!=typeof e?("undefined"!=typeof t&&t.exports&&(e=t.exports=lt),e.interact=lt):"function"==typeof define&&define.amd?define("interact",function(){return lt}):i.interact=lt}}("undefined"==typeof window?void 0:window)}),Ft=Mt&&"object"===("undefined"==typeof Mt?"undefined":w(Mt))&&"default"in Mt?Mt.default:Mt,Mt=Mt.interact,Ht=document.querySelector("#quizTitle"),Ot=document.querySelector("#quizSubTitle"),Nt=document.querySelector("#btn_quiz_next"),Rt=document.querySelector("#no_quiz"),It=document.querySelectorAll("ul.quiz"),Lt=0,Yt=null,qt=-1,Xt=function(){function t(e,i,n){var r=this;_(this,t),Yt=e,this.no=0,this.chapter=0,this.type="select",this.currentAnswer=[],qt=-1;for(var s=this,o=0;o<25;o+=1){var a=It[o];It[o].className;if(R.hasClass(a,"select"))for(var l=a.querySelectorAll("li"),h=0,c=l.length;h<c;h+=1)l[h].index=h,l[h].addEventListener("click",function(){if("select"==this.className){this.className="";var t=s.currentAnswer.indexOf(this.index);t>-1&&s.currentAnswer.splice(t,1)}else s.currentAnswer.indexOf(this.index)==-1&&s.currentAnswer.push(this.index),this.className="select";s.currentAnswer.sort(),s.calculatePoints()});else new b(this)}Nt.addEventListener("click",function(){if(r.currentAnswer.length>0&&qt>-1)if(i.save(r.no,qt),r.no+=1,r.currentAnswer=[],Lt+=1,C.quizData[r.chapter][Lt]){var t=C.cuepoints_show_btn_quiz[r.chapter].end-C.cuepoints_show_btn_quiz[r.chapter].start-C.delayAutoOpenQuizz,e=C.quizData[r.chapter].length,s=C.cuepoints_show_btn_quiz[r.chapter].start+Lt/e*t;Yt.currentTime(s),r.show(Lt)}else{if(Lt=0,r.chapter+=1,C.cuepoints_show_btn_quiz[r.chapter]){var o=C.cuepoints_show_btn_quiz[r.chapter].start;Yt.currentTime(o-2-C.delayAutoOpenQuizz)}else Yt.currentTime(Yt.duration()-.2),n.end();n.next()}})}return t.prototype.show=function(t){R.addClass(Nt,"disabled"),Yt.currentTime(C.quizData[this.chapter][Lt].start),Ht.innerHTML=C.quizData[this.chapter][Lt].title[0],Ot.innerHTML=C.quizData[this.chapter][Lt].title[1],Rt.innerHTML=this.no;for(var e=0;e<25;e+=1)this.no-1!=e?It[e].style.display="none":(R.hasClass(It[e],"select")&&(this.type="select"),R.hasClass(It[e],"match")&&(this.type="match"),It[e].style.display="block")},t.prototype.disableBtnNext=function(){qt=-1,R.addClass(Nt,"disabled")},t.prototype.enableBtnNext=function(){R.removeClass(Nt,"disabled")},t.prototype.calculatePoints=function(){qt=-1;var t=C.quizData[this.chapter][Lt].r,e=this.currentAnswer,i=t.length,n=e.length;if("match"===this.type){var r=0;if(n!=i)return void this.disableBtnNext();for(var s=0;s<n;s+=1){if(e[s]==-1||void 0==e[s])return r=0,void this.disableBtnNext();e[s]==t[s]&&(r+=1),this.enableBtnNext()}qt=r>=Math.round(i/2)?.5:0,r==i&&(qt=1)}else{var o=[];if(qt=0,n==i||C.quizData[this.chapter][Lt].all){for(var s=0;s<i;s+=1)for(var a=0;a<e.length;a+=1)t.indexOf(e[a])!=-1?o[a]=1:o[a]=0;var l=o.reduce(function(t,e){return t+e},0);l>=Math.round(i/2)&&(qt=.5),l==i&&(qt=1)}n<1?this.disableBtnNext():this.enableBtnNext()}},t}(),Wt=function(t){if(!T.isIos&&t.supportsFullScreen){var e=t.widget({x:C.player.videoWidth-58,y:10,width:48,height:48}),i=document.getElementById("fullScreenBtn");i.addEventListener("click",function(){try{i.blur()}catch(t){}t.toggleFullScreen()}),t.on("enterFullScreen",function(){t.addClass(i,"exit")}),t.on("exitFullScreen",function(){t.removeClass(i,"exit")}),e.content(i)}},Bt=document.querySelector("#openQuiz"),jt=function(t){function e(){return _(this,e),E(this,t.call(this,C.player))}return x(e,t),e.prototype.init=function(){var t=this,e=this.widget({x:20,y:20,width:100,height:100});e.content(document.querySelector("#logo"));var i=document.querySelector("#hero"),n=i.querySelector("h1"),r=i.querySelector("h2"),s=this.widget({x:20,y:200,width:1240,height:200});s.content(i),Wt(this);var o=this.popupContainer({width:"80%",height:"70%",visible:!1,header:!1});o.setFontSize(60),o.body.backgroundColor("#fff",1),o.content(document.getElementById("quizz")),o.on("show",function(){s.hide()}),o.on("hide",function(){s.show()});var a=new Xt(this,{save:function(t,e){}},{end:function(){setTimeout(function(){s.hide()},500),t.pause()},next:function(){o.hide()}}),l=[];this.once("loadedmetadata",function(){for(var t in C.chapters){var e=C.chapters[t];e.content=document.createElement("div");var i=document.createElement("span");i.innerHTML=C.controlSeekBarSpeed[t].label;var s=document.createElement("div");s.className="progress",e.content.appendChild(s),e.content.appendChild(i),l.push(s);var h=this.cuepoints.add(e);h.el.index=t}for(var t in C.controlSeekBarSpeed){var c=C.controlSeekBarSpeed[t];c.on={start:function(t,e,i){return function(){n.innerHTML=t,r.innerHTML=e;for(var s in l)s<i&&(l[s].style.width="100%"),s>i&&(l[s].style.width=0)}}(c.title[0],c.title[1],parseInt(t)),process:function(t,e,i){var n=l[t];return function(t){if(e<=t&&t<=i){var r=Math.round((t-e)/(i-e)*100);r>=99&&(r=100),n.style.width=r+"%"}}}(parseInt(t),c.start,c.end)},this.cuepoints.add(c)}for(var t in C.cuepoints_show_btn_quiz){var p=C.cuepoints_show_btn_quiz[t];p.on={start:function(t,e){return function(){a.chapter=t,a.no=e,R.addClass(Bt,"show")}}(p.chapter,p.quizNo),end:function(){R.removeClass(Bt,"show")}},this.cuepoints.add(p);var u=p;u.start+=C.delayAutoOpenQuizz,u.on={start:function(){o.visible()||(a.show(0),o.show())}},this.cuepoints.add(u)}this.emit("resize")}),Bt.addEventListener("click",function(){"btn show"==this.className&&(a.show(0),o.show())})},e}(Dt),Vt=function(){new jt}();return Vt}();